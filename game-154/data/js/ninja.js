var Gamee;!function(t){var e=function(){function t(e,i,n,a){this._game=null,this._controller=null,this._saveState=null,this._replayData=null,this._socialData=null,this._indices={right:1,up:2,left:4,down:8,A:16,B:32,button:64},this._pressesCache=0,this._isDown=0,this._justDown=0,this._justUp=0,this._gameRunning=!1,this._score=0,this._ghostScore=0,this._gameReady=!1,this._platform=null,this._isBattle=!1,this._gameReady=!1,void 0!==window.gamee&&(this.setEventHandlers(),window.gamee.gameInit(e,{},n,function(t,e){this.initResponse(t,e);window.gamee.requestPlayerData(function(t,e){null!=e&&(App.Global.saveData.coins=e.player.coins),a()})}.bind(this))),t._instance=this}return Object.defineProperty(t,"instance",{get:function(){return t._instance},enumerable:!0,configurable:!0}),t.prototype.initResponse=function(t,e){var i=e.sound;void 0===i&&(i=!0),this._controller=e.controller,this._sound=i,null!=e.saveState&&0!==e.saveState.length?(this._saveState=JSON.parse(e.saveState),App.Global.saveData=JSON.parse(e.saveState),null==App.Global.saveData.skins&&(App.Global.saveData=new Ninja.SaveData)):App.Global.saveData=new Ninja.SaveData,null!=e.replayData&&null!=e.replayData.data&&0!==e.replayData.data.length&&(this._replayData=JSON.parse(e.replayData.data)),null!=e.socialData&&0!==e.socialData.length&&(this._socialData=JSON.parse(e.socialData)),null!=e.platform&&0!==e.platform.length&&(this._platform=e.platform),null!=e.gameContext&&0!==e.gameContext.length&&(this._isBattle="battle"===e.gameContext),this.setKeyHandlers()},t.prototype.setGame=function(t){this._game=t},Object.defineProperty(t.prototype,"gameRunning",{get:function(){return this._gameRunning},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sound",{get:function(){return this._sound},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"replayData",{get:function(){return this._replayData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"saveState",{get:function(){return this._saveState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isWeb",{get:function(){return null!==this._platform&&("web"===this._platform||"mobile_web"===this._platform)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBattle",{get:function(){return this._isBattle},enumerable:!0,configurable:!0}),t.prototype.gameReady=function(){window.gamee.gameReady(),this._gameReady=!0},t.prototype.setKeyHandlers=function(){var t=this;this._controller.on("keydown",function(e){t._pressesCache|=t._indices[e.button];var i=t._game.state.getCurrentState();"function"==typeof i.onGameeButtonDown&&i.onGameeButtonDown(e.button)}),this._controller.on("keyup",function(e){t._pressesCache&=~t._indices[e.button];var i=t._game.state.getCurrentState();"function"==typeof i.onGameeButtonUp&&i.onGameeButtonUp(e.button)})},t.prototype.setEventHandlers=function(){var t=this;window.gamee.emitter.addEventListener("pause",function(){t.onPause()}),window.gamee.emitter.addEventListener("resume",function(){t.onUnpause()}),window.gamee.emitter.addEventListener("mute",function(){t._game&&t._game.onSound(!1)}),window.gamee.emitter.addEventListener("unmute",function(){t._game&&t._game.onSound(!0)}),window.gamee.emitter.addEventListener("start",function(e){t.onStart(e)})},t.prototype.onPause=function(){var t=this._game.state.getCurrentState();"function"==typeof t.onGameePause&&t.onGameePause()},t.prototype.onUnpause=function(){var t=this._game.state.getCurrentState();"function"==typeof t.onGameeUnpause&&t.onGameeUnpause()},t.prototype.onStart=function(t){if(!this._gameReady)throw new Error("Game received 'start' event before gameReady() was called!");this.gameStart();var e=this._game.state.getCurrentState();if("function"==typeof e.onGameeRestart){var i=void 0!==t.detail.opt_resetState&&t.detail.opt_resetState,n=void 0!==t.detail.opt_replay&&t.detail.opt_replay,a=void 0!==t.detail.opt_ghostMode&&t.detail.opt_ghostMode;e.onGameeRestart(i,n,a)}t.detail.callback()},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),t.prototype.setScore=function(t,e){void 0===e&&(e=!1),e?(this._ghostScore=t,window.gamee.updateScore(t,!0)):(this._score=t,window.gamee.updateScore(t))},t.prototype.gameStart=function(){this._gameRunning,this._gameRunning=!0},t.prototype.gameOver=function(t){this._gameRunning,this._gameRunning=!1,null!=t&&(t={data:JSON.stringify(t)}),window.gamee.gameOver(t)},t.prototype.gameSave=function(t,e){window.gamee.gameSave(t,e)},t._instance=null,t}();t.Gamee=e}(Gamee||(Gamee={}));var Log;!function(t){var e=function(){return function(t,e){this.msg=t,this.color=e}}(),i=function(){function t(){}return t.msg=function(i,n){var a=t.messages;void 0===n&&(n=t.YELLOW);for(var s=0;s<i.length;){var o=i.substr(s,60);if(a.length<t.MAX_LINE)t.messages.push(new e(o,n));else{for(var r=1;r<t.MAX_LINE;r++)a[r-1].msg=a[r].msg,a[r-1].color=a[r].color;a[t.MAX_LINE-1].msg=o,a[t.MAX_LINE-1].color=n}s+=60}},t.render=function(e){for(var i=t.messages,n=0;n<i.length;n++)e.text(i[n].msg,10,70+16*n,i[n].color)},t.RED="RGB(255, 0, 0)",t.GREEN="RGB(0, 255, 0)",t.BLUE="RGB(, 0, 255)",t.YELLOW="RGB(255, 255, 0)",t.MAGENTA="RGB(255, 0, 255)",t.CYAN="RGB(0, 255, 255)",t.WHITE="RGB(255, 255, 255)",t.MAX_LINE=32,t.messages=[],t}();t.Log=i}(Log||(Log={}));!function(t){var e=function(){function t(){}return t.randomizeArray=function(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1);var a=i?e.slice():e;return Phaser.ArrayUtils.shuffle(a),n?a.slice(0,t):a},t.sort=function(e,i,n,a){if(void 0===n&&(n=0),void 0===a&&(a=e.length),n<a){for(var s,o=n,r=n+1;r<=a;r++)i(e[n],e[r])>0&&(s=e[++o],e[o]=e[r],e[r]=s);s=e[n],e[n]=e[o],e[o]=s,t.sort(e,i,n,o-1),t.sort(e,i,o+1,a)}},t}();t.ArrayUtils=e}(Helper||(Helper={}));!function(t){!function(t){function e(t){return-2*t*t+3*t}t.wiggle=function(t,e,i){var n=t*Math.PI*2*e,a=t*(2*Math.PI*i+Math.PI/2);return Math.sin(n)*Math.cos(a)},t.sinWithExpDecay=function(t,e,i){var n=t*Math.PI*2*e,a=-t*i;return Math.sin(n)*Math.exp(a)},t.pop5=e,t.pop5rev=function(t){return-(e(1-t)-1)},t.sin=function(t){return Math.sin(2*t*Math.PI)},t.halfSin=function(t){return Math.sin(t*Math.PI)},t.sinWithPeriod=function(t,e){return Math.sin(2*t*Math.PI*e)}}(t.Easing||(t.Easing={}))}(Helper||(Helper={}));!function(t){var e=function(){function t(){}return t.create=function(e,i,n,a,s,o,r,h,l,u){return void 0===o&&(o=0),void 0===r&&(r=0),void 0===h&&(h=0),void 0===l&&(l=0),void 0===u&&(u=!1),t._image=new Phaser.Image(e,0,0,a),t._frame="string"==typeof s?e.cache.getFrameByName(a,s):e.cache.getFrameByIndex(a,s),t.calculateNineImage(i,n,o,r,h,l,u),t._nineImage=new Phaser.BitmapData(e,"NineImage"+t._textureKey++,t._width,t._height),t.renderNineImage(),t._nineImage},t.calculateNineImage=function(e,i,n,a,s,o,r){var h=t._frame;if(t._centralWidth=h.width-a-o,t._centralHeight=h.height-n-s,r)t._horizontalRepeats=e,t._verticalRepeats=i,t._width=a+o+t._centralWidth*e,t._height=n+s+t._centralHeight*i,t._lastWidth=0,t._lastHeight=0;else{var l=e-a-o;t._horizontalRepeats=Math.floor(l/t._centralWidth),t._lastWidth=l%t._centralWidth;var u=i-n-s;t._verticalRepeats=Math.floor(u/t._centralHeight),t._lastHeight=u%t._centralHeight,t._width=e,t._height=i}t._leftWidth=a,t._rightWidth=o,t._topHeight=n,t._bottomHeight=s},t.renderNineImage=function(){var e=t._frame.y,i=0;t._topHeight>0&&(t.renderNineImageRow(t._image,e,i,t._topHeight),e+=t._topHeight,i+=t._topHeight);for(var n=0;n<t._verticalRepeats;n++)t.renderNineImageRow(t._image,e,i,t._centralHeight),i+=t._centralHeight;t._lastHeight>0&&(t.renderNineImageRow(t._image,e,i,t._lastHeight),i+=t._lastHeight),e+=t._centralHeight,t._bottomHeight>0&&t.renderNineImageRow(t._image,e,i,t._bottomHeight)},t.renderNineImageRow=function(e,i,n,a){var s=t._frame.x,o=0;t._leftWidth>0&&(t._nineImage.copy(e,s,i,t._leftWidth,a,o,n),o+=t._leftWidth,s+=t._leftWidth);for(var r=0;r<t._horizontalRepeats;r++)t._nineImage.copy(e,s,i,t._centralWidth,a,o,n),o+=t._centralWidth;t._lastWidth>0&&(t._nineImage.copy(e,s,i,t._lastWidth,a,o,n),o+=t._lastWidth),s+=t._centralWidth,t._rightWidth>0&&t._nineImage.copy(e,s,i,t._rightWidth,a,o,n)},t._textureKey=0,t}();t.NineImage=e}(Helper||(Helper={}));var Helper;!function(t){var e;!function(t){t[t.UNDEFINED=-1]="UNDEFINED",t[t.SPACE=1]="SPACE",t[t.NEWLINE=2]="NEWLINE",t[t.CHARACTER=3]="CHARACTER"}(e||(e={}));var i=function(){function t(){}return t.hasNext=function(){return t.textPosition<t.text.length},t.getChar=function(){return t.text.charAt(t.textPosition++)},t.peekChar=function(){return t.text.charAt(t.textPosition)},t.getPosition=function(){return t.textPosition},t.setPosition=function(e){t.textPosition=e},t.getCharAdvance=function(e,i){var n=t.fontData.chars[e],a=n.xAdvance;return i>0&&n.kerning[i]&&(a+=n.kerning[i]),a},t.getCharType=function(t){return" "===t?e.SPACE:/(?:\r\n|\r|\n)/.test(t)?e.NEWLINE:e.CHARACTER},t.wrapText=function(i,n,a,s,o,r){t.text=n,t.setPosition(0),t.fontData=i.cache.getBitmapFont(o).font,void 0===r&&(r=t.fontData.size);var h=r/t.fontData.size,l=t.fontData.lineHeight*h,u=a/h,c=[],p=[],_=[],m=0,d=0,g=0;c[m]=g,_[d++]=0;for(var f=s;t.hasNext();){for(var y=0,P=0,v=-1,E=e.UNDEFINED,A=e.UNDEFINED,S=u,b=-1;t.hasNext();){g=t.getPosition();var T=t.getChar();E=t.getCharType(T);var N=T.charCodeAt(0);if(E===e.SPACE)A!==e.SPACE&&(P=y),++y,S-=t.getCharAdvance(N,b);else if(E===e.CHARACTER){if(A!==e.CHARACTER&&(v=g),(S-=t.getCharAdvance(N,b))<0)break;++y}else if(E===e.NEWLINE){var R=!1;if(t.hasNext()&&(R=!0,P=y,g=v=t.getPosition(),S=-1,E=e.CHARACTER),R)break}A=E,b=N}(f-=l)<0&&(_[d++]=m),S<0&&E===e.CHARACTER?(p[m]=0!==P?P:y,!1,f<0&&(!0,f=s-l),0!==P?(c[++m]=v,t.setPosition(v)):(c[++m]=g,t.setPosition(g))):t.hasNext()||(E===e.CHARACTER?p[m]=y:E===e.SPACE&&(p[m]=P))}_[d]=m+1;for(var C=[],w=1;w<=d;w++){for(var M=_[w-1],O=_[w],D=[],k=M;k<O;k++)D.push(t.text.substr(c[k],p[k]));C.push(D.join("\n"))}return C},t}();t.TextWrapper=i}(Helper||(Helper={}));!function(t){var e=function(){return function(){this.coins=0,this.skins=["ninja"],this.selected="ninja"}}();t.SaveData=e}(Ninja||(Ninja={}));!function(t){var e=function(){function e(t,i){this.maxVelocity=e.MAX_VELOCITY,this._delay=0,this._velocity=new Phaser.Point(0,0),this._angularVelocity=0,this._friction=0,this._angularDrag=0,this._gravity=0,this._alpha=1,this._scaleChange=0,this._alphaChange=0,this._game=t}return Object.defineProperty(e.prototype,"visual",{get:function(){return this._visual},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"on",{set:function(t){this._on=t,this._visual.exists=t,this._visual.visible=t},enumerable:!0,configurable:!0}),e.prototype.remove=function(){var t=this._visual.parent;null!==t&&(t instanceof Phaser.Group?t.remove(this._visual):t.removeChild(this._visual),t=null)},e.prototype.bringToTop=function(){var t=this._visual.parent;t instanceof Phaser.Group&&t.bringToTop(this._visual)},e.prototype.sendToBack=function(){var t=this._visual.parent;t instanceof Phaser.Group&&t.sendToBack(this._visual)},Object.defineProperty(e.prototype,"textureKey",{set:function(t){this._textureKey=t},enumerable:!0,configurable:!0}),e.prototype.setScaleChange=function(t,e){void 0===e&&(e=0),this._scaleChangeType=t,this._scaleChange=e},Object.defineProperty(e.prototype,"delay",{set:function(t){this._delay=t,t>0&&(this.on=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{set:function(t){this._alpha=t,this._visual.alpha=Phaser.Math.clamp(t,0,1)},enumerable:!0,configurable:!0}),e.prototype.setAlphaChange=function(t,e){void 0===e&&(e=0),this._alphaChangeType=t,this._alphaChange=e},e.prototype.setPhysics=function(t,e,i,n,a,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=0),void 0===s&&(s=0),this._velocity.setTo(t,e),this._angularVelocity=i,this._friction=n,this._angularDrag=a,this._gravity=s,this._simplePhysics=0===s&&0===n&&0===a},e.prototype.setFrame=function(t){},e.prototype.onEmit=function(t){t.add(this._visual)},e.prototype.onKill=function(t){},e.prototype.update=function(e){void 0===e&&(e=!0);var i=this._game.time.physicsElapsed;if(this._delay>0){if((this._delay-=i)>0)return!0;this.on=!0}if(this.lifetime>0&&(this.lifetime-=i)<=0)return!1;if(0===this._velocity.x&&0===this._velocity.y||(this._visual.x+=this._velocity.x*i,this._visual.y+=this._velocity.y*i),0!==this._angularVelocity&&(this._visual.angle+=this._angularVelocity*i),this._simplePhysics||(this._velocity.x+=-this._friction*this._velocity.x*i,this._velocity.y+=(this._gravity-this._friction*this._velocity.y)*i,this._angularVelocity+=-this._angularDrag*this._angularVelocity*i),!e)return!0;if(this._scaleChangeType!=t.eParameterChangeType.NO_CHANGE)switch(this._scaleChangeType){case t.eParameterChangeType.IN_TIME:(this._visual.scale.x+=this._scaleChange*i)<0&&(this._visual.scale.x=0,this._scaleChange<0&&(this._scaleChangeType=t.eParameterChangeType.NO_CHANGE)),(this._visual.scale.y+=this._scaleChange*i)<0&&(this._visual.scale.y=0,this._scaleChange<0&&(this._scaleChangeType=t.eParameterChangeType.NO_CHANGE))}if(this._alphaChangeType!=t.eParameterChangeType.NO_CHANGE)switch(this._alphaChangeType){case t.eParameterChangeType.IN_TIME:this._alpha+=this._alphaChange*i,this._alpha<0?(this._visual.alpha=0,this._alphaChange<0&&(this._alphaChangeType=t.eParameterChangeType.NO_CHANGE)):this._alpha>1?(this._visual.alpha=1,this._alphaChange>0&&(this._alphaChangeType=t.eParameterChangeType.NO_CHANGE)):this._visual.alpha=this._alpha}return!0},e.MAX_VELOCITY=1e3,e}();t.Particle=e}(Particles||(Particles={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setFrame=function(t){var e=this._visual;"string"==typeof t?e.frameName=t:e.frame=t},e.prototype.onCreate=function(t){var e=new Phaser.Sprite(this._game,0,0,this._textureKey);e.anchor.setTo(.5,.5),this._visual=e},e}(t.Particle);t.SpriteParticle=e}(Particles||(Particles={}));!function(t){var e=function(t){function e(e,i){var n=t.call(this,e,i)||this;return void 0!==i&&null===i||(n._anims=i[0]),n}return __extends(e,t),e.prototype.onCreate=function(e){t.prototype.onCreate.call(this,e);for(var i=this._visual,n=0;n<this._anims.length;n++){var a=this._anims[n],s=i.animations.add(a.name,a.frames,a.frameRate,a.loop);!a.loop&&a.killOnComplete&&(s.killOnComplete=!0)}},e.prototype.update=function(e){void 0===e&&(e=!0);var i=this._delay,n=t.prototype.update.call(this,e);return i>0&&this._delay<=0&&this._visual.animations.currentAnim.play(),n},e.prototype.setFrame=function(t){this.setAnim(t)},e.prototype.setAnim=function(t){var e=this._visual;e.animations.stop(null,!0),this._delay<=0?e.animations.play(t):(e.animations.currentAnim=e.animations.getAnimation(t),e.frame=e.animations.currentAnim._frames[0])},e.prototype.setRandomAnim=function(){this._visual;var t=this._anims[this._game.rnd.integerInRange(0,this._anims.length-1)].name;this.setAnim(t)},e}(t.SpriteParticle);t.AnimatedParticle=e}(Particles||(Particles={}));!function(t){var e=function(){function e(e){this.area=new Phaser.Point(0,0),this.gravity=0,this.minLifetime=1,this.maxLifetime=1,this.delay=0,this.minScale=1,this.maxScale=1,this.scaleChange=0,this.scaleChangeType=t.eParameterChangeType.NO_CHANGE,this.minAngle=0,this.maxAngle=0,this.minSpeedX=0,this.maxSpeedX=0,this.minSpeedY=0,this.maxSpeedY=0,this.friction=0,this.minAngularSpeed=0,this.maxAngularSpeed=0,this.angularDrag=0,this.minAlpha=1,this.maxAlpha=1,this.alphaChange=0,this.alphaChangeType=t.eParameterChangeType.NO_CHANGE,this.frames=null,this._minAdvScale=new Phaser.Point(1,1),this._maxAdvScale=new Phaser.Point(1,1),this._game=e}return e.readParams=function(t,i){var n={};for(var a in i){var s=new e(t);e.doReadParams(s,i,a),n[a]=s}return n},e.doReadParams=function(t,i,n){var a=i[n];if(void 0!==a.parent&&null!==a.parent){var s=a.parent;e.doReadParams(t,i,s)}for(var o in a)"parent"!==o&&(t[o],t[o]=a[o])},e.prototype.clear=function(){this.gravity=0,this.setXSpeed(0,0),this.setYSpeed(0,0),this.setAngularSpeed(0)},e.prototype.randomFrame=function(){var t=null;return null!==this.frames&&(t=Array.isArray(this.frames)?(this.frames[0],this._game.rnd.pick(this.frames)):this.frames),t},e.prototype.setXSpeed=function(t,e){t=t||0,e=e||0,this.minSpeedX=t,this.maxSpeedX=e},e.prototype.setYSpeed=function(t,e){t=t||0,e=e||0,this.minSpeedY=t,this.maxSpeedY=e},e.prototype.setAngularSpeed=function(t,e){t=t||0,e=e||0,this.minAngularSpeed=t,this.maxAngularSpeed=e},e.prototype.setAlpha=function(t,e){void 0===t&&(t=1),void 0===e&&(e=1),this.minAlpha=t,this.maxAlpha=e},e.prototype.setAlphaChange=function(e,i,n){switch(void 0===i&&(i=0),void 0===n&&(n=0),this.alphaChangeType=e,e){case t.eParameterChangeType.NO_CHANGE:this.alphaChange=0;break;case t.eParameterChangeType.IN_TIME:0===n&&(n=1),this.alphaChange=i/n}},e.prototype.setScale=function(t,e){t=t||0,e=e||0,this.minScale=t,this.maxScale=e},Object.defineProperty(e.prototype,"advScaleMin",{get:function(){return this._minAdvScale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"advScaleMax",{get:function(){return this._maxAdvScale},enumerable:!0,configurable:!0}),e.prototype.setAdvScale=function(t,e,i,n){void 0===t&&(t=1),void 0===e&&(e=1),void 0===i&&(i=1),void 0===n&&(n=1),this._minAdvScale.setTo(t,i),this._maxAdvScale.setTo(e,n)},e.prototype.setScaleChange=function(e,i,n){switch(void 0===i&&(i=0),void 0===n&&(n=0),this.scaleChangeType=e,e){case t.eParameterChangeType.NO_CHANGE:this.scaleChange=0;break;case t.eParameterChangeType.IN_TIME:0===n&&(n=1),this.scaleChange=i/n}},e.prototype.setAngle=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.minAngle=t,this.maxAngle=e},e}();t.ParticleParams=e}(Particles||(Particles={}));!function(t){var e;!function(t){t[t.NONE=0]="NONE",t[t.FLOW=1]="FLOW",t[t.EXPLODE=2]="EXPLODE"}(e||(e={}));var i;!function(t){t[t.NO_CHANGE=0]="NO_CHANGE",t[t.IN_TIME=1]="IN_TIME"}(i=t.eParameterChangeType||(t.eParameterChangeType={}));var n=function(n){function a(i,s,o,r){var h=n.call(this,i,null)||this;return h._maxParticles=a.MAX_PARTICELES,h.emitPoint=new Phaser.Point(0,0),h.emitObject=null,h.particleClass=t.SpriteParticle,h.particleBringToTop=!1,h.particleSendToBack=!1,h.frequency=100,h.forceEmit=!1,h._alternativeParams=null,h._on=!1,h._mode=e.NONE,h._flowQuantity=0,h._flowTotal=0,h._flowCounter=0,h._particlesPool=[],h._counterPool=0,h._particlesUsed=[],h._counterUsed=0,h._timer=0,h._emitPoint=new Phaser.Point(0,0),h._params=new t.ParticleParams(i),h.position.setTo(s,o),h._maxParticles=r,h}return __extends(a,n),Object.defineProperty(a.prototype,"params",{set:function(t){this._params=t},enumerable:!0,configurable:!0}),a.prototype.clear=function(){this._params.clear()},a.prototype.update=function(){if(this._on&&this.game.time.time>=this._timer&&(this._timer=this.game.time.time+this.frequency*this.game.time.slowMotion,this._mode===e.FLOW))if(-1!==this._flowTotal&&this._flowCounter>=this._flowTotal)this.stopFlow();else for(var t=Math.max(1,this._flowQuantity),i=0;i<t&&!(this.emitParticle(this.forceEmit)&&(this._flowCounter++,-1!==this._flowTotal&&this._flowCounter>=this._flowTotal));i++);for(i=this._counterUsed-1;i>=0;i--){var n=this._particlesUsed[i];n.update()||(n.on=!1,n.remove(),n.onKill(this),this._particlesUsed[i]=this._particlesUsed[--this._counterUsed],this._particlesPool[this._counterPool++]=n)}},a.prototype.makeParticles=function(t,e,i,n){(void 0===i||i>this._maxParticles)&&(i=this._maxParticles),void 0!==e&&(this._params.frames=e);for(var a=0;a<i;a++){var s=new this.particleClass(this.game,n);s.textureKey=t,s.onCreate(this),s.on=!1,this._particlesPool[this._counterPool++]=s}},Object.defineProperty(a.prototype,"on",{set:function(t){this._on=t,this.exists=t,this.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"countParticles",{get:function(){return this._counterUsed},enumerable:!0,configurable:!0}),a.prototype.explode=function(t,i,n){this._mode=e.EXPLODE,this.on=!0,this.emitParticles(t,i,n)},a.prototype.flow=function(t,i,n,a,s,o){this._mode=e.FLOW,this.on=!0,void 0!==i&&0!==i||(i=1),void 0===n&&(n=-1),void 0===a&&(a=!0),i>this._maxParticles&&(i=this._maxParticles),this.frequency=t,this._flowCounter=0,this._flowQuantity=i,this._flowTotal=n,a&&(this.emitParticles(i,s,o),this._flowCounter+=i,this._timer=this.game.time.time+t*this.game.time.slowMotion)},a.prototype.stopFlow=function(){this._mode=e.NONE},a.prototype.killAllParticles=function(t){for(void 0===t&&(t=!0);this._counterUsed>0;){var e=this._particlesUsed[--this._counterUsed];e.remove(),t||e.onKill(this),this._particlesPool[this._counterPool++]=e}},a.prototype.emitParticles=function(t,e,i){for(var n=0;n<t;n++){var a=this.emitParticle(this.forceEmit);if(null===a)break;void 0!==e&&null!==e&&e.call(i,a)}},a.prototype.emitParticle=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),0===this._counterPool){if(!t)return null;var n=this._particlesUsed[0];this._particlesUsed[0]=this._particlesUsed[--this._counterUsed],n.remove(),n.onKill(this),this._particlesPool[this._counterPool++]=n}var a=this._particlesPool[--this._counterPool];this._particlesUsed[this._counterUsed++]=a,a.on=!0;var s=null!==this._alternativeParams?this._alternativeParams:this._params;if(this.randomEmitPoint(this._emitPoint,s),a.visual.position.set(this._emitPoint.x,this._emitPoint.y),a.visual.angle=0,e)a.lifetime=-1,a.visual.scale.set(1,1),a.setScaleChange(i.NO_CHANGE),a.visual.angle=0,a.alpha=1,a.setAlphaChange(i.NO_CHANGE),a.setPhysics();else{if(a.lifetime=this.game.rnd.realInRange(s.minLifetime,s.maxLifetime),a.delay=s.delay,1!==s.minScale||1!==s.maxScale){var o=this.game.rnd.realInRange(s.minScale,s.maxScale);a.visual.scale.set(o,o)}else s.advScaleMin.x!==s.advScaleMax.x||s.advScaleMin.y!==s.advScaleMax.y?a.visual.scale.set(this.game.rnd.realInRange(s.advScaleMin.x,s.advScaleMax.x),this.game.rnd.realInRange(s.advScaleMin.y,s.advScaleMax.y)):a.visual.scale.set(1,1);a.setScaleChange(s.scaleChangeType,s.scaleChange),a.visual.angle=s.minAngle===s.maxAngle?s.minAngle:this.game.rnd.realInRange(s.minAngle,s.maxAngle),a.alpha=this.game.rnd.realInRange(s.minAlpha,s.maxAlpha),a.setAlphaChange(s.alphaChangeType,s.alphaChange),a.setPhysics(this.game.rnd.realInRange(s.minSpeedX,s.maxSpeedX),this.game.rnd.realInRange(s.minSpeedY,s.maxSpeedY),this.game.rnd.realInRange(s.minAngularSpeed,s.maxAngularSpeed),s.friction,s.angularDrag,s.gravity),null!==s.frames&&a.setFrame(s.randomFrame())}return a.onEmit(this),this.particleBringToTop?a.bringToTop():this.particleSendToBack&&a.sendToBack(),a},a.prototype.destroy=function(){t.ParticlesManager.instance.remove(this),n.prototype.destroy.call(this,!0,!1)},a.prototype.randomEmitPoint=function(t,e){return e.area instanceof Phaser.Point?t.setTo(0,0):e.area.random(t),t.x+=this.emitPoint.x,t.y+=this.emitPoint.y,null!==this.emitObject&&(t.x+=this.emitObject.x,t.y+=this.emitObject.y),t},Object.defineProperty(a.prototype,"area",{set:function(t){this._params.area=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"gravity",{set:function(t){this._params.gravity=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"friction",{set:function(t){this._params.friction=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"angularDrag",{set:function(t){this._params.angularDrag=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minScale",{set:function(t){this._params.minScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxScale",{set:function(t){this._params.maxScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minAngle",{set:function(t){this._params.minAngle=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxAngle",{set:function(t){this._params.maxAngle=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"lifetime",{set:function(t){this._params.minLifetime=this._params.maxLifetime=t},enumerable:!0,configurable:!0}),a.prototype.setXSpeed=function(t,e){this._params.setXSpeed(t,e)},a.prototype.setYSpeed=function(t,e){this._params.setYSpeed(t,e)},a.prototype.setAngularSpeed=function(t,e){this._params.setAngularSpeed(t,e)},a.prototype.setAlpha=function(t,e){this._params.setAlpha(t,e)},a.prototype.setAlphaChange=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._params.setAlphaChange(t,e,i)},a.prototype.setScale=function(t,e){this._params.setScale(t,e)},a.prototype.setAdvScale=function(t,e,i,n){this._params.setAdvScale(t,e,i,n)},a.prototype.setScaleChange=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._params.setScaleChange(t,e,i)},a.prototype.setAngle=function(t,e){this._params.setAngle(t,e)},a.prototype.emitAt=function(t,e){this.emitPoint.setTo(t,e)},a.prototype.emitAtObject=function(t){t.center?this.emitPoint.setTo(t.center.x,t.center.y):this.emitPoint.setTo(t.x,t.y)},a.MAX_PARTICELES=16,a}(Phaser.Group);t.ParticlesEmitter=n}(Particles||(Particles={}));!function(t){var e=function(){function t(t,e,i,n){void 0===i&&(i=null),void 0===n&&(n=null),this._emitter=null,this._game=t,this._emitter=e,this._animEmitter=i,this._params=n}return t.prototype.emit=function(t,e,i,n,a){for(this._emitter.emitAt(t,e),null!==this._animEmitter&&this._animEmitter.emitAt(t,e);null!==i;){var s=i.animated?this._animEmitter:this._emitter;if(null===this._params&&i.paramsName,null!==this._params){var o=this._params[i.paramsName];void 0===o||(s.params=o)}s.explode(this._game.rnd.integerInRange(i.countMin,i.countMax),n,a),i=i.next}},t}();t.ParticleChain=e}(Particles||(Particles={}));var Particles;!function(t){var e=function(){function t(){this._emitters=[],this._emittersCount=0}return Object.defineProperty(t,"instance",{get:function(){return null===t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.add=function(t){this._emitters[this._emittersCount++]=t},t.prototype.remove=function(t){for(var e=this._emittersCount-1;e>=0&&this._emitters[e]!==t;e--);-1!==e&&(this._emitters[e]=this._emitters[--this._emittersCount])},t.prototype.update=function(){for(var t=0;t<this._emittersCount;t++){var e=this._emitters[t];e.exists&&e.update()}},t._instance=null,t}();t.ParticlesManager=e}(Particles||(Particles={}));!function(t){var e=function(){function t(){}return t.GRAVITY=4800,t.SPEED_X_MIN=200,t.SPEED_X_MAX=400,t.SPEED_Y_COEF=1.5,t.SPEED_UP_TIME=3,t.SPEED_DOWN_TIME=1,t.TIME_TO_HARDEST_PATTERN=60,t.COIN_COUNTER_MIN=8,t.COIN_COUNTER_MAX=8,t.SLOW_BONUS_COUNTER=5,t.COINS_PAUSE=1,t.SHOP_CHAR_DEFS=null,t.SHOP_CHAR_DEFS_GAMEE=[{id:0,name:"ninja",price:0},{id:1,name:"ninja_blue",price:29},{id:2,name:"ninja_yellow",price:99},{id:3,name:"ninja_babka",price:199},{id:4,name:"ninja_cernoch",price:399},{id:5,name:"ninja_businessman",price:699}],t}();t.Gameplay=e}(Ninja||(Ninja={}));!function(t){var e=function(){function t(t,e,i){void 0===i&&(i=null),this.name="<no name>",this.debug=0,this._newFunction=null,this._count=0,this._pool=[],this._canGrow=!0,this._poolSize=0,this._classType=t,this._newFunction=i;for(var n=0;n<e;n++){var a=this.newItem();this._pool[this._count++]=a}this._poolSize=e}return t.prototype.createItem=function(){return 0===this._count?(this.debug,this._canGrow?this.newItem():null):(this.debug,this._pool[--this._count])},t.prototype.destroyItem=function(t){this.debug,this._pool[this._count++]=t},Object.defineProperty(t.prototype,"newFunction",{set:function(t){this._newFunction=t},enumerable:!0,configurable:!0}),t.prototype.newItem=function(){return null!==this._newFunction?this._newFunction():new this._classType},Object.defineProperty(t.prototype,"canGrow",{set:function(t){this._canGrow=t},enumerable:!0,configurable:!0}),t.DEBUG_ALLOCATION=1,t.DEBUG_CREATE=2,t.DEBUG_DESTROY=4,t.DEBUG_ALL=7,t}();t.Pool=e}(Ninja||(Ninja={}));!function(t){var e=function(t){function e(e,i,n,a,s){var o=t.call(this,e,i,n,a)||this;return void 0!==s&&o.setAnchoredFrame(s),o}return __extends(e,t),e.prototype.setAnchoredFrame=function(t){if("string"==typeof this.key){var e=null;"string"==typeof t?(this.frameName=t,e=this.game.cache.getFrameByName(this.key,t)):(this.frame=t,e=this.game.cache.getFrameByIndex(this.key,t)),void 0!==e.anchorX&&void 0!==e.anchorY&&this.anchor.setTo(e.anchorX,e.anchorY)}},e}(Phaser.Sprite);t.AnchoredSprite=e}(Ninja||(Ninja={}));!function(t){var e=function(t){function e(e,i,n,a,s,o,r){void 0===r&&(r=1);var h=t.call(this,e,i)||this;h._scrollCoef=o;var l;l="number"==typeof a?e.cache.getFrameByIndex(n,a):e.cache.getFrameByName(n,a),h._frame=l;var u=e.add.sprite(0,0,n,a,h);return u.anchor.y=s,u.fixedToCamera=!0,h._sprite1Crop=new Phaser.Rectangle(0,0,0,l.height),u.crop(h._sprite1Crop,!1),h._sprite1=u,h._sprite1.scale.y=r,u=e.add.sprite(0,0,n,a,h),u.fixedToCamera=!0,u.anchor.y=s,h._sprite2Crop=new Phaser.Rectangle(0,0,0,l.height),u.crop(h._sprite2Crop,!1),h._sprite2=u,h._sprite2.scale.y=r,h}return __extends(e,t),e.prototype.updatePosition=function(t){(t*=this._scrollCoef)<0&&(t+=640);var e=this._frame.width,i=Math.floor(t)%e;this._sprite1Crop.x=i,this._sprite1Crop.width=Math.min(e-i,this.game.width),this._sprite1.updateCrop(),this._sprite2Crop.width=this.game.width-this._sprite1Crop.width,this._sprite2.cameraOffset.x=this._sprite1Crop.width,this._sprite2.updateCrop()},e}(Phaser.Group);t.BgLayer=e}(Ninja||(Ninja={}));!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(t,e,i){var n=this.game.camera.x-this.parent.x+640+this.game.rnd.integerInRange(100,640);this.position.set(n,this.game.rnd.integerInRange(e,e+i));var a=this.game.rnd.realInRange(.75,1.25);this.scale.set(a*this.game.rnd.sign(),a*this.game.rnd.sign()),this.frameName=t,this._speed=-Math.abs(this.width)*a/8,this.exists=!0,this.visible=!0},e.prototype.updateCloud=function(){this.position.x+=this._speed*this.game.time.physicsElapsed;var t=this.x-(this.game.camera.x-this.parent.x);(t<-(Math.abs(this.width)>>1)||t>2*this.game.width)&&this.kill()},e.SPEED_PX_IN_SEC=-5,e}(Phaser.Sprite);t.Cloud=e}(Ninja||(Ninja={}));!function(t){var e=function(e){function i(i,n,a,s,o,r,h){var l=e.call(this,i,n)||this;l._clouds=[],l._count=a,l._speedCoef=1-s,l._frames=o,l._topY=r,l._rangeY=h;for(var u=0;u<a;u++){var c=new t.Cloud(i,0,0,"Sprites");c.anchor.x=.5,c.kill(),l.add(c),l._clouds[u]=c}return l}return __extends(i,e),i.prototype.updatePosition=function(t){this.x=t*this._speedCoef;for(var e=0;e<this._count;e++){var i=this._clouds[e];i.exists?i.updateCloud():i.init(this._frames[this.game.rnd.integerInRange(0,this._frames.length-1)],this._topY,this._rangeY)}},i}(Phaser.Group);t.Clouds=e}(Ninja||(Ninja={}));!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._counter=0,e}return __extends(e,t),e.prototype.integerInRange=function(e,i){var n=t.prototype.integerInRange.call(this,e,i);return this._log.push(this._counter+++": integerInRange("+e+", "+i+") = "+n),n},e.prototype.sign=function(){var e=t.prototype.sign.call(this);return this._log.push(this._counter+++": sign() = "+e),e},e.prototype.state=function(e){this._log=[],this._counter=0;var i=t.prototype.state.call(this,e);return this._log.push(this._counter+++": state("+e+") = "+i),i},e.prototype.print=function(){for(var t=0;t<this._log.length;t++)Log.Log.msg(this._log[t],Log.Log.CYAN)},e}(Phaser.RandomDataGenerator);t.Rnd=e;var i=function(){function e(e){this._hlpPt=new t.HitInfo,this._patternsTop=[],this._patternsBottom=[],this._game=e,this._rnd=new Phaser.RandomDataGenerator([(Date.now()*Math.random()).toString()]),this._grid=[];for(var i=0;i<10;i++){for(var n=[],a=0;a<64;a++)n[a]=0;this._grid.push(n)}this._wallsPool=new t.Pool(Phaser.Sprite,32,function(){var t=new Phaser.Sprite(e,0,0,"Sprites");e.physics.enable(t,Phaser.Physics.ARCADE);var i=t.body;return i.allowGravity=!1,i.immovable=!0,i.moves=!1,i.setSize(64,64,0,0),t}),this._walls=new Phaser.Group(e),this._bonuses=new Phaser.Group(e);for(i=0;i<50;i++){var s=new Phaser.Sprite(e,0,0,"Sprites");s.anchor.set(.5,.5),s.animations.add("mince",["coin1","coin2","coin3","coin4","coin5","coin6","coin7","coin8","coin9"],10,!0),e.physics.enable(s,Phaser.Physics.ARCADE);var o=s.body;o.allowGravity=!1,o.immovable=!0,o.moves=!1,o.setSize(40,40,-4,0),s.exists=!1,this._bonuses.add(s)}this._patternInitial=new t.Pattern(e,t.Patterns.PATTERN_0,this._rnd,function(t){t.intParams[0]=5,t.intParams[1]=3},this);var r;r=new t.Pattern(e,t.Patterns.PATTERN_1,this._rnd,function(t){var e=t.height;t.intParams[0]=e>6?3:2,t.intParams[1]=e>6?3:2,t.intParams[2]=e>6?this._rnd.integerInRange(3,4):this._rnd.integerInRange(2,3),t.intParams[3]=e<=5?this._rnd.integerInRange(1,2):1},this),this._patternsTop.push(r),this._patternsBottom.push(r),r=new t.Pattern(e,t.Patterns.PATTERN_2a,this._rnd,function(t){t.intParams[0]=1,t.intParams[1]=2,t.intParams[2]=this._rnd.integerInRange(2,3)},this),this._patternsBottom.push(r),r=new t.Pattern(e,t.Patterns.PATTERN_2b,this._rnd,function(t){t.intParams[0]=1,t.intParams[1]=2,t.intParams[2]=this._rnd.integerInRange(2,3)},this),this._patternsTop.push(r),r=new t.Pattern(e,t.Patterns.PATTERN_3a,this._rnd,function(t){t.intParams[0]=1,t.intParams[1]=1,t.intParams[2]=this._rnd.integerInRange(2,3),t.intParams[3]=2*t.intParams[2],t.intParams[4]=this._rnd.integerInRange(1,3)},this),this._patternsTop.push(r),this._patternsBottom.push(r),r=new t.Pattern(e,t.Patterns.PATTERN_3b,this._rnd,function(t){t.intParams[0]=1,t.intParams[1]=1,t.intParams[2]=this._rnd.integerInRange(2,3),t.intParams[3]=2*t.intParams[2],t.intParams[4]=this._rnd.integerInRange(1,2)},this),this._patternsTop.push(r),this._patternsBottom.push(r),r=new t.Pattern(e,t.Patterns.PATTERN_4,this._rnd,function(t){t.intParams[0]=this._rnd.integerInRange(2,3),t.intParams[1]=this._rnd.integerInRange(2,3),t.intParams[2]=Math.ceil(t.intParams[1]/2),t.intParams[3]=t.intParams[1]-t.intParams[2],t.boolParams[2]=1===this._rnd.sign()},this),this._patternsTop.push(r),this._patternsBottom.push(r),r=new t.Pattern(e,t.Patterns.PATTERN_6,this._rnd,function(t){t.intParams[0]=1,t.intParams[1]=1,t.intParams[2]=3+t.height-8},this),this._patternsTop.push(r),this._patternsBottom.push(r),r=new t.Pattern(e,t.Patterns.PATTERN_7,this._rnd,function(t){t.height;t.intParams[0]=t.height>=8?4:3,t.intParams[1]=this._rnd.integerInRange(1,3),t.intParams[2]=t.height>=8?5:4,t.intParams[3]=t.height>=8?3:2},this),this._patternsTop.push(r),this._patternsBottom.push(r),r=new t.Pattern(e,t.Patterns.PATTERN_10,this._rnd,function(t){t.intParams[0]=this._rnd.integerInRange(2,3),t.intParams[1]=t.height>=8?4:3,t.intParams[2]=t.height>=8?3:2},this),this._patternsTop.push(r),this._patternsBottom.push(r),r=new t.Pattern(e,t.Patterns.PATTERN_8,this._rnd,function(t){t.intParams[0]=2,t.intParams[1]=2,t.intParams[2]=3},this),this._patternsTop.push(r),this._patternsBottom.push(r),r=new t.Pattern(e,t.Patterns.PATTERN_5,this._rnd,function(t){t.height;t.intParams[0]=t.height>=8?3:2,t.intParams[1]=this._rnd.integerInRange(1,3),t.intParams[2]=t.height>=8?3:2,t.intParams[3]=t.height>=8?3:2},this),this._patternsTop.push(r),this._patternsBottom.push(r),r=new t.Pattern(e,t.Patterns.PATTERN_9,this._rnd,function(t){t.height;t.intParams[0]=2,t.intParams[1]=2,t.intParams[2]=1,t.intParams[3]=this._rnd.integerInRange(2,3),t.boolParams[2]=1===this._rnd.sign()},this),this._patternsTop.push(r),this._patternsBottom.push(r)}return Object.defineProperty(e.prototype,"walls",{get:function(){return this._walls},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"bonuses",{get:function(){return this._bonuses},enumerable:!0,configurable:!0}),e.prototype.reseed=function(){return this._rnd.sow([(Date.now()*Math.random()).toString()]),this._rnd.state()},e.prototype.reset=function(e){null!==e&&this._rnd.state(e),this._cameraX=0;for(var i=0;i<this._grid.length;i++)for(var n=0;n<this._grid[i].length;n++)this._grid[i][n]=0;this.cleanTiles(0,!0),this._lastColumn=0;this._pattern=this._patternInitial,this._pattern.randomize(6,!1,!0),this._lastHeight=4,this._patternY=3,this._endsTop=!0,this._coinsPause=t.Gameplay.COINS_PAUSE,this._previousCoinsColumn=!1,this._prevCoinDropped=!1,this._coinSequence=!1,this._startTime=this._game.time.time},e.prototype.cleanTiles=function(t,e){void 0===e&&(e=!1);for(var i=this._walls.length-1;i>=0;i--){var n=this._walls.getChildAt(i);(n.x-t<=-64||e)&&(this._walls.remove(n),n.parent=null,this._wallsPool.destroyItem(n))}for(i=this._bonuses.length-1;i>=0;i--){var a=this._bonuses.getChildAt(i);(a.x-t<=-64||e)&&(a.exists=!1)}},e.prototype.updateGenerator=function(t){this._cameraX=t,this.cleanTiles(t);for(var e=Math.floor((t+640)/64)+2;this._lastColumn<e;){var i=this._lastColumn%64;for(this.clearGridColumn(i);!this._pattern.putIntoData(this._grid,i,this._patternY);)this.randomizePattern();this.drawColumn(i,this._lastColumn),++this._lastColumn}},e.prototype.randomizePattern=function(){this._prevEndsTop=this._endsTop;for(var t=this._pattern.exitTopY,e=this._pattern.exitBottomY,i=Phaser.Math.clamp(this._lastColumn/200,0,1);;){var n=1===this._rnd.sign(),a=n?this._patternsTop:this._patternsBottom,s=Math.max(5,Math.floor((a.length-1)*i)),o=a[this._rnd.integerInRange(0,s)],r=o.minPatternHeight,h=o.maxPatternHeight,l=this._lastHeight+Phaser.Math.sign(this._rnd.integerInRange(0,h-r)-(this._lastHeight-r))*this._rnd.integerInRange(1,2);l=Phaser.Math.clamp(l,r,h),o.excludeLevel=l,this._endsTop=1===this._rnd.sign(),(this._endsTop&&-1===o.exitTopY||!this._endsTop&&-1===o.exitBottomY)&&(this._endsTop=!this._endsTop),o.randomize(l,n,this._endsTop);var u=o.height,c=this._patternY+(this._prevEndsTop?t:e),p=0;c-=n?o.enterTopY:o.enterBottomY,n&&!this._prevEndsTop?(c-=3,p=-1):!n&&this._prevEndsTop?(c+=3,p=1):n&&this._prevEndsTop?p=-1:n||this._prevEndsTop||(p=1);for(var _=1;_>0&&(c<0||c+u>10);_--)c+=p;if(0!==_){this._pattern=o,this._patternY=c,this._lastHeight=u;break}}},e.prototype.drawColumn=function(e,i){--this._coinsPause;var n=!1,a=this._previousCoinsColumn;this._previousCoinsColumn=!1;for(var s=128===this._grid[0][e]?4:0,o=0;o<this._grid.length;o++){if(128===this._grid[o][e]?s|=2:s&=-3,(3840&this._grid[o][e])===t.MINCE&&(this._previousCoinsColumn=!0,this._coinsPause<=0&&!a&&(this._coinSequence||(this._coinSequence=!0)),this._coinSequence)){n=!0;var r=64*(255&this._grid[o][e])/2;this._grid[o][e]=0;var h=this._bonuses.getFirstExists(!1);null!==h&&(h.ghostPicked=!1,h.position.set(64*i+r+32,64*o+32),h.exists=!0,h.animations.play("mince"))}if(128===(o+1<this._grid.length?this._grid[o+1][e]:this._grid[o][e])?s|=1:s&=-2,2&s){var l=7&s,u=2===l?"kostka_oboji":6===l?"kostka_horni":3===l?"kostka_spodni":"kostka_stred";this.addTile(i,o,u)}s<<=1}this._coinSequence&&!n&&(this._coinSequence=!1,this._coinsPause=t.Gameplay.COINS_PAUSE)},e.prototype.addTile=function(t,e,i){var n=this._wallsPool.createItem();n.position.set(64*t,64*e),n.exists=!0,n.visible=!0,n.frameName=i,null===n.parent&&this._walls.add(n)},e.prototype.clearGridColumn=function(t){for(var e=0;e<10;e++)this._grid[e][t]=0},e.prototype.castRay=function(t,e,i,n,a,s){return this.doCastRay(t,e,i,n,a,s)},e.prototype.castYLimitedRay=function(t,e,i,n,a,s,o,r){return this.doCastRay(t,e,i,n,a,s,o,r)},e.prototype.castYLimitedRayWithCallback=function(t,e,i,n,a,s,o,r,h){return this.doCastRay(t,e,i,n,a,0,s,o,r,h)},e.prototype.doCastRay=function(t,i,n,a,s,o,r,h,l,u){void 0===r&&(r=0),void 0===h&&(h=9),void 0===l&&(l=null),void 0===u&&(u=null);var c=this._hlpPt;c.hitType=s,c.unit=o,c.fromX=t,c.fromY=i;var p=Math.floor(t/64),_=Math.floor(i/64),m=Phaser.Math.sign(n),d=Phaser.Math.sign(a),g=Math.abs(n),f=Math.abs(a),y=t/64-p;m>0&&(y=1-y);var P=i/64-_;d>0&&(P=1-P);for(var v=y*f-P*g;;)if(v<0){if((A=(p+=m)>=0&&_>r&&_<h)&&null!==l&&l.call(u,p,_),(A&&(this._grid[_][p%64]&e.WALL)>0||!A)&&(!A||0===s||2===s)){if(1===o){var E=i+a*((S=64*(m<0?p+1:p))-t)/n;c.destX=S,c.destY=E;break}c.destX=p,c.destY=_;break}v+=f}else{_+=d;var A;if((A=p>=0&&_>r&&_<h)&&null!==l&&l.call(u,p,_),(A&&(this._grid[_][p%64]&e.WALL)>0||!A)&&(!A||0===s||1===s)){if(1===o){var S=t+n*((E=64*(d<0?_+1:_))-i)/a;c.destX=S,c.destY=E;break}c.destX=p,c.destY=_;break}v-=g}return c},e.WALL=128,e}();t.Generator=i}(Ninja||(Ninja={}));!function(t){var e=function(){return function(){}}();t.HitInfo=e}(Ninja||(Ninja={}));!function(t){var e=function(){function e(t,i,n,a,s){void 0===a&&(a=null),void 0===s&&(s=null),this._intParams=[],this._boolParams=[],this._cmdStack=[],this._fillUp=!0,this._fillDown=!0,this._fillTmp=[],this._game=t,this._rnd=n,this._pattern=i,this._randomizeFce=a,this._context=s;for(var o=0;o<e.MAX_INT_PARAMS;o++)this._intParams[o]=0;for(o=0;o<e.MAX_BOOL_PARAMS;o++)this._boolParams[o]=!1}return Object.defineProperty(e.prototype,"height",{get:function(){for(var t=this._pattern,e=0,i=0;i<t.rowHeader.length;i++)t.rowHeader[i]<this._excludeLevel&&++e;return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enterTop",{get:function(){return this._boolParams[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exitTop",{get:function(){return this._boolParams[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"intParams",{get:function(){return this._intParams},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boolParams",{get:function(){return this._boolParams},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minPatternHeight",{get:function(){return this._pattern.minHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxPatternHeight",{get:function(){return this._pattern.maxHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enterTopY",{get:function(){return this.getFirstBlock(!0,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._pattern.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enterBottomY",{get:function(){var t=this.getFirstBlock(!1,!1);return-1===t?-1:this.height-t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exitTopY",{get:function(){return this.getFirstBlock(!0,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exitBottomY",{get:function(){var t=this.getFirstBlock(!1,!0);return-1===t?-1:this.height-t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"excludeLevel",{set:function(t){this._excludeLevel=t},enumerable:!0,configurable:!0}),e.prototype.getFirstBlock=function(t,e){for(var i=this._pattern,n=t?1:-1,a=t?160:144,s=t?0:i.rowHeader.length-1,o=t?0:1,r=e?i.columnHeader.length-1:0,h=-1;s<i.rowHeader.length&&s>=0;s+=n)i.rowHeader[s]>=this._excludeLevel||((240&i.pattern[s][r])===a&&(h=o),++o);return h},e.prototype.randomize=function(t,i,n){if(this._excludeLevel=t,this._boolParams[0]=i,this._boolParams[1]=n,null!==this._randomizeFce)this._randomizeFce.call(this._context,this);else{for(var a=2;a<e.MAX_BOOL_PARAMS;a++)this._boolParams[a]=1===this._rnd.sign();for(a=0;a<e.MAX_INT_PARAMS;a++)this._intParams[a]=this._rnd.integerInRange(0,5)}this._x=0,this._cmdIndex=0,this._cmdStackTop=0,this._fillUp=!0,this._fillDown=!0,this._firstColumnInRepeat=!1,this._repeatLength=-1},e.prototype.patternColumnEmpty=function(t){for(var e=this._pattern,i=0;i<e.rowHeader.length;i++)if(!(e.rowHeader[i]>=this._excludeLevel)){var n=e.pattern[i][t];if(this.showBlock(n))return!1}return!0},e.prototype.showBlock=function(t){if(0==(128&t))return!1;var i=112&t,n=15&t;return!(i===e.BLOCK_OFF&&this._boolParams[n]||i===e.BLOCK_ON&&!this._boolParams[n])},e.prototype.putIntoData=function(i,n,a){for(var s=this._pattern,o=s.commands,r=this._cmdStack;this._cmdIndex<o.length;){var h=o[this._cmdIndex++];if(h===t.REP_START){var l=this._intParams[o[this._cmdIndex++]];r[this._cmdStackTop++]=l,r[this._cmdStackTop++]=this._cmdIndex,r[this._cmdStackTop++]=this._x,this._firstColumnInRepeat=!0,this._repeatLength=l}if(h===t.REP_END){var u=r[--this._cmdStackTop],c=r[--this._cmdStackTop];(l=r[--this._cmdStackTop]-1)>0&&(this._x=u,this._cmdIndex=c,r[this._cmdStackTop++]=l,r[this._cmdStackTop++]=c,r[this._cmdStackTop++]=u),this._repeatLength=-1}if(h===t.COLUMN){var p=this._x++,_=s.columnHeader[p];if(!((240&_)===e.HEADER_EXCLUDE&&(15&_)>=this._excludeLevel)&&!(0===p&&this.patternColumnEmpty(0)||p===s.columnHeader.length-1&&this.patternColumnEmpty(p)))return this.putColumnIntoData(i,n,a,p),this._firstColumnInRepeat=!1,this._repeatLength=-1,!0;this._firstColumnInRepeat=!1,this._repeatLength=-1}}return!1},e.prototype.putColumnIntoData=function(i,n,a,s){for(var o=this._pattern,r=0,h=0;h<o.rowHeader.length;h++)if(!(o.rowHeader[h]>=this._excludeLevel)){var l=o.pattern[h][s];if(l===t.MINCE&&(this._firstColumnInRepeat&&this._repeatLength>0||!this._firstColumnInRepeat&&-1===this._repeatLength)&&(i[a][n]=t.MINCE+(this._repeatLength<=0?0:this._repeatLength-this._cmdStack[this._cmdStackTop-3])),this.showBlock(l)){i[a][n]=128;var u=3840&l;u>0&&(this._fillTmp[r++]=u+a)}a++}for(h=0;h<r;h++){var c=this._fillTmp[h];if(this._fillUp&&(3840&c)===e.FILL_UP)for(var p=(255&c)-1;p>=0&&0===i[p][n];)i[p][n]=128,--p;if(this._fillDown&&(3840&c)==e.FILL_DOWN)for(p=1+(255&c);p<=9&&0===i[p][n];)i[p][n]=128,++p}},e.HEADER_EXCLUDE=16,e.HEADER_REPEAT=32,e.HEADER_REPEAT_START=48,e.HEADER_REPEAT_END=64,e.BLOCK_OFF=16,e.BLOCK_ON=32,e.FILL_UP=256,e.FILL_DOWN=512,e.MAX_INT_PARAMS=5,e.MAX_BOOL_PARAMS=5,e}();t.Pattern=e}(Ninja||(Ninja={}));!function(t){t.MINCE=2048,t.COLUMN=1,t.REP_START=2,t.REP_END=3;var e=function(){function e(){}return e.PATTERN_0={name:"pattern 0: starting block",minHeight:4,maxHeight:10,rowHeader:[0,2,3,4,5,6,7,8,9,1],columnHeader:[25,0,0],pattern:[[0,0,417],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,640,657]],commands:[t.COLUMN,t.REP_START,0,t.COLUMN,t.REP_END,t.REP_START,1,t.COLUMN,t.REP_END]},e.PATTERN_1={name:"pattern 1: nahore a dole",minHeight:4,maxHeight:8,rowHeader:[0,8,6,4,2,3,5,7,9,1],columnHeader:[0,0,0,0],pattern:[[416,0,384,417],[0,0,0,0],[0,0,0,0],[0,t.MINCE,t.MINCE,0],[0,t.MINCE,t.MINCE,0],[0,t.MINCE,t.MINCE,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[656,640,0,657]],commands:[t.REP_START,0,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,1,t.COLUMN,t.REP_END]},e.PATTERN_2a={name:"pattern 2a: schody dolu",minHeight:6,maxHeight:8,rowHeader:[0,1,9,8,7,6,5,4,3,2],columnHeader:[26,25,24,23,22,0,0,0,0,0],pattern:[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[656,640,t.MINCE,0,0,0,0,0,0,0],[656,0,640,t.MINCE,0,0,0,0,0,0],[656,0,0,640,t.MINCE,0,0,0,0,0],[656,0,0,0,640,t.MINCE,0,0,0,0],[656,0,0,0,0,640,t.MINCE,0,0,417],[0,0,0,0,0,0,640,t.MINCE,0,0],[0,0,0,0,0,0,0,640,t.MINCE,0],[0,0,0,0,0,0,0,0,640,657]],commands:[t.REP_START,0,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,1,t.COLUMN,t.REP_END]},e.PATTERN_2b={name:"pattern 2b: schody nahoru",minHeight:6,maxHeight:8,rowHeader:[2,3,4,5,6,7,8,9,1,0],columnHeader:[26,25,24,23,22,0,0,0,0,0],pattern:[[0,0,0,0,0,0,0,0,384,417],[0,0,0,0,0,0,0,384,t.MINCE,0],[0,0,0,0,0,0,384,t.MINCE,0,0],[416,0,0,0,0,384,t.MINCE,0,0,657],[416,0,0,0,384,t.MINCE,0,0,0,0],[416,0,0,384,t.MINCE,0,0,0,0,0],[416,0,384,t.MINCE,0,0,0,0,0,0],[416,384,t.MINCE,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],commands:[t.REP_START,0,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,1,t.COLUMN,t.REP_END]},e.PATTERN_3a={name:"pattern 3a: vlnka nahoru",minHeight:6,maxHeight:8,rowHeader:[0,1,2,6,7,8,9,3,4,5],columnHeader:[26,0,0,0,0,0,26],pattern:[[0,0,0,384,0,0,0],[0,0,384,t.MINCE,384,0,0],[416,384,0,t.MINCE,0,384,417],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,640,0,0,0],[0,0,640,0,640,0,0],[656,640,0,0,0,640,657]],commands:[t.REP_START,0,t.COLUMN,t.REP_END,t.REP_START,4,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,3,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_END,t.REP_START,1,t.COLUMN,t.REP_END]},e.PATTERN_3b={name:"pattern 3b: vlnka dolu",minHeight:6,maxHeight:8,rowHeader:[0,1,2,6,7,8,9,3,4,5],columnHeader:[26,0,0,0,0,0,26],pattern:[[416,384,0,0,0,384,417],[0,0,384,0,384,0,0],[0,0,0,384,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[656,640,0,t.MINCE,0,640,657],[0,0,640,t.MINCE,640,0,0],[0,0,0,640,0,0,0]],commands:[t.REP_START,0,t.COLUMN,t.REP_END,t.REP_START,4,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,3,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_END,t.REP_START,1,t.COLUMN,t.REP_END]},e.PATTERN_4={name:"pattern 4: chodba",minHeight:4,maxHeight:6,rowHeader:[0,1,4,5,6,7,8,9,2,3],columnHeader:[26,0,0,0,0,0,0],pattern:[[416,384,384,384,384,384,417],[0,0,162,t.MINCE,146,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,146,t.MINCE,162,0,0],[656,640,640,640,640,640,657]],commands:[t.COLUMN,t.REP_START,0,t.REP_START,2,t.COLUMN,t.REP_END,t.COLUMN,t.REP_START,1,t.COLUMN,t.REP_END,t.COLUMN,t.REP_START,3,t.COLUMN,t.REP_END,t.REP_END,t.REP_START,1,t.COLUMN,t.REP_END]},e.PATTERN_5={name:"pattern 5: doura",minHeight:6,maxHeight:10,rowHeader:[0,0,8,9,0,0,9,8,0,0],columnHeader:[26,0,0,0,0,0,0],pattern:[[416,384,384,384,384,384,417],[0,0,t.MINCE,0,128,0,0],[0,0,128,0,128,0,0],[0,0,128,0,128,0,0],[0,0,128,0,t.MINCE,0,0],[0,0,128,0,t.MINCE,0,0],[0,0,128,0,128,0,0],[0,0,128,0,128,0,0],[0,0,t.MINCE,0,128,0,0],[656,640,640,640,640,640,657]],commands:[t.REP_START,0,t.COLUMN,t.REP_END,t.REP_START,1,t.REP_START,2,t.COLUMN,t.REP_END,t.COLUMN,t.REP_START,3,t.COLUMN,t.REP_END,t.COLUMN,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_END,t.REP_START,0,t.COLUMN,t.REP_END]},e.PATTERN_6={name:"pattern 6: lezaty X",minHeight:8,maxHeight:10,rowHeader:[0,1,2,6,7,8,9,3,4,5],columnHeader:[26,0,0,0,0,0,26],pattern:[[416,384,0,0,0,384,417],[0,0,384,0,384,0,0],[0,0,0,384,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,640,0,0,0],[0,0,640,0,640,0,0],[656,640,0,0,0,640,657]],commands:[t.REP_START,0,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,1,t.COLUMN,t.REP_END]},e.PATTERN_7={name:"pattern 7: elka",minHeight:7,maxHeight:10,rowHeader:[0,0,0,9,0,7,9,0,0,0],columnHeader:[0,0,0,0,0,0,0],pattern:[[416,384,384,384,384,384,417],[0,128,128,128,128,0,0],[0,0,128,t.MINCE,t.MINCE,0,0],[0,0,128,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,128,0,0],[0,0,t.MINCE,t.MINCE,128,0,0],[0,0,128,128,128,128,0],[656,640,640,640,640,640,657]],commands:[t.REP_START,0,t.COLUMN,t.REP_END,t.REP_START,1,t.REP_START,2,t.COLUMN,t.REP_END,t.COLUMN,t.REP_START,3,t.COLUMN,t.REP_END,t.COLUMN,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_END,t.REP_START,0,t.COLUMN,t.REP_END]},e.PATTERN_8={name:"pattern 8: diamant",minHeight:8,maxHeight:10,rowHeader:[0,1,2,3,8,8,4,5,6,7],columnHeader:[0,24,0,0,0,24,0],pattern:[[0,0,0,384,0,0,0],[0,0,384,t.MINCE,384,0,0],[416,384,0,t.MINCE,0,384,417],[0,0,0,128,0,0,0],[0,0,128,128,128,0,0],[0,0,128,128,128,0,0],[0,0,0,128,0,0,0],[656,640,0,t.MINCE,0,640,657],[0,0,640,t.MINCE,640,0,0],[0,0,0,640,0,0,0]],commands:[t.REP_START,0,t.COLUMN,t.REP_END,t.COLUMN,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.COLUMN,t.REP_START,1,t.COLUMN,t.REP_END]},e.PATTERN_9={name:"pattern 9: chaos",minHeight:5,maxHeight:8,rowHeader:[7,5,0,0,0,0,0,5,9,9],columnHeader:[0,0,0,0,0,0,0,0,0,0,0],pattern:[[416,0,0,0,128,128,128,0,0,0,417],[416,128,128,0,0,0,0,0,128,128,417],[416,128,128,0,128,128,128,0,128,128,417],[0,0,t.MINCE,t.MINCE,0,0,162,0,0,0,0],[0,128,128,128,128,0,128,128,128,128,0],[0,0,t.MINCE,t.MINCE,0,0,146,0,0,0,0],[656,128,128,0,128,128,128,0,128,128,657],[656,128,128,0,0,0,0,0,128,128,657],[656,0,0,0,128,128,128,0,0,0,657],[656,0,0,0,128,128,128,0,0,0,657]],commands:[t.REP_START,0,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.COLUMN,t.COLUMN,t.COLUMN,t.REP_START,3,t.COLUMN,t.REP_END,t.COLUMN,t.COLUMN,t.COLUMN,t.COLUMN,t.REP_END,t.REP_START,1,t.COLUMN,t.REP_END]},e.PATTERN_10={name:"pattern 10: bloky",minHeight:6,maxHeight:10,rowHeader:[0,1,2,6,8,9,7,3,4,5],columnHeader:[0,0,0,0,0,26,0],pattern:[[416,384,384,384,384,384,417],[0,0,160,0,144,0,0],[0,0,160,0,144,0,0],[0,t.MINCE,128,t.MINCE,128,0,0],[0,t.MINCE,128,t.MINCE,128,0,0],[0,t.MINCE,128,t.MINCE,128,0,0],[0,t.MINCE,128,t.MINCE,128,0,0],[0,0,144,0,160,0,0],[0,0,144,0,160,0,0],[656,640,640,640,640,640,657]],commands:[t.REP_START,1,t.COLUMN,t.REP_END,t.REP_START,0,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_END,t.REP_START,1,t.COLUMN,t.REP_END]},e}();t.Patterns=e}(Ninja||(Ninja={}));!function(t){var e=function(){return function(){this.position=new Phaser.Point(0,0),this.tiles=[],this.nextPosition=new Phaser.Point(0,0)}}();t.Piece=e}(Ninja||(Ninja={}));!function(t){var e=function(e){function i(n){var a=e.call(this,n,0,0,"Sprites","skeleton-jump_5")||this;a.onOutOfScreen=new Phaser.Signal,a._animPrefix=null,a.anchor.set(0,.5),n.physics.arcade.enable(a,!1);var s=a.body;s.setSize(31,53,7,5);a._rect=new Phaser.Rectangle(7,-21.5,31,53),s.allowGravity=!0;for(var o=0;o<t.Gameplay.SHOP_CHAR_DEFS.length;o++){var r=t.Gameplay.SHOP_CHAR_DEFS[o].name,h=r+"-";a.animations.add(h+"run",i.CHAR_ANIMS[r].runAnim,16,!0),a.animations.add(h+"jump",i.CHAR_ANIMS[r].jumpAnim,20,!1),a.animations.add(h+"fall",i.CHAR_ANIMS[r].fallAnim,1,!1)}return a}return __extends(i,e),Object.defineProperty(i.prototype,"allowGravity",{set:function(t){this.body.allowGravity=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rect",{get:function(){return this._rect},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onFloor",{get:function(){return this._onFloor},set:function(t){this._onFloor=t},enumerable:!0,configurable:!0}),i.prototype.setAnim=function(t){this.animations.play(this._animPrefix+t)},i.prototype.setSkin=function(t){this._animPrefix=t+"-"},i.prototype.stopAnim=function(){this.animations.stop()},i.prototype.resetPlayer=function(){var e=this.body;this.position.set(-50,this.game.height/2-100+this.game.camera.view.y),this.scale.y=1,e.reset(-50,this.game.height/2-100),e.setSize(31,53,7,5),e.gravity.y=t.Gameplay.GRAVITY,e.allowGravity=!0,this._onFloor=!0,this.standing=!1,this.inAir=!1,this.dead=!1},i.prototype.postUpdate=function(){e.prototype.postUpdate.call(this);var t=this.body;this.exists&&!this.dead&&(this.y<-40||this.y>this.game.height+40)&&(t.velocity.set(0,0),t.allowGravity=!1,this.onOutOfScreen.dispatch())},i.CHAR_ANIMS={ninja:{runAnim:["skeleton-run_0","skeleton-run_1","skeleton-run_2","skeleton-run_3","skeleton-run_4","skeleton-run_5"],jumpAnim:["skeleton-jump_0","skeleton-jump_1","skeleton-jump_2","skeleton-jump_3","skeleton-jump_4","skeleton-jump_5"],fallAnim:["skeleton-jump_5"]},ninja_babka:{runAnim:["skeleton-babka-run_0","skeleton-babka-run_1","skeleton-babka-run_2","skeleton-babka-run_3","skeleton-babka-run_4","skeleton-babka-run_5"],jumpAnim:["skeleton-babka-jump_0","skeleton-babka-jump_1","skeleton-babka-jump_2","skeleton-babka-jump_3","skeleton-babka-jump_4","skeleton-babka-jump_5"],fallAnim:["skeleton-babka-jump_5"]},ninja_blue:{runAnim:["skeleton-modry-run_0","skeleton-modry-run_1","skeleton-modry-run_2","skeleton-modry-run_3","skeleton-modry-run_4","skeleton-modry-run_5"],jumpAnim:["skeleton-modry-jump_0","skeleton-modry-jump_1","skeleton-modry-jump_2","skeleton-modry-jump_3","skeleton-modry-jump_4","skeleton-modry-jump_5"],fallAnim:["skeleton-modry-jump_5"]},ninja_cernoch:{runAnim:["skeleton-cernoch-run_0","skeleton-cernoch-run_1","skeleton-cernoch-run_2","skeleton-cernoch-run_3","skeleton-cernoch-run_4","skeleton-cernoch-run_5"],jumpAnim:["skeleton-cernoch-jump_0","skeleton-cernoch-jump_1","skeleton-cernoch-jump_2","skeleton-cernoch-jump_3","skeleton-cernoch-jump_4","skeleton-cernoch-jump_5"],fallAnim:["skeleton-cernoch-jump_5"]},ninja_green:{runAnim:["skeleton-zeleny-run_0","skeleton-zeleny-run_1","skeleton-zeleny-run_2","skeleton-zeleny-run_3","skeleton-zeleny-run_4","skeleton-zeleny-run_5"],jumpAnim:["skeleton-zeleny-jump_0","skeleton-zeleny-jump_1","skeleton-zeleny-jump_2","skeleton-zeleny-jump_3","skeleton-zeleny-jump_4","skeleton-zeleny-jump_5"],fallAnim:["skeleton-zeleny-jump_5"]},ninja_chuck:{runAnim:["skeleton-chuck-run_0","skeleton-chuck-run_1","skeleton-chuck-run_2","skeleton-chuck-run_3","skeleton-chuck-run_4","skeleton-chuck-run_5"],jumpAnim:["skeleton-chuck-jump_0","skeleton-chuck-jump_1","skeleton-chuck-jump_2","skeleton-chuck-jump_3","skeleton-chuck-jump_4","skeleton-chuck-jump_5"],fallAnim:["skeleton-chuck-jump_5"]},ninja_white:{runAnim:["skeleton-bily-run_0","skeleton-bily-run_1","skeleton-bily-run_2","skeleton-bily-run_3","skeleton-bily-run_4","skeleton-bily-run_5"],jumpAnim:["skeleton-bily-jump_0","skeleton-bily-jump_1","skeleton-bily-jump_2","skeleton-bily-jump_3","skeleton-bily-jump_4","skeleton-bily-jump_5"],fallAnim:["skeleton-bily-jump_5"]},ninja_yellow:{runAnim:["skeleton-zluty-run_0","skeleton-zluty-run_1","skeleton-zluty-run_2","skeleton-zluty-run_3","skeleton-zluty-run_4","skeleton-zluty-run_5"],jumpAnim:["skeleton-zluty-jump_0","skeleton-zluty-jump_1","skeleton-zluty-jump_2","skeleton-zluty-jump_3","skeleton-zluty-jump_4","skeleton-zluty-jump_5"],fallAnim:["skeleton-zluty-jump_5"]},ninja_bruce:{runAnim:["skeleton-bruce-run_0","skeleton-bruce-run_1","skeleton-bruce-run_2","skeleton-bruce-run_3","skeleton-bruce-run_4","skeleton-bruce-run_5"],jumpAnim:["skeleton-bruce-jump_0","skeleton-bruce-jump_1","skeleton-bruce-jump_2","skeleton-bruce-jump_3","skeleton-bruce-jump_4","skeleton-bruce-jump_5"],fallAnim:["skeleton-bruce-jump_5"]},ninja_kosmo:{runAnim:["skeleton-kosmo-run_0","skeleton-kosmo-run_1","skeleton-kosmo-run_2","skeleton-kosmo-run_3","skeleton-kosmo-run_4","skeleton-kosmo-run_5"],jumpAnim:["skeleton-kosmo-jump_0","skeleton-kosmo-jump_1","skeleton-kosmo-jump_2","skeleton-kosmo-jump_3","skeleton-kosmo-jump_4","skeleton-kosmo-jump_5"],fallAnim:["skeleton-kosmo-jump_5"]},ninja_businessman:{runAnim:["skeleton-bussi-run_0","skeleton-bussi-run_1","skeleton-bussi-run_2","skeleton-bussi-run_3","skeleton-bussi-run_4","skeleton-bussi-run_5"],jumpAnim:["skeleton-bussi-jump_0","skeleton-bussi-jump_1","skeleton-bussi-jump_2","skeleton-bussi-jump_3","skeleton-bussi-jump_4","skeleton-bussi-jump_5"],fallAnim:["skeleton-bussi-jump_5"]}},i}(Phaser.Sprite);t.Player=e}(Ninja||(Ninja={}));!function(t){var e=function(t){function e(e){var i=t.call(this,e,0,0,"Sprites","Dark")||this;return i.fixedToCamera=!0,i.visible=!1,i}return __extends(e,t),e.prototype.show=function(t){void 0===t&&(t=.5),this.visible=!0,this.width=this.game.width,this.height=this.game.height,this.alpha=t},e.prototype.hide=function(){this.visible=!1},e.prototype.fade=function(t,e,i,n,a){this.show(),this.alpha=t;var s=this.game.add.tween(this).to({alpha:e},i,Phaser.Easing.Linear.None,!0);null!==n&&s.onComplete.add(n,a)},e}(Phaser.Sprite);t.Dark=e}(Ninja||(Ninja={}));!function(t){var e=function(t){function e(i,n,a,s,o,r,h){void 0===r&&(r=0),void 0===h&&(h=0);var l=t.call(this,i,n)||this;return l._valNum=0,l._icon=i.add.sprite(0,0,"Sprites",a,l),l._icon.anchor.y=.5,l._value=new Phaser.BitmapText(i,l._icon.width+e.SPACE,o*r,"Font","0",o,"left"),l._value.anchor.y=.5,l.add(l._value),l.value=h,l}return __extends(e,t),Object.defineProperty(e.prototype,"icon",{get:function(){return this._icon},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._valNum},set:function(t){t!==this._valNum&&(this._valNum=t,this._value.text=""+t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalWidth",{get:function(){return this._icon.width+e.SPACE+this._value.textWidth},enumerable:!0,configurable:!0}),e.SPACE=10,e}(Phaser.Group);t.IconWithText=e}(Ninja||(Ninja={}));!function(t){var e=function(){return function(){this.id=0,this.name=null,this.price=0}}();t.ShopChar=e}(Ninja||(Ninja={}));!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.onShopClosed=new Phaser.Signal,n._shopGroup=null,n._imageGroup=null,n._image=null,n._price=null,n._leftArrow=null,n._rightArrow=null,n._tapToPlay=null,n._index=0,n._owned=!1,n._change=!1,n._acceptInput=!1,n._lockShop=!1,n._pointerDown=!1,n._dragged=!1,n._dragStart=new Phaser.Point,n._dragEnd=new Phaser.Point,n._dragHlpPt=new Phaser.Point,n._iconDown=!1,n.fixedToCamera=!0,n.cameraOffset.set(i.width/2,i.height/2),n._shopGroup=new Phaser.Group(i,n),n._imageGroup=new Phaser.Group(i,n._shopGroup),n._image=i.add.sprite(0,0,"Sprites",0,n._imageGroup),n._image.anchor.set(.5),n._image.hitArea=new Phaser.Rectangle(-n.game.width/2,-n.game.height/2,n.game.width,n.game.height),n._image.inputEnabled=!0,n._image.events.onInputDown.add(function(){this._iconDown=!0},n),n._image.events.onInputUp.add(function(t,e,i){this._iconDown&&(this._iconDown=!1,i&&this.onBuyUseButton())},n),n._price=new t.IconWithText(i,n._shopGroup,"gameeCoin",40,40,.17,12345),n._imageGroup.add(n._price),n._leftArrow=new t.SimpleButton(i,"shopLeftArrow"),n._leftArrow.scaleOnDown.set(1),n._leftArrow.x=-250,n._leftArrow.onClick.add(n.onLeftArrow,n),n._shopGroup.add(n._leftArrow),n._rightArrow=new t.SimpleButton(i,"shopRightArrow"),n._rightArrow.scaleOnDown.set(1),n._rightArrow.x=250,n._rightArrow.onClick.add(n.onRightArrow,n),n._shopGroup.add(n._rightArrow),n._tapToPlay=new Phaser.BitmapText(n.game,0,310,"Font","Tap to Play",34,"center"),n._tapToPlay.anchor.set(.5),n._shopGroup.add(n._tapToPlay),n.exists=!1,n}return __extends(i,e),Object.defineProperty(i.prototype,"change",{get:function(){return this._change},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"acceptInput",{get:function(){return this._acceptInput},set:function(t){this._acceptInput=t},enumerable:!0,configurable:!0}),i.prototype.onLeftArrow=function(){this._lockShop||(this._index=Math.max(0,this._index-1),this.setShop())},i.prototype.onRightArrow=function(){this._lockShop||(this._index=Math.min(t.Gameplay.SHOP_CHAR_DEFS.length-1,this._index+1),this.setShop())},i.prototype.show=function(t,e){this._pointerDown=!1,this._dragged=!1,this._change=!1,this.exists=this.visible=!0,this._acceptInput=!0,this._index=this.getShopCharIdx(),this.setShop(),this.game.input.onDown.add(this.dragStart,this),this.game.input.onUp.add(this.dragEnd,this),this.game.input.addMoveCallback(this.dragMove,this)},i.prototype.hide=function(){this.exists=this.visible=!1,this._acceptInput=!1,this._dragged=!1,this.game.input.onDown.remove(this.dragStart,this),this.game.input.onUp.remove(this.dragEnd,this),this.game.input.deleteMoveCallback(this.dragMove,this)},i.prototype.dragStart=function(t){Math.abs(t.y-this.game.height/2)>this.game.height/2||(this._dragStart.copyFrom(t.position),this._pointerDown=!0)},i.prototype.dragMove=function(e,i,n,a){if(this._pointerDown){this._dragEnd.set(i,n);var s=Phaser.Point.subtract(this._dragEnd,this._dragStart,this._dragHlpPt).getMagnitude();if(s>10&&(this._dragged=!0,this._iconDown=!1),s>50){this._dragged=!1,this._pointerDown=!1;var o=this._dragEnd.x-this._dragStart.x,r=this._dragEnd.y-this._dragStart.y;if(Math.abs(o)<Math.abs(r))return;o>0?(this._index>0&&Utils.AudioUtils.playSound("jump"),this.onLeftArrow()):(this._index<t.Gameplay.SHOP_CHAR_DEFS.length-1&&Utils.AudioUtils.playSound("jump"),this.onRightArrow())}}},i.prototype.dragEnd=function(t){this._pointerDown=!1},i.prototype.setShop=function(){null!=App.Global.saveData&&null!=App.Global.saveData.skins||(App.Global.saveData=new t.SaveData);var e=t.Gameplay.SHOP_CHAR_DEFS[this._index];this._owned=App.Global.saveData.skins.indexOf(e.name)>=0,this._image.frameName=e.name;this._owned?(this._image.tint=16777215,this._price.visible=!1,this._tapToPlay.text="Tap to Play"):(this._image.tint=0,this._price.visible=!0,this._price.value=e.price,this._price.x=-this._price.totalWidth/2,this._tapToPlay.text="Tap to Buy"),this.showArrows()},i.prototype.showArrows=function(){this._leftArrow.visible=this._index>0,this._rightArrow.visible=this._index<t.Gameplay.SHOP_CHAR_DEFS.length-1},i.prototype.getShopCharIdx=function(){for(var e=App.Global.saveData.selected,i=0,n=0;n<t.Gameplay.SHOP_CHAR_DEFS.length;n++)if(t.Gameplay.SHOP_CHAR_DEFS[n].name===e){i=n;break}return i},i.prototype.onBuyUseButton=function(){if(!this._lockShop)if(this._owned){var e=t.Gameplay.SHOP_CHAR_DEFS[this._index].name;App.Global.saveData.selected!==e&&(App.Global.saveData.selected=e,this._change=!0,this.setShop()),Utils.AudioUtils.playSound("jump"),this.onShopClosed.dispatch(this._change)}else{var i=t.Gameplay.SHOP_CHAR_DEFS[this._index];if(App.Global.saveData.coins>=i.price||App.Global.GAMEE)if(App.Global.GAMEE){this._lockShop=!0;var n=this;window.gamee.purchaseItem({itemName:i.displayName,coinsCost:i.price,itemImage:i.base64Image},function(t,e){e.purchaseStatus&&(App.Global.saveData.coins=e.coinsLeft,App.Global.saveData.skins.push(i.name),n.updateCoins(),n.setShop(),Utils.AudioUtils.playSound("bonus"),window.gamee.gameSave(JSON.stringify(App.Global.saveData),!1)),n._lockShop=!1})}else App.Global.saveData.coins-=i.price,App.Global.saveData.skins.push(i.name),this.updateCoins(),this.setShop(),Utils.AudioUtils.playSound("bonus")}},i.prototype.updateCoins=function(){},i.prototype.update=function(){if(this.visible&&null!=this._image&&t.Gameplay.SHOP_CHAR_DEFS[this._index].name===App.Global.saveData.selected){var e=.01*Math.sin(this.game.time.time%500/500*2*Math.PI)+1;this._image.scale.set(e)}},i}(Phaser.Group);t.ShopScreenGamee=e}(Ninja||(Ninja={}));!function(t){var e=function(t){function e(e,i,n,a,s,o,r){var h=t.call(this,e)||this;h.onClick=new Phaser.Signal,h.onDown=new Phaser.Signal,h.scaleOnOver=new Phaser.Point(1,1),h.scaleOnDown=new Phaser.Point(1,1),h.offsetOnOver=new Phaser.Point(0,0),h.offsetOnDown=new Phaser.Point(0,0),h._tinted=!1,h._downTint=8421504,h._overTint=16777215,h._savePosition=new Phaser.Point,h._saveScale=new Phaser.Point,h._over=!1,h._down=!1;var l=new Phaser.Button(e,0,0,n);return h.add(l),h._button=l,void 0!==s&&s&&(h._tinted=!0),void 0===o&&(!h._tinted&&e.cache.getFrameByName(n,o)||(o=null)),void 0===r&&(!h._tinted&&e.cache.getFrameByName(n,r)||(r=null)),l.setFrames(r,a,o,a),l.anchor.setTo(.5,.5),l.name=i,l.onInputOver.add(h.overEvent,h),l.onInputOut.add(h.outEvent,h),l.onInputDown.add(h.downEvent,h),l.onInputUp.add(h.upEvent,h),h}return __extends(e,t),Object.defineProperty(e.prototype,"button",{get:function(){return this._button},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._button.anchor},enumerable:!0,configurable:!0}),e.prototype.setHitArea=function(t){this._button.hitArea=t},e.prototype.setTint=function(t,e){void 0===e&&(e=16777215),this._downTint=t,this._overTint=e},e.prototype.overEvent=function(){this.setButton(!0,this._down),this.overAction()},e.prototype.outEvent=function(){this.setButton(!1,!1),this.outAction()},e.prototype.downEvent=function(){this.setButton(this._over,!0),this.downAction(),this.onDown.dispatch(this)},e.prototype.upEvent=function(t,e,i){this.setButton(this._over,!1),this.upAction(),i&&this.onClick.dispatch(this)},e.prototype.setButton=function(t,e){if(this._over||this._down||(this._saveScale.copyFrom(this._button.scale),this._savePosition.copyFrom(this._button.position)),this._down=e,this._over=t,e){if(Phaser.Point.multiply(this._saveScale,this.scaleOnDown,this._button.scale),Phaser.Point.add(this._button.position,this.offsetOnDown,this._button.position),this._tinted){this._button.tint=this._downTint;for(var i=0;i<this._button.children.length;i++)this._button.getChildAt(i).tint=this._downTint}}else if(t){if(Phaser.Point.multiply(this._saveScale,this.scaleOnOver,this._button.scale),Phaser.Point.add(this._button.position,this.offsetOnOver,this._button.position),this._tinted){this._button.tint=this._overTint;for(i=0;i<this._button.children.length;i++)this._button.getChildAt(i).tint=this._overTint}}else if(this._button.scale.copyFrom(this._saveScale),this._button.position.copyFrom(this._savePosition),this._tinted){this._button.tint=16777215;for(i=0;i<this._button.children.length;i++)this._button.getChildAt(i).tint=16777215}},e.prototype.overAction=function(){},e.prototype.outAction=function(){},e.prototype.downAction=function(){Utils.AudioUtils.playSound("jump")},e.prototype.upAction=function(){},e}(Phaser.Group);t.Button=e}(UI||(UI={}));!function(t){var e=function(t){function e(e,i){var n=t.call(this,e,i,"Sprites",i,!0)||this;n._text=null,n.setTint(12632256);var a=e.cache.getFrameByName("Sprites",i).width,s=(a+4)/a;return n.scaleOnOver.set(s),s=(a-8)/a,n.scaleOnDown.set(s),n}return __extends(e,t),e}(UI.Button);t.SimpleButton=e}(Ninja||(Ninja={}));!function(t){var e=function(){function t(){}return t.AUDIO_JSON={resources:["assets\\sfx\\Sfx.ogg","assets\\sfx\\Sfx.m4a"],spritemap:{bonus:{start:0,end:.7888662131519274,loop:!1},end:{start:2,end:4.77297052154195,loop:!1},jump:{start:6,end:6.695283446712018,loop:!1},katana:{start:8,end:9.380975056689342,loop:!1},land:{start:11,end:11.529727891156462,loop:!1}}},t}();t.Sounds=e}(Ninja||(Ninja={}));!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._userScale=new Phaser.Point(1,1),e._gameDims=new Phaser.Point,e._forceResize=!0,e}return __extends(e,t),e.prototype.init=function(){this.input.maxPointers=1,App.Global.GAMEE&&(this.stage.disableVisibilityChange=!0),this.calcGameDims(),this.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.scale.setGameSize(this._gameDims.x,this._gameDims.y),this.scale.setUserScale(this._userScale.x,this._userScale.y),this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.scale.setResizeCallback(this.gameResized,this),this.game.device.desktop||this.scale.onOrientationChange.add(this.orientationChange,this),this.androidUnlockAudio()},e.prototype.androidUnlockAudio=function(){this.game.device.android&&this.game.device.chrome&&this.game.device.chromeVersion>=55&&(this.game.sound.touchLocked=!0,this.game.input.addTouchLockCallback(function(){if(this.noAudio||!this.touchLocked||null!==this._unlockSource)return!0;if(this.usingWebAudio){var t=this.context.createBuffer(1,1,22050);this._unlockSource=this.context.createBufferSource(),this._unlockSource.buffer=t,this._unlockSource.connect(this.context.destination),void 0===this._unlockSource.start?this._unlockSource.noteOn(0):this._unlockSource.start(0),"suspended"===this._unlockSource.context.state&&this._unlockSource.context.resume()}return!0},this.game.sound,!0))},e.prototype.create=function(){App.Global.GAMEE&&this.game.onSound(Gamee.Gamee.instance.sound),this.game.state.start("Preloader",!0,!1)},e.prototype.calcGameDims=function(){var t=window.innerWidth,e=window.innerHeight;(t>e||this.game.device.desktop)&&(t=.625*e);var i=(t+.01)/App.Global.GAME_WIDTH,n=Math.round(e/(t/App.Global.GAME_WIDTH)),a=(e+.01)/n;this._userScale.set(i,a),this._gameDims.set(App.Global.GAME_WIDTH,n)},e.prototype.gameResized=function(t,e){if(!t.incorrectOrientation){var i=this._userScale.x,n=this._userScale.y;this.calcGameDims();var a=this._gameDims,s=this._userScale;if(a.x!==this.game.width||a.y!==this.game.height||Math.abs(s.x-i)>.001||Math.abs(s.y-n)>.001||this._forceResize){this._forceResize=!1,this.scale.setGameSize(a.x,a.y),this.scale.setUserScale(s.x,s.y);var o=this.game.state.getCurrentState();"function"==typeof o.onResize&&o.onResize(a.x,a.y)}}},e.prototype.orientationChange=function(t,e,i){},e}(Phaser.State);t.Boot=e}(Ninja||(Ninja={}));!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._ready=!1,t}return __extends(i,e),i.prototype.preload=function(){var e="assets/sfx/";if(this.game.device.ie||Phaser.Device.isAndroidStockBrowser()){for(var i in t.Sounds.AUDIO_JSON.spritemap)this.load.audio(i,e+i+".mp3");this.load.audio("Music",e+"music.mp3")}else{this.game.device.iOS&&.1,this.load.audiosprite("Sfx",t.Sounds.AUDIO_JSON.resources,null,t.Sounds.AUDIO_JSON),this.load.audio("Music",[e+"music.ogg",e+"music.m4a"])}e="assets/",this.load.atlas("Sprites",e+"Sprites.png",e+"Sprites.json"),this.load.xml("Font",e+"font.xml"),this.load.json("Config",e+"config.json")},i.prototype.loadUpdate=function(){this.setLoadingText(this.load.progress)},i.prototype.create=function(){this.readConfig(),this.cache.addBitmapFontFromImage("Font",null,"Sprites",this.cache.getXML("Font"),"xml");var e=this.add.audio("Music");if(e.volume=.65,Utils.AudioUtils.addMusic("Music",e),this.game.device.ie||Phaser.Device.isAndroidStockBrowser()){Utils.AudioUtils.setSounds(null);for(var i in t.Sounds.AUDIO_JSON.spritemap){(a=this.add.audio(i)).allowMultiple=!0,Utils.AudioUtils.addSound(i,a)}}else{var n=this.add.audioSprite("Sfx");for(var i in t.Sounds.AUDIO_JSON.spritemap){var a;(a=n.sounds[i]).allowMultiple=!0}Utils.AudioUtils.setSounds(n)}null!=App.Global.saveData&&null!=App.Global.saveData.skins||(App.Global.saveData=new t.SaveData)},i.prototype.readConfig=function(){var e=this.game.cache.getJSON("Config");for(var i in e)t.Gameplay[i]=e[i];t.Gameplay.SHOP_CHAR_DEFS=t.Gameplay.SHOP_CHAR_DEFS_GAMEE},i.prototype.update=function(){!this._ready&&this.cache.isSoundDecoded("Music")&&(this._ready=!0,this.game.state.start("Play"))},i.prototype.setLoadingText=function(t){},i}(Phaser.State);t.Preloader=e}(Ninja||(Ninja={}));!function(t){var e;!function(t){t[t.IDLE=0]="IDLE",t[t.FORCE_RESET=1]="FORCE_RESET",t[t.PLAY=2]="PLAY",t[t.SHOP_WAIT=3]="SHOP_WAIT"}(e||(e={}));var i=function(i){function n(){var t=i.call(this)||this;return t._playState=e.IDLE,t._gameStartTime=0,t._gameOver=!1,t._runFromRestart=!1,t._foreground=[],t._gameDirty=!0,t._replayMode=!1,t._replayData={time:"",seed:"",score:0,x:[]},t._recordData={time:"",seed:"",score:0,x:[]},t._replayPosition=0,t._ghostMode=!1,t._soundLocked=!0,t._camOffset=0,t._dark=null,t._shopScreenGamee=null,t}return __extends(n,i),n.prototype.create=function(){this._camOffset=(this.game.height-640)/2,this.camera.bounds=null,this.camera.view.y=-this._camOffset,this.stage.backgroundColor=0,this.physics.arcade.gravity.y=0,this._button=this.game.input.keyboard.addKey(Phaser.KeyCode.SPACEBAR),this.game.input.onDown.add(function(){this._buttonDown=!0},this),this.createBackground(),this._arrow=new Phaser.Sprite(this.game,256,524,"Sprites","sipka"),this._arrow.anchor.set(.5,1),this._arrow.angle=33.7,this.world.add(this._arrow),this._player=new t.Player(this.game),this._player.onOutOfScreen.add(function(){this.setGameOver()},this),this.world.add(this._player),this._ghostPlayer=new t.Player(this.game),this._ghostPlayer.onOutOfScreen.add(function(){this._ghostPlayer.exists=!1,this._ghostPlayer.dead=!0,void 0!==this._replayData.score&&Gamee.Gamee.instance.setScore(this._replayData.score,!0)},this),this.world.add(this._ghostPlayer),this._generator=new t.Generator(this.game),this.world.add(this._generator.walls),this.world.bringToTop(this._ghostPlayer),this.world.bringToTop(this._player),this.createEmitters(),this.createForeground(),this._dark=new t.Dark(this.game),this.world.add(this._dark),this.reset(),App.Global.GAMEE&&(Gamee.Gamee.instance.gameReady(),this._dark.show(.75),this._playState=e.IDLE)},n.prototype.onGameePause=function(){this.game.paused=!0},n.prototype.onGameeUnpause=function(){this.game.paused=!1},n.prototype.onGameeRestart=function(t,i,n){if(App.Global.game.paused=!1,this._buttonDown=!1,this._gameStartTime=this.game.time.time,this._replayMode=i,this._ghostMode=n,this.reset(),this.game.device.android&&this.game.device.chrome&&this.game.device.chromeVersion>=55&&this._soundLocked&&this.game.sound.usingWebAudio){var a=this.game.sound.context.createBuffer(1,1,22050),s=this.game.sound.context.createBufferSource();s.buffer=a,s.connect(this.game.sound.context.destination),void 0===s.start?s.noteOn(0):s.start(0),"suspended"==s.context.state&&(s.context.resume(),this._soundLocked=!1)}Utils.AudioUtils.playSound("katana"),this._replayMode||this._ghostMode?this._playState=e.FORCE_RESET:null!==this._shopScreenGamee&&!1!==this._shopScreenGamee.visible||this.onGameeShop()},n.prototype.onGameeButtonDown=function(t){this._buttonDown=!0},n.prototype.onGameeButtonUp=function(t){this._buttonDown=!1},n.prototype.reset=function(){this._gameOver=!1,this._buttonDown=!1,Utils.AudioUtils.stopSound("katana"),this.camera.x=0;var e=this._generator.reseed(),i="ninja";if(this._replayMode||this._ghostMode){if(this._replayPosition=0,this._replayData=Gamee.Gamee.instance.replayData,App.Global.GAMEE&&(this._replayData=Gamee.Gamee.instance.replayData,null!=this._replayData.ch&&(i=this._replayData.ch)),null===this._replayData)throw new Error("Replay requested, but no replay data!");e=this._replayData.seed}this._replayMode||(this._recordData={time:(new Date).toString(),seed:e,score:0,x:[]}),this._generator.reset(e),this._generator.updateGenerator(0),this.updateBackground(0),this.updateForeground(0),this._gameDirty=!1,this._player.resetPlayer(),this._player.setSkin(this._replayMode?i:App.Global.saveData.selected),this._ghostPlayer.exists=this._ghostMode,this._ghostPlayer.setSkin(i),this._ghostPlayer.resetPlayer(),this._ghostMode&&(this._ghostPlayer.body.x=100,this._ghostPlayer.position.x=100,this._ghostPlayer.alpha=.5),this._jumpTimer=0,this._speed=t.Gameplay.SPEED_X_MIN,this._speedUpdateDir=1,this._arrow.exists=!0,this._arrow.position.set(256,534),this._arrow.alpha=1,this._arrowTween=this.add.tween(this._arrow).to({x:258,y:531},200,Phaser.Easing.Sinusoidal.InOut,!0,0,-1,!0),this._scoreCoins=this._scoreDistance=0,this._ghostScoreCoins=this._ghostScoreDistance=0,this.physics.arcade.isPaused=!0,App.Global.GAMEE||this.onGameeShop(),Utils.AudioUtils.stopMusic(),Utils.AudioUtils.playMusic("Music"),this._player.setAnim("run")},n.prototype.update=function(){switch(this._playState){case e.IDLE:return;case e.FORCE_RESET:return this._playState=e.PLAY,this._dark.hide(),this._buttonDown=!1,void(this.game.physics.arcade.isPaused=!1);case e.SHOP_WAIT:return void(null!==this._shopScreenGamee&&this._shopScreenGamee.visible||!this._buttonDown||(this._buttonDown=!1,this.game.time.time-this._gameStartTime>250&&(this._playState=e.FORCE_RESET)))}if(App.Global.GAMEE&&!Gamee.Gamee.instance.gameRunning)return this._player.resetPlayer(),void(this._ghostMode&&(this._ghostPlayer.resetPlayer(),this._ghostPlayer.body.x=100,this._ghostPlayer.position.x=100,this._ghostPlayer.alpha=0));if(this._ghostMode&&(this._ghostPlayer.alpha=.5),this._gameDirty=!0,this._player.inAir&&this.movePlayer(this._player),this._ghostMode&&this._ghostPlayer.inAir&&this.movePlayer(this._ghostPlayer),this.updatePhysics(this._player),this._ghostMode&&this.updatePhysics(this._ghostPlayer),this._gameOver||(this.updateSpeed(),this.camera.x=Math.max(0,this._player.x-125)),this._generator.updateGenerator(this.camera.x),this._replayMode?this.handleReplay(this._player):this.handleInput(this._player),this._ghostMode&&this.handleReplay(this._ghostPlayer),!this._gameOver){var i=Math.max(0,Math.floor(this._player.x/t.Gameplay.SPEED_X_MAX));i>this._scoreDistance&&(this._scoreDistance=i,this.onScore(0)),this._ghostMode&&!this._ghostPlayer.dead&&(i=Math.max(0,Math.floor(this._ghostPlayer.x/t.Gameplay.SPEED_X_MAX)))>this._ghostScoreDistance&&(this._ghostScoreDistance=i,this.onScore(0,!0))}this.updateBackground(this.camera.x),this.updateForeground(this.camera.x)},n.prototype.updateSpeed=function(){if(1===this._speedUpdateDir){var e=t.Gameplay.SPEED_X_MAX-t.Gameplay.SPEED_X_MIN;this._speed+=e/t.Gameplay.SPEED_UP_TIME*this.time.physicsElapsed,this._speed>t.Gameplay.SPEED_X_MAX&&(this._speedUpdateDir=0)}else if(-1===this._speedUpdateDir){e=t.Gameplay.SPEED_X_MAX-t.Gameplay.SPEED_X_MIN;this._speed-=e/t.Gameplay.SPEED_DOWN_TIME*this.time.physicsElapsed,this._speed<t.Gameplay.SPEED_X_MIN&&(this._speedUpdateDir=1)}Phaser.Math.clamp(this._speed,t.Gameplay.SPEED_X_MIN,t.Gameplay.SPEED_X_MAX)},n.prototype.movePlayer=function(e){if(!e.dead){var i=e.body,n=Phaser.Math.sign(i.gravity.y),a=this.time.physicsElapsed;i.y+=this._speed*t.Gameplay.SPEED_Y_COEF*a*n,i.x+=this._speed*a,(n<0&&i.y<=e.destinationY||n>0&&i.y>=e.destinationY)&&(i.y=e.destinationY,e.allowGravity=!0,e.inAir=!1);var s=Math.abs(i.y-e.startY)/Math.abs(e.startY-e.destinationY),o=(2*Phaser.Easing.Exponential.InOut(s)-1)*n;e.scale.y=o}},n.prototype.handleInput=function(t){if(!t.dead){this._button.justDown&&(this._buttonDown=!0),this._button.justUp&&(this._buttonDown=!1);!this._buttonDown||!t.standing||t.inAir||this.game.time.now<this._jumpTimer||(this._buttonDown=!1,this._jumpTimer=this.game.time.now+150,this._recordData.x.push(t.x),this.doJump(t))}},n.prototype.handleReplay=function(t){if(!(t.dead||this._replayPosition>=this._replayData.x.length)){var e=this._replayData.x[this._replayPosition];t.x>=e&&(t.x=e,++this._replayPosition,this.doJump(t))}},n.prototype.doJump=function(e){var i=e.onFloor;e.onFloor=!i;var n=this._speed,a=(i?-this._speed:this._speed)*t.Gameplay.SPEED_Y_COEF,s=e.rect,o=e.x+s.x,r=e.y+s.y,h=0;i?(h=Math.max(this._generator.castRay(o,r,n,a,1,1).destY,this._generator.castRay(o+s.width,r,n,a,1,1).destY),h+=s.height+s.y):(h=Math.min(this._generator.castRay(o,r+s.height,n,a,1,1).destY,this._generator.castRay(o+s.width,r+s.height,n,a,1,1).destY),h-=s.height+s.y);var l=e.body;e.inAir=!0,e.startY=e.y-(e.y-l.y),e.destinationY=h-(e.y-l.y),e.allowGravity=!1,l.velocity.set(0,0),l.gravity.y=t.Gameplay.GRAVITY*(e.onFloor?1:-1),e.setAnim("jump"),e===this._player&&Utils.AudioUtils.playSound("jump"),this._arrow.exists&&(this._arrowTween.stop(),this.add.tween(this._arrow).to({alpha:0},400,Phaser.Easing.Linear.None,!0,0).onComplete.add(function(){this._arrow.exists=!1},this))},n.prototype.updatePhysics=function(e){if(!e.dead){var i=e.body;this.physics.arcade.overlap(e,this._generator.bonuses,function(t,e){if(t===this._player){this.onScore(1),Utils.AudioUtils.playSound("bonus"),e.exists=!1,this._coinEmitter.emitAt(e.x,e.y);null!==(i=this._coinEmitter.emitParticle())&&(i.visual.frameName=e.frameName,i.visual.alpha=1)}else if(!e.ghostPicked){e.ghostPicked=!0,this.onScore(1,!0),this._coinEmitter.emitAt(e.x,e.y);var i;null!==(i=this._coinEmitter.emitParticle())&&(i.visual.frameName=e.frameName,i.visual.alpha=.3)}},null,this),i.touching.none=!0,i.touching.up=i.touching.down=i.touching.left=i.touching.right=!1;(this._replayMode||e===this._ghostPlayer)&&(this._replayPosition,this._replayData.x.length);var n=e.inAir?this.physics.arcade.overlap(e,this._generator.walls):this.physics.arcade.collide(e,this._generator.walls);if(e.inAir&&n){i.touching.none=!0,i.touching.up=i.touching.down=i.touching.left=i.touching.right=!1,this.physics.arcade.overlap(e,this._generator.walls),e.allowGravity=!0,e.inAir=!1;var a=Phaser.Math.sign(e.destinationY-i.y),s=(2*Phaser.Easing.Exponential.InOut(1)-1)*a;e.scale.y=s}if(i.touching.left||i.touching.right)return e.inAir=!1,i.velocity.set(0,0),i.gravity.y=t.Gameplay.GRAVITY,e.dead=!0,void(e===this._player?(this.setGameOver(),this._replayMode&&void 0!==this._replayData.score&&Gamee.Gamee.instance.setScore(this._replayData.score,!1)):(Utils.AudioUtils.playSound("land"),Utils.AudioUtils.playSound("land"),void 0!==this._replayData.score&&Gamee.Gamee.instance.setScore(this._replayData.score,!0)));var o=e.standing;e.standing=i.touching.down||i.touching.up,e.inAir||o===e.standing||(e.setAnim(e.standing?"run":"fall"),e.standing&&e===this._player&&Utils.AudioUtils.playSound("land")),i.velocity.x=e.inAir?0:this._speed}},n.prototype.setGameOver=function(){this._gameOver||(this._player.stopAnim(),this._gameOver=!0,Utils.AudioUtils.stopMusic(),Utils.AudioUtils.playSound("end"),this.time.events.add(1e3,function(){if(this._player.resetPlayer(),App.Global.GAMEE){this._runFromRestart=!0;var t=this._replayMode?null:this._recordData;null!==t&&(t.score=this._scoreCoins+this._scoreDistance,t.ch=App.Global.saveData.selected),Gamee.Gamee.instance.gameOver(t)}else this.reset()},this))},n.prototype.onScore=function(t,e){void 0===e&&(e=!1),e?(this._ghostScoreCoins+=t,App.Global.GAMEE&&Gamee.Gamee.instance.setScore(this._ghostScoreCoins+this._ghostScoreDistance,!0)):(this._scoreCoins+=t,App.Global.GAMEE&&Gamee.Gamee.instance.setScore(this._scoreCoins+this._scoreDistance))},n.prototype.createBackground=function(){var e=this.add.sprite(0,this._camOffset,"Sprites","bg",this.world);e.fixedToCamera=!0,e.height=this.game.height-2*this._camOffset,e.width=this.game.width;var i=this.add.sprite(400,330+this._camOffset,"Sprites","slunce",this.world);i.scale.set(2,2),i.anchor.set(.5,.5),i.fixedToCamera=!0,this._backClouds=new t.Clouds(this.game,this.world,3,.2,["mrak_maly"],190,110),this._mountains=new t.BgLayer(this.game,this.world,"Sprites","hory",1,.4),this._mountains.position.y=this.game.height-170-this._camOffset,this._frontClouds=new t.Clouds(this.game,this.world,5,.6,["mrak_stredni","mrak_velky"],0,190),this._front=new t.BgLayer(this.game,this.world,"Sprites","front",1,.8),this._front.position.y=this.game.height-this._camOffset},n.prototype.createForeground=function(){for(var e=0;e<3;e++){this._foreground[e]=[];var i=0===e?0:1===e?42:120,n=new t.BgLayer(this.game,this.world,"Sprites","paralax_"+e,0,Math.pow(1.25,e+1),-1);n.position.y=12+this._camOffset-i,this._foreground[e][0]=n;var a=new t.BgLayer(this.game,this.world,"Sprites","paralax_"+e,0,Math.pow(1.25,e+1));a.position.y=628+this._camOffset+i,this._foreground[e][1]=a}},n.prototype.updateBackground=function(t){this._backClouds.updatePosition(t),this._mountains.updatePosition(t),this._frontClouds.updatePosition(t),this._front.updatePosition(t)},n.prototype.updateForeground=function(t){for(var e=0;e<3;e++)for(var i=0;i<=1;i++)this._foreground[e][i].updatePosition(t)},n.prototype.createEmitters=function(){var t=new Particles.ParticlesEmitter(this.game,0,0,32);t.gravity=2500,t.lifetime=.8,t.setXSpeed(-100,100),t.setYSpeed(-400,-600),t.makeParticles("Sprites","coin1",32),this.world.add(t),this._coinEmitter=t},n.prototype.onGameeShop=function(){if(App.Global.GAMEE&&(Gamee.Gamee.instance.isWeb||Gamee.Gamee.instance.isBattle))this._playState=e.FORCE_RESET;else{if(this._player.stopAnim(),this._ghostPlayer.stopAnim(),this.game.physics.arcade.isPaused=!0,this._playState=e.SHOP_WAIT,this._dark.show(.75),null===this._shopScreenGamee){var i=new t.ShopScreenGamee(this.game);i.onShopClosed.add(function(t){i.acceptInput=!1,i.change&&(this._player.setSkin(App.Global.saveData.selected),App.Global.GAMEE&&window.gamee.gameSave(JSON.stringify(App.Global.saveData),!1)),i.hide(),this._dark.hide(),this._player.setAnim("run"),this._ghostPlayer.setAnim("run"),this._playState=e.FORCE_RESET},this),this._shopScreenGamee=i}this.world.remove(this._shopScreenGamee),this.world.add(this._shopScreenGamee),this.world.addAt(this._shopScreenGamee,this.world.getIndex(this._dark)+1),this._shopScreenGamee.show(0,App.Global.saveData.coins)}},n.DEBUG=!1,n}(Phaser.State);t.Play=i}(Ninja||(Ninja={}));var App;!function(t){var e=function(){function t(){}return t.GAMEE=!0,t.game=null,t.GAME_WIDTH=640,t.GAME_HEIGHT=640,t.MAX_GAME_WIDTH=640,t.MAX_GAME_HEIGHT=640,t.scaleX=1,t.scaleY=1,t.correctOrientation=!1,t.musicOn=!0,t.soundOn=!0,t.showLanguages=!1,t.supportedLanguages=["en"],t.currentLanguage="en",t}();t.Global=e}(App||(App={}));var PhaserGlobal={stopFocus:!0};window.onload=function(){if(App.Global.GAMEE)var t=new Gamee.Gamee("OneButton",{},["saveState","replay","ghostMode","playerData","coins"],function(){var e=new Ninja.Game;App.Global.game=e,t.setGame(e)});else{var e=new Ninja.Game;App.Global.game=e}};var Ninja;!function(t){var e=function(e){function i(){var n=this,a=(window.innerWidth,window.innerHeight,Utils.ScreenUtils.calculateScreenMetrics(App.Global.GAME_WIDTH,App.Global.GAME_HEIGHT,Utils.eOrientation.PORTRAIT,!0,App.Global.MAX_GAME_WIDTH,App.Global.MAX_GAME_HEIGHT)),s=i.getRenderer();return n=e.call(this,{width:a.gameWidth,height:a.gameHeight,renderer:s,parent:"content",transparent:!1,antialias:!0,physicsConfig:null})||this,i.game=n,Utils.PhaserUtils.ChangeAnimationPhaserJSONData(n.additionalFrameProperties),Utils.PhaserUtils.AdjustTweenFunctions(),Utils.PhaserUtils.AddBitmapFontAddMethod(),n.state.add("Boot",t.Boot),n.state.add("Preloader",t.Preloader),n.state.add("Play",t.Play),n.state.add("Test",t.Play),n.state.start("Boot"),n}return __extends(i,e),i.getRenderer=function(){var t,e,i,n=[/.*Mali.400.*/i,/.*Mali.450.*/i,/.*Mediatek.MT6582.*/i],a=document.createElement("canvas");try{t=a.getContext("webgl")||a.getContext("experimental-webgl")}catch(t){return Phaser.AUTO}if(!t)return Phaser.AUTO;if(!(e=t.getExtension("WEBGL_debug_renderer_info")))return Phaser.AUTO;i=t.getParameter(e.UNMASKED_RENDERER_WEBGL);for(var s=0;s<n.length;s++){if(n[s].test(i))return Phaser.CANVAS}return Phaser.AUTO},i.prototype.onSound=function(t){this.sound.mute=!t,App.Global.soundOn=t,App.Global.musicOn=t,t?Utils.AudioUtils.playMusic("Music"):Utils.AudioUtils.stopMusic()},i.prototype.additionalFrameProperties=function(t,e){e.anchor&&(t.anchorX=e.anchor.w,t.anchorY=e.anchor.h),e.nextitem&&(t.nextItemX=e.nextitem.w,t.nextItemY=e.nextitem.h)},i}(Phaser.Game);t.Game=e}(Ninja||(Ninja={}));!function(t){var e=function(t){function e(e,i,n,a,s,o,r,h){var l=t.call(this,e,i,n,a,o,r,h)||this;l._changeOnDown=!1,l._checkFramePosition=new Phaser.Point,l._checked=!1;var u=s+"On";l.game.cache.getFrameByName(n,u),l._frameChecked=u;var c=s+"Off";l.game.cache.getFrameByName(n,u)||(c=null),l._frameUnchecked=c;var p=new Phaser.Sprite(e,0,0,n);return p.anchor.set(.5,.5),l.addChild(p),l._checkSprite=p,l.checked=!1,l}return __extends(e,t),Object.defineProperty(e.prototype,"checked",{get:function(){return this._checked},set:function(t){if(this._checked=t,t)this._checkSprite.frameName=this._frameChecked,this._checkSprite.visible=!0;else{var e=null!==this._frameUnchecked;e&&(this._checkSprite.frameName=this._frameUnchecked),this._checkSprite.visible=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changeOnDown",{get:function(){return this._changeOnDown},set:function(t){this._changeOnDown=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkSprite",{get:function(){return this._checkSprite},enumerable:!0,configurable:!0}),e.prototype.setCheckPosition=function(t,e){this._checkSprite.position.set(t,e)},e.prototype.downEvent=function(){this.setButton(this._over,!0),this._changeOnDown&&(this.checked=!this.checked),this.downAction(),this.onDown.dispatch(this,this._checked)},e.prototype.upEvent=function(t,e,i){this.setButton(this._over,!1),this.upAction(),i&&(this._changeOnDown||(this.checked=!this.checked),this.onClick.dispatch(this,this._checked))},e}(t.Button);t.CheckBox=e}(UI||(UI={}));!function(t){var e=function(t){function e(e,i,n,a,s,o){var r=t.call(this,e,i,n,a,o,s)||this;return r._toggled=!1,r._changeOnDown=!0,r._frameToggled=s,r._frameUntoggled=a,r.toggled=r._toggled,r}return __extends(e,t),Object.defineProperty(e.prototype,"toggled",{get:function(){return this._toggled},set:function(t){this._toggled=t,t?(this._button.setFrames(null,this._frameToggled,this._frameToggled,this._frameToggled),this._changeOnDown&&(this._button.frameName=this._frameToggled)):(this._button.setFrames(null,this._frameUntoggled,this._frameUntoggled,this._frameUntoggled),this._changeOnDown&&(this._button.frameName=this._frameUntoggled))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changeOnDown",{get:function(){return this._changeOnDown},set:function(t){this._changeOnDown=t},enumerable:!0,configurable:!0}),e.prototype.downEvent=function(){this.setButton(this._over,!0),this._changeOnDown&&(this.toggled=!this.toggled),this.downAction(),this.onDown.dispatch(this,this._toggled)},e.prototype.upEvent=function(t,e,i){this.setButton(this._over,!1),this.upAction(),i&&(this._changeOnDown||(this.toggled=!this.toggled),this.onClick.dispatch(this,this._toggled))},e}(t.Button);t.Toggle=e}(UI||(UI={}));var UI;!function(t){!function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP=1]="TOP",t[t.TOP_RIGHT=2]="TOP_RIGHT",t[t.LEFT=3]="LEFT",t[t.CENTER=4]="CENTER",t[t.RIGHT=5]="RIGHT",t[t.BOTTOM_LEFT=6]="BOTTOM_LEFT",t[t.BOTTOM=7]="BOTTOM",t[t.BOTTOM_RIGHT=8]="BOTTOM_RIGHT"}(t.eGroupPlacement||(t.eGroupPlacement={}));var e=function(t){function e(e,i){void 0===i&&(i=null);var n=t.call(this,e,i)||this;return n._groups=[],n}return __extends(e,t),e.prototype.hasGroupAt=function(t){var e=this._groups[t];return void 0!==e&&null!==e},e.prototype.groupAt=function(t,e){void 0===e&&(e=!0);var i=this._groups[t];return void 0!==i&&null!==i||!e||((i=new Phaser.Group(this.game,this)).fixedToCamera=!0,this._groups[t]=i,this.arrangeGroup(t)),i},e.prototype.arrangeGroups=function(){for(var t=0;t<this._groups.length;t++){var e=this._groups[t];void 0!==e&&null!==e&&this.arrangeGroup(t)}},e.prototype.arrangeGroup=function(t){var e=t%3,i=Math.floor(t/3),n=this._groups[t];if(void 0!==n&&null!==n){var a=this.game.width*e/2,s=this.game.height*i/2;n.cameraOffset.set(a,s)}},e}(Phaser.Group);t.UILayer=e}(UI||(UI={}));!function(t){var e=function(){function t(){}return t.setSounds=function(e,i){void 0===i&&(i=null),t._sfx=e,t._sfxIds=i,t._isAudioSprite=null!==e&&e instanceof Phaser.AudioSprite},t.addSound=function(e,i){t._sfxs[e]=i},t.playSound=function(e){var i=t.getSoundName(e);App.Global.soundOn&&(null!==t._sfx?t._sfx.play(i):void 0!==t._sfxs[i]&&t._sfxs[i].play())},t.stopSound=function(e){var i=t.getSoundName(e);null!==t._sfx?t._isAudioSprite&&t._sfx.stop(i):void 0!==t._sfxs[i]&&t._sfxs[i].stop()},t.getSoundName=function(e){return"number"==typeof e?t._sfxIds[e]:e},Object.defineProperty(t,"currentMusic",{get:function(){return t._currentMusic},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isMusicPlaying",{get:function(){if(null===this._currentMusic||0===this._currentMusic.length)return!1;return t._music[t._currentMusic].isPlaying},enumerable:!0,configurable:!0}),t.addMusic=function(e,i){t._music[e]=i},t.playMusic=function(e,i){if(void 0===i&&(i=!0),t._currentMusic!==e&&(null!==t._currentMusic&&t._currentMusic.length>0&&t.stopMusic(),e in t._music&&App.Global.musicOn)){t._currentMusic=e;var n=t._music[e];n.loop=i,n.play(),i||n.onStop.addOnce(function(){t.onFinished.dispatch(e)},this)}},t.stopMusic=function(){if(null!==t._currentMusic&&t._currentMusic.length>0){var e=t._music[t._currentMusic];e.isPlaying&&e.stop(),t._currentMusic=""}},t.pauseMusic=function(){if(null!==t._currentMusic&&t._currentMusic.length>0){var e=t._music[t._currentMusic];e.isPlaying&&e.pause()}},t.resumeMusic=function(){if(null!==t._currentMusic&&t._currentMusic.length>0){var e=t._music[t._currentMusic];e.paused&&e.resume()}},t._sfx=null,t._isAudioSprite=!1,t._sfxs={},t._music={},t._currentMusic="",t.onFinished=new Phaser.Signal,t}();t.AudioUtils=e}(Utils||(Utils={}));!function(t){var e=function(){function t(){}return t.supported=function(){return App.Global.game.scale.compatibility.supportsFullScreen},t.isFullscreen=function(){return App.Global.game.scale.isFullScreen},t.changeFullscreen=function(){var t=App.Global.game;t.scale.isFullScreen?t.scale.stopFullScreen():t.scale.startFullScreen(!1,!1)},t}();t.FullscreenUtils=e}(Utils||(Utils={}));!function(t){var e=function(){function t(){}return t.ChangeAnimationPhaserJSONData=function(t){Phaser.AnimationParser.myCallback=t,Phaser.AnimationParser.JSONData=function(t,e){if(e.frames){for(var i=new Phaser.FrameData,n=e.frames,a=0;a<n.length;a++){var s=i.addFrame(new Phaser.Frame(a,n[a].frame.x,n[a].frame.y,n[a].frame.w,n[a].frame.h,n[a].filename));n[a].trimmed&&s.setTrim(n[a].trimmed,n[a].sourceSize.w,n[a].sourceSize.h,n[a].spriteSourceSize.x,n[a].spriteSourceSize.y,n[a].spriteSourceSize.w,n[a].spriteSourceSize.h),Phaser.AnimationParser.myCallback(s,n[a])}return i}}},t.AdjustTweenFunctions=function(){Phaser.TweenManager.prototype.removeFromUpdateQueue=function(t){var e=this._tweens.indexOf(t);-1!==e?this._tweens.splice(e,1):-1!==(e=this._add.indexOf(t))&&this._add.splice(e,1)},Phaser.Tween.prototype.stopAndRemoveFromUpdateQueue=function(t){var e=this.stop(t);return this.manager.removeFromUpdateQueue(this),this.pendingDelete=!1,e}},t.AddBitmapFontAddMethod=function(){Phaser.Cache.prototype.addBitmapFontFromImage=function(t,e,i,n,a,s,o){var r=this.getImage(i,!0),h={url:e,data:r.data,font:null,base:r.base};void 0===s&&(s=0),void 0===o&&(o=0),h.font="json"===a?Phaser.LoaderParser.jsonBitmapFont(n,h.base,s,o):Phaser.LoaderParser.xmlBitmapFont(n,h.base,s,o),this._cache.bitmapFont[t]=h,this._resolveURL(e,h)}},t}();t.PhaserUtils=e}(Utils||(Utils={}));!function(t){var e=function(){return function(){}}();t.ScreenMetrics=e;var i;!function(t){t[t.PORTRAIT=0]="PORTRAIT",t[t.LANDSCAPE=1]="LANDSCAPE"}(i=t.eOrientation||(t.eOrientation={}));var n=function(){function t(){}return t.calculateScreenMetrics=function(t,n,a,s,o,r){void 0===a&&(a=i.LANDSCAPE);var h,l;if(h=window.innerWidth,l=window.innerHeight,(h<l&&a===i.LANDSCAPE||l<h&&a===i.PORTRAIT)&&!s){var u=h;h=l,l=u}void 0!==o&&void 0!==r||(a===i.LANDSCAPE?(o=Math.round(1024*t/960),r=Math.round(720*n/600)):(o=Math.round(720*t/600),r=Math.round(1024*n/960)));var c=h/l,p=0,_=0,m=0,d=0;c>t/n?(d=n,m=2*Math.ceil(d*c/2),p=((m=Math.min(m,o))-t)/2,_=0):(m=t,d=2*Math.ceil(m/c/2),p=0,_=((d=Math.min(d,r))-n)/2);var g=(h+.01)/m,f=(l+.01)/d;return s&&a===i.LANDSCAPE&&(g=f),this.screenMetrics=new e,this.screenMetrics.windowWidth=h,this.screenMetrics.windowHeight=l,this.screenMetrics.defaultGameWidth=t,this.screenMetrics.defaultGameHeight=n,this.screenMetrics.maxGameWidth=o,this.screenMetrics.maxGameHeight=r,this.screenMetrics.gameWidth=m,this.screenMetrics.gameHeight=d,this.screenMetrics.scaleX=g,this.screenMetrics.scaleY=f,this.screenMetrics.offsetX=p,this.screenMetrics.offsetY=_,this.screenMetrics},t}();t.ScreenUtils=n}(Utils||(Utils={}));!function(t){var e=function(){return function(){}}(),i=function(){function t(){}return t.save=function(){var i=new e;i.musicOn=App.Global.musicOn,i.soundOn=App.Global.soundOn,i.currentLanguage=App.Global.currentLanguage;var n=t.getLocalStorage();if(null!==n){var a=JSON.stringify(i);n.setItem("ninja_save",a)}},t.load=function(){var e=null;if(null===e||void 0===e){var i=t.getLocalStorage();if(null===i)return!1;e=JSON.parse(i.getItem("fjm_save"))}return null!==e&&void 0!==e&&(App.Global.musicOn=e.musicOn,App.Global.soundOn=e.soundOn,App.Global.currentLanguage=e.currentLanguage,!0)},t.getLocalStorage=function(){try{if("localStorage"in window&&null!==window.localStorage)return localStorage}catch(t){return null}return null},t}();t.StorageUtils=i}(Utils||(Utils={}));!function(t){var e=function(){function t(){}return t.padNumber=function(t,e,i){void 0===i&&(i="0");var n=t+"";return n.length>=e?n:new Array(e-n.length+1).join(i)+n},t.addSpacingToNumber=function(t,e){return void 0===e&&(e=" "),(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,e)},t.formatTime=function(e,i,n,a){void 0===n&&(n=-1),void 0===a&&(a=":");var s=!1,o="";if((e=Math.floor(e))>3600||0===i){var r=Math.floor(e/3600);o+=(-1!==n?t.padNumber(r,n):r)+a,e%=3600,s=!0}if(!0===s||e>60||1===i){var h=Math.floor(e/60);o+=(-1!==n?t.padNumber(h,n):h)+a,e%=60,s=!0}var l=e;return o+=-1!==n?t.padNumber(l,n):l},t}();t.StringUtils=e}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){}return t.setTexts=function(e){t._texts=e},t.getText=function(e,i){if(null===t._texts)return"Texts not set";void 0===i&&(i=App.Global.currentLanguage);var n=t._texts[i];if(void 0===n)return"Invalid language "+i;var a=n[e];return void 0===a?"!MISSING TEXT!":a},t._texts=null,t}();t.TextUtils=e}(Utils||(Utils={}));
