var Gamee;!function(e){var t=function(){function e(t,i){void 0===i&&(i=!1),this.onFirstRestart=new Phaser.Signal,this._onFirstRestartCalled=!1,this._game=null,this._gameeController=null,this._indices={right:1,up:2,left:4,down:8,A:16,B:32,button:64},this._pressesCache=0,this._isDown=0,this._justDown=0,this._justUp=0,this._gameRunning=!1,this._score=0,void 0!==window.gamee&&(null===t||("Touch"!==t?(this._gameeController=window.gamee.controller.requestController(t,{enableKeyboard:i}),this.keyHandlers()):(this._gameeController=window.gamee.controller.requestController("Touch"),this.touchHandlers()))),this.eventHandlers(),e._instance=this}return Object.defineProperty(e,"instance",{get:function(){return e._instance},enumerable:!0,configurable:!0}),e.prototype.setGame=function(e){this._game=e},Object.defineProperty(e.prototype,"gameRunning",{get:function(){return this._gameRunning},enumerable:!0,configurable:!0}),e.prototype.keyHandlers=function(){var e=this;this._gameeController.on("keydown",function(t){App.Global.DEBUG_GAMEE&&Log.Log.msg("Gamee - keydown"),e._pressesCache|=e._indices[t.button];var i=e._game.state.getCurrentState();"function"==typeof i.onGameeButtonDown&&i.onGameeButtonDown(t.button)}),this._gameeController.on("keyup",function(t){e._pressesCache&=~e._indices[t.button];var i=e._game.state.getCurrentState();"function"==typeof i.onGameeButtonUp&&i.onGameeButtonUp(t.button)})},e.prototype.processKeys=function(){var e=this._isDown;this._isDown=this._pressesCache;var t=e^this._isDown;this._justDown=t&this._isDown,this._justUp=t&~this._isDown},e.prototype.clearKeys=function(){this._pressesCache=0,this._isDown=0,this._justDown=0,this._justUp=0},e.prototype.isDown=function(e){return(this._isDown&this._indices[e])>0},e.prototype.justDown=function(e){return(this._justDown&this._indices[e])>0},Object.defineProperty(e.prototype,"anyIsDown",{get:function(){return this._isDown>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anyJustDown",{get:function(){return this._justDown>0},enumerable:!0,configurable:!0}),e.prototype.isUp=function(e){return!this.isDown(e)},e.prototype.justUp=function(e){return(this._justUp&this._indices[e])>0},e.prototype.touchHandlers=function(){var e=this;this._gameeController.on("touchstart",function(t){var i=e._game.state.getCurrentState();"function"==typeof i.onGameeTouchStart&&i.onGameeTouchStart(t)}),this._gameeController.on("touchend",function(t){var i=e._game.state.getCurrentState();"function"==typeof i.onGameeTouchEnd&&i.onGameeTouchEnd(t)}),this._gameeController.on("touchmove",function(t){var i=e._game.state.getCurrentState();"function"==typeof i.onGameeTouchMove&&i.onGameeTouchMove(t)}),this._gameeController.on("touchleave",function(t){var i=e._game.state.getCurrentState();"function"==typeof i.onGameeTouchLeave&&i.onGameeTouchLeave(t)}),this._gameeController.on("touchcancel",function(t){var i=e._game.state.getCurrentState();"function"==typeof i.onGameeTouchCancel&&i.onGameeTouchCancel(t)})},e.prototype.eventHandlers=function(){var e=this;window.gamee.onPause=function(){e.onPause()},window.gamee.onUnpause=function(){e.onUnpause()},window.gamee.onRestart=function(){e.onRestart()},window.gamee.onMute=function(){e._game.onMute()},window.gamee.onUnmute=function(){e._game.onUnmute()}},e.prototype.onPause=function(){var e=this._game.state.getCurrentState();"function"==typeof e.onGameePause&&e.onGameePause()},e.prototype.onUnpause=function(){var e=this._game.state.getCurrentState();"function"==typeof e.onGameeUnpause&&e.onGameeUnpause()},e.prototype.onRestart=function(){this._onFirstRestartCalled||(this.onFirstRestart.dispatch(),this._onFirstRestartCalled=!0),App.Global.DEBUG_GAMEE&&Log.Log.msg("Gamee - onRestart");var e=this._game.state.getCurrentState();"function"==typeof e.onGameeRestart&&e.onGameeRestart()},Object.defineProperty(e.prototype,"score",{get:function(){return this._score},set:function(e){this._score=e,window.gamee.score=e},enumerable:!0,configurable:!0}),e.prototype.addScore=function(e){this.score+=e},e.prototype.gameStart=function(){App.Global.DEBUG_GAMEE&&Log.Log.msg("Gamee - game start"),this._gameRunning?App.Global.DEBUG_GAMEE&&Log.Log.msg("Gamee - game start - Gamee game is already running"):(this._gameRunning=!0,window.gamee.gameStart())},e.prototype.gameOver=function(){App.Global.DEBUG_GAMEE&&Log.Log.msg("Gamee - game over"),this._gameRunning?(this._gameRunning=!1,window.gamee.gameOver()):App.Global.DEBUG_GAMEE&&Log.Log.msg("Gamee - game start - Gamee game is not running")},e._instance=null,e}();e.Gamee=t}(Gamee||(Gamee={}));!function(e){var t=function(){function e(e,t){this._rnd=e,this.reset(t)}return e.prototype.reset=function(e){--e;var t=Math.ceil(e/2);this._lbound=-t,this._ubound=e-t,this._currentBalance=0===e?this._rnd.integerInRange(-1,0):0},e.prototype.getBoolean=function(){var e=this._currentBalance+this._rnd.integerInRange(this._lbound,this._ubound);return this._currentBalance+=e>=0?-1:1,e>=0},e}();e.RandomBooleanBalancer=t}(Helper||(Helper={}));var Log;!function(e){var t=function(){function e(){}return e.msg=function(t){var i=e.messages;if(i.length<e.MAX_LINE)e.messages.push(t);else{for(var n=1;n<e.MAX_LINE;n++)i[n-1]=i[n];i[e.MAX_LINE-1]=t}},e.render=function(t){for(var i=e.messages,n=0;n<i.length;n++)t.text(i[n],50,70+16*n,"RGB(255, 0, 0)")},e.MAX_LINE=20,e.messages=[],e}();e.Log=t}(Log||(Log={}));!function(e){var t=function(){function e(){}return e.randomizeArray=function(e,t,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1);var a=i?t.slice():t;return Phaser.ArrayUtils.shuffle(a),n?a.slice(0,e):a},e.sort=function(t,i,n,a){if(void 0===n&&(n=0),void 0===a&&(a=t.length),n<a){for(var s,r=n,o=n+1;o<=a;o++)i(t[n],t[o])>0&&(s=t[++r],t[r]=t[o],t[o]=s);s=t[n],t[n]=t[r],t[r]=s,e.sort(t,i,n,r-1),e.sort(t,i,r+1,a)}},e}();e.ArrayUtils=t}(Helper||(Helper={}));!function(e){!function(e){function t(e){return-2*e*e+3*e}e.wiggle=function(e,t,i){var n=e*Math.PI*2*t,a=e*(2*Math.PI*i+Math.PI/2);return Math.sin(n)*Math.cos(a)},e.sinWithExpDecay=function(e,t,i){var n=e*Math.PI*2*t,a=-e*i;return Math.sin(n)*Math.exp(a)},e.pop5=t,e.pop5rev=function(e){return-(t(1-e)-1)},e.sin=function(e){return Math.sin(2*e*Math.PI)},e.halfSin=function(e){return Math.sin(e*Math.PI)},e.sinWithPeriod=function(e,t){return Math.sin(2*e*Math.PI*t)},e.overshoot=function(e){return-3.379795897*e*e+4.379795897*e}}(e.Easing||(e.Easing={}))}(Helper||(Helper={}));!function(e){var t=function(){function e(){}return e.create=function(t,i,n,a,s,r,o,h,l,u){return void 0===r&&(r=0),void 0===o&&(o=0),void 0===h&&(h=0),void 0===l&&(l=0),void 0===u&&(u=!1),e._image=new Phaser.Image(t,0,0,a),e._frame="string"==typeof s?t.cache.getFrameByName(a,s):t.cache.getFrameByIndex(a,s),e.calculateNineImage(i,n,r,o,h,l,u),e._nineImage=new Phaser.BitmapData(t,"NineImage"+e._textureKey++,e._width,e._height),e.renderNineImage(),e._nineImage},e.calculateNineImage=function(t,i,n,a,s,r,o){var h=e._frame;if(e._centralWidth=h.width-a-r,e._centralHeight=h.height-n-s,o)e._horizontalRepeats=t,e._verticalRepeats=i,e._width=a+r+e._centralWidth*t,e._height=n+s+e._centralHeight*i,e._lastWidth=0,e._lastHeight=0;else{var l=t-a-r;e._horizontalRepeats=Math.floor(l/e._centralWidth),e._lastWidth=l%e._centralWidth;var u=i-n-s;e._verticalRepeats=Math.floor(u/e._centralHeight),e._lastHeight=u%e._centralHeight,e._width=t,e._height=i}e._leftWidth=a,e._rightWidth=r,e._topHeight=n,e._bottomHeight=s},e.renderNineImage=function(){var t=e._frame.y,i=0;e._topHeight>0&&(e.renderNineImageRow(e._image,t,i,e._topHeight),t+=e._topHeight,i+=e._topHeight);for(var n=0;n<e._verticalRepeats;n++)e.renderNineImageRow(e._image,t,i,e._centralHeight),i+=e._centralHeight;e._lastHeight>0&&(e.renderNineImageRow(e._image,t,i,e._lastHeight),i+=e._lastHeight),t+=e._centralHeight,e._bottomHeight>0&&e.renderNineImageRow(e._image,t,i,e._bottomHeight)},e.renderNineImageRow=function(t,i,n,a){var s=e._frame.x,r=0;e._leftWidth>0&&(e._nineImage.copy(t,s,i,e._leftWidth,a,r,n),r+=e._leftWidth,s+=e._leftWidth);for(var o=0;o<e._horizontalRepeats;o++)e._nineImage.copy(t,s,i,e._centralWidth,a,r,n),r+=e._centralWidth;e._lastWidth>0&&(e._nineImage.copy(t,s,i,e._lastWidth,a,r,n),r+=e._lastWidth),s+=e._centralWidth,e._rightWidth>0&&e._nineImage.copy(t,s,i,e._rightWidth,a,r,n)},e._textureKey=0,e}();e.NineImage=t}(Helper||(Helper={}));var Helper;!function(e){var t;!function(e){e[e.UNDEFINED=-1]="UNDEFINED",e[e.SPACE=1]="SPACE",e[e.NEWLINE=2]="NEWLINE",e[e.CHARACTER=3]="CHARACTER"}(t||(t={}));var i=function(){function e(){}return e.hasNext=function(){return e.textPosition<e.text.length},e.getChar=function(){return e.text.charAt(e.textPosition++)},e.peekChar=function(){return e.text.charAt(e.textPosition)},e.getPosition=function(){return e.textPosition},e.setPosition=function(t){e.textPosition=t},e.getCharAdvance=function(t,i){var n=e.fontData.chars[t],a=n.xAdvance;return i>0&&n.kerning[i]&&(a+=n.kerning[i]),a},e.getCharType=function(e){return" "===e?t.SPACE:/(?:\r\n|\r|\n)/.test(e)?t.NEWLINE:t.CHARACTER},e.wrapText=function(i,n,a,s,r,o){e.text=n,e.setPosition(0),e.fontData=i.cache.getBitmapFont(r).font,void 0===o&&(o=e.fontData.size);var h=o/e.fontData.size,l=e.fontData.lineHeight*h,u=a/h,c=[],p=[],_=[],d=0,m=0,f=0;c[d]=f,_[m++]=0;for(var g=s;e.hasNext();){for(var y=0,v=0,P=-1,S=t.UNDEFINED,E=t.UNDEFINED,w=u,A=-1;e.hasNext();){f=e.getPosition();var T=e.getChar();S=e.getCharType(T);var I=T.charCodeAt(0);if(S===t.SPACE)E!==t.SPACE&&(v=y),++y,w-=e.getCharAdvance(I,A);else if(S===t.CHARACTER){if(E!==t.CHARACTER&&(P=f),(w-=e.getCharAdvance(I,A))<0)break;++y}else if(S===t.NEWLINE){var M=!1;if(e.hasNext()&&(M=!0,v=y,f=P=e.getPosition(),w=-1,S=t.CHARACTER),M)break}E=S,A=I}(g-=l)<0&&(_[m++]=d),w<0&&S===t.CHARACTER?(p[d]=0!==v?v:y,!1,g<0&&(!0,g=s-l),0!==v?(c[++d]=P,e.setPosition(P)):(c[++d]=f,e.setPosition(f))):e.hasNext()||(S===t.CHARACTER?p[d]=y:S===t.SPACE&&(p[d]=v))}_[m]=d+1;for(var b=[],G=1;G<=m;G++){for(var N=_[G-1],C=_[G],O=[],x=N;x<C;x++)O.push(e.text.substr(c[x],p[x]));b.push(O.join("\n"))}return b},e}();e.TextWrapper=i}(Helper||(Helper={}));!function(e){var t=function(){function t(e,i){this.maxVelocity=t.MAX_VELOCITY,this._delay=0,this._velocity=new Phaser.Point(0,0),this._angularVelocity=0,this._friction=0,this._angularDrag=0,this._gravity=0,this._alpha=1,this._scaleChange=0,this._alphaChange=0,this._game=e}return Object.defineProperty(t.prototype,"visual",{get:function(){return this._visual},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"on",{set:function(e){this._on=e,this._visual.exists=e,this._visual.visible=e},enumerable:!0,configurable:!0}),t.prototype.remove=function(){var e=this._visual.parent;null!==e&&(e instanceof Phaser.Group?e.remove(this._visual):e.removeChild(this._visual),e=null)},t.prototype.bringToTop=function(){var e=this._visual.parent;e instanceof Phaser.Group&&e.bringToTop(this._visual)},t.prototype.sendToBack=function(){var e=this._visual.parent;e instanceof Phaser.Group&&e.sendToBack(this._visual)},Object.defineProperty(t.prototype,"textureKey",{set:function(e){this._textureKey=e},enumerable:!0,configurable:!0}),t.prototype.setScaleChange=function(e,t){void 0===t&&(t=0),this._scaleChangeType=e,this._scaleChange=t},Object.defineProperty(t.prototype,"delay",{set:function(e){this._delay=e,e>0&&(this.on=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"alpha",{set:function(e){this._alpha=e,this._visual.alpha=Phaser.Math.clamp(e,0,1)},enumerable:!0,configurable:!0}),t.prototype.setAlphaChange=function(e,t){void 0===t&&(t=0),this._alphaChangeType=e,this._alphaChange=t},t.prototype.setPhysics=function(e,t,i,n,a,s){void 0===e&&(e=0),void 0===t&&(t=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=0),void 0===s&&(s=0),this._velocity.setTo(e,t),this._angularVelocity=i,this._friction=n,this._angularDrag=a,this._gravity=s,this._simplePhysics=0===s&&0===n&&0===a},t.prototype.setFrame=function(e){},t.prototype.onEmit=function(e){e.add(this._visual)},t.prototype.onKill=function(e){},t.prototype.update=function(t){void 0===t&&(t=!0);var i=this._game.time.physicsElapsed;if(this._delay>0){if((this._delay-=i)>0)return!0;this.on=!0}if(this.lifetime>0&&(this.lifetime-=i)<=0)return!1;if(0===this._velocity.x&&0===this._velocity.y||(this._visual.x+=this._velocity.x*i,this._visual.y+=this._velocity.y*i),0!==this._angularVelocity&&(this._visual.angle+=this._angularVelocity*i),this._simplePhysics||(this._velocity.x+=-this._friction*this._velocity.x*i,this._velocity.y+=(this._gravity-this._friction*this._velocity.y)*i,this._angularVelocity+=-this._angularDrag*this._angularVelocity*i),!t)return!0;if(this._scaleChangeType!=e.eParameterChangeType.NO_CHANGE)switch(this._scaleChangeType){case e.eParameterChangeType.IN_TIME:(this._visual.scale.x+=this._scaleChange*i)<0&&(this._visual.scale.x=0,this._scaleChange<0&&(this._scaleChangeType=e.eParameterChangeType.NO_CHANGE)),(this._visual.scale.y+=this._scaleChange*i)<0&&(this._visual.scale.y=0,this._scaleChange<0&&(this._scaleChangeType=e.eParameterChangeType.NO_CHANGE))}if(this._alphaChangeType!=e.eParameterChangeType.NO_CHANGE)switch(this._alphaChangeType){case e.eParameterChangeType.IN_TIME:this._alpha+=this._alphaChange*i,this._alpha<0?(this._visual.alpha=0,this._alphaChange<0&&(this._alphaChangeType=e.eParameterChangeType.NO_CHANGE)):this._alpha>1?(this._visual.alpha=1,this._alphaChange>0&&(this._alphaChangeType=e.eParameterChangeType.NO_CHANGE)):this._visual.alpha=this._alpha}return!0},t.MAX_VELOCITY=1e3,t}();e.Particle=t}(Particles||(Particles={}));var __extends=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)t.hasOwnProperty(i)&&(e[i]=t[i])};return function(t,i){function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(e){var t=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.setFrame=function(e){var t=this._visual;"string"==typeof e?t.frameName=e:t.frame=e},t.prototype.onCreate=function(e){var t=new Phaser.Sprite(this._game,0,0,this._textureKey);t.anchor.setTo(.5,.5),this._visual=t},t}(e.Particle);e.SpriteParticle=t}(Particles||(Particles={}));!function(e){var t=function(e){function t(t,i){var n=e.call(this,t,i)||this;return void 0!==i&&null===i||(n._anims=i[0]),n}return __extends(t,e),t.prototype.onCreate=function(t){e.prototype.onCreate.call(this,t);for(var i=this._visual,n=0;n<this._anims.length;n++){var a=this._anims[n],s=i.animations.add(a.name,a.frames,a.frameRate,a.loop);!a.loop&&a.killOnComplete&&(s.killOnComplete=!0)}},t.prototype.update=function(t){void 0===t&&(t=!0);var i=this._delay,n=e.prototype.update.call(this,t);return i>0&&this._delay<=0&&this._visual.animations.currentAnim.play(),n},t.prototype.setFrame=function(e){this.setAnim(e)},t.prototype.setAnim=function(e){var t=this._visual;t.animations.stop(null,!0),this._delay<=0?t.animations.play(e):(t.animations.currentAnim=t.animations.getAnimation(e),t.frame=t.animations.currentAnim._frames[0])},t.prototype.setRandomAnim=function(){this._visual;var e=this._anims[this._game.rnd.integerInRange(0,this._anims.length-1)].name;this.setAnim(e)},t}(e.SpriteParticle);e.AnimatedParticle=t}(Particles||(Particles={}));!function(e){var t=function(){function t(t){this.area=new Phaser.Point(0,0),this.gravity=0,this.minLifetime=1,this.maxLifetime=1,this.delay=0,this.minScale=1,this.maxScale=1,this.scaleChange=0,this.scaleChangeType=e.eParameterChangeType.NO_CHANGE,this.minAngle=0,this.maxAngle=0,this.minSpeedX=0,this.maxSpeedX=0,this.minSpeedY=0,this.maxSpeedY=0,this.friction=0,this.minAngularSpeed=0,this.maxAngularSpeed=0,this.angularDrag=0,this.minAlpha=1,this.maxAlpha=1,this.alphaChange=0,this.alphaChangeType=e.eParameterChangeType.NO_CHANGE,this.frames=null,this._minAdvScale=new Phaser.Point(1,1),this._maxAdvScale=new Phaser.Point(1,1),this._game=t}return t.readParams=function(e,i){var n={};for(var a in i){var s=new t(e);t.doReadParams(s,i,a),n[a]=s}return n},t.doReadParams=function(e,i,n){var a=i[n];if(void 0!==a.parent&&null!==a.parent){var s=a.parent;t.doReadParams(e,i,s)}for(var r in a)"parent"!==r&&(e[r],e[r]=a[r])},t.prototype.clear=function(){this.gravity=0,this.setXSpeed(0,0),this.setYSpeed(0,0),this.setAngularSpeed(0)},t.prototype.randomFrame=function(){var e=null;return null!==this.frames&&(e=Array.isArray(this.frames)?(this.frames[0],this._game.rnd.pick(this.frames)):this.frames),e},t.prototype.setXSpeed=function(e,t){e=e||0,t=t||0,this.minSpeedX=e,this.maxSpeedX=t},t.prototype.setYSpeed=function(e,t){e=e||0,t=t||0,this.minSpeedY=e,this.maxSpeedY=t},t.prototype.setAngularSpeed=function(e,t){e=e||0,t=t||0,this.minAngularSpeed=e,this.maxAngularSpeed=t},t.prototype.setAlpha=function(e,t){void 0===e&&(e=1),void 0===t&&(t=1),this.minAlpha=e,this.maxAlpha=t},t.prototype.setAlphaChange=function(t,i,n){switch(void 0===i&&(i=0),void 0===n&&(n=0),this.alphaChangeType=t,t){case e.eParameterChangeType.NO_CHANGE:this.alphaChange=0;break;case e.eParameterChangeType.IN_TIME:0===n&&(n=1),this.alphaChange=i/n}},t.prototype.setScale=function(e,t){e=e||0,t=t||0,this.minScale=e,this.maxScale=t},Object.defineProperty(t.prototype,"advScaleMin",{get:function(){return this._minAdvScale},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"advScaleMax",{get:function(){return this._maxAdvScale},enumerable:!0,configurable:!0}),t.prototype.setAdvScale=function(e,t,i,n){void 0===e&&(e=1),void 0===t&&(t=1),void 0===i&&(i=1),void 0===n&&(n=1),this._minAdvScale.setTo(e,i),this._maxAdvScale.setTo(t,n)},t.prototype.setScaleChange=function(t,i,n){switch(void 0===i&&(i=0),void 0===n&&(n=0),this.scaleChangeType=t,t){case e.eParameterChangeType.NO_CHANGE:this.scaleChange=0;break;case e.eParameterChangeType.IN_TIME:0===n&&(n=1),this.scaleChange=i/n}},t.prototype.setAngle=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.minAngle=e,this.maxAngle=t},t}();e.ParticleParams=t}(Particles||(Particles={}));!function(e){var t;!function(e){e[e.NONE=0]="NONE",e[e.FLOW=1]="FLOW",e[e.EXPLODE=2]="EXPLODE"}(t||(t={}));var i;!function(e){e[e.NO_CHANGE=0]="NO_CHANGE",e[e.IN_TIME=1]="IN_TIME"}(i=e.eParameterChangeType||(e.eParameterChangeType={}));var n=function(n){function a(i,s,r,o){var h=n.call(this,i,null)||this;return h._maxParticles=a.MAX_PARTICELES,h.emitPoint=new Phaser.Point(0,0),h.emitObject=null,h.particleClass=e.SpriteParticle,h.particleBringToTop=!1,h.particleSendToBack=!1,h.frequency=100,h.forceEmit=!1,h._alternativeParams=null,h._on=!1,h._mode=t.NONE,h._flowQuantity=0,h._flowTotal=0,h._flowCounter=0,h._particlesPool=[],h._counterPool=0,h._particlesUsed=[],h._counterUsed=0,h._timer=0,h._emitPoint=new Phaser.Point(0,0),h._params=new e.ParticleParams(i),h.position.setTo(s,r),h._maxParticles=o,h}return __extends(a,n),Object.defineProperty(a.prototype,"params",{get:function(){return this._params},set:function(e){this._params=e},enumerable:!0,configurable:!0}),a.prototype.clear=function(){this._params.clear()},a.prototype.update=function(){if(this._on&&this.game.time.time>=this._timer&&(this._timer=this.game.time.time+this.frequency*this.game.time.slowMotion,this._mode===t.FLOW))if(-1!==this._flowTotal&&this._flowCounter>=this._flowTotal)this.stopFlow();else for(var e=Math.max(1,this._flowQuantity),i=0;i<e&&!(this.emitParticle(this.forceEmit)&&(this._flowCounter++,-1!==this._flowTotal&&this._flowCounter>=this._flowTotal));i++);for(i=this._counterUsed-1;i>=0;i--){var n=this._particlesUsed[i];n.update()||(n.on=!1,n.remove(),n.onKill(this),this._particlesUsed[i]=this._particlesUsed[--this._counterUsed],this._particlesPool[this._counterPool++]=n)}},a.prototype.makeParticles=function(e,t,i,n){(void 0===i||i>this._maxParticles)&&(i=this._maxParticles),void 0!==t&&(this._params.frames=t);for(var a=0;a<i;a++){var s=new this.particleClass(this.game,n);s.textureKey=e,s.onCreate(this),s.on=!1,this._particlesPool[this._counterPool++]=s}},Object.defineProperty(a.prototype,"on",{set:function(e){this._on=e,this.exists=e,this.visible=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"count",{get:function(){return this._counterUsed},enumerable:!0,configurable:!0}),a.prototype.explode=function(e,i,n){this._mode=t.EXPLODE,this.on=!0,this.emitParticles(e,i,n)},a.prototype.flow=function(e,i,n,a,s,r){this._mode=t.FLOW,this.on=!0,void 0!==i&&0!==i||(i=1),void 0===n&&(n=-1),void 0===a&&(a=!0),i>this._maxParticles&&(i=this._maxParticles),this.frequency=e,this._flowCounter=0,this._flowQuantity=i,this._flowTotal=n,a&&(this.emitParticles(i,s,r),this._flowCounter+=i,this._timer=this.game.time.time+e*this.game.time.slowMotion)},a.prototype.stopFlow=function(){this._mode=t.NONE},a.prototype.killAllParticles=function(e){for(void 0===e&&(e=!0);this._counterUsed>0;){var t=this._particlesUsed[--this._counterUsed];t.remove(),e||t.onKill(this),this._particlesPool[this._counterPool++]=t}},a.prototype.emitParticles=function(e,t,i){for(var n=0;n<e;n++){var a=this.emitParticle(this.forceEmit);if(null===a)break;void 0!==t&&null!==t&&t.call(i,a)}},a.prototype.emitParticle=function(e,t){if(void 0===e&&(e=!1),void 0===t&&(t=!1),0===this._counterPool){if(!e)return null;var n=this._particlesUsed[0];this._particlesUsed[0]=this._particlesUsed[--this._counterUsed],n.remove(),n.onKill(this),this._particlesPool[this._counterPool++]=n}var a=this._particlesPool[--this._counterPool];this._particlesUsed[this._counterUsed++]=a,a.on=!0;var s=null!==this._alternativeParams?this._alternativeParams:this._params;if(this.randomEmitPoint(this._emitPoint,s),a.visual.position.set(this._emitPoint.x,this._emitPoint.y),a.visual.angle=0,t)a.lifetime=-1,a.visual.scale.set(1,1),a.setScaleChange(i.NO_CHANGE),a.visual.angle=0,a.alpha=1,a.setAlphaChange(i.NO_CHANGE),a.setPhysics();else{if(a.lifetime=this.game.rnd.realInRange(s.minLifetime,s.maxLifetime),a.delay=s.delay,1!==s.minScale||1!==s.maxScale){var r=this.game.rnd.realInRange(s.minScale,s.maxScale);a.visual.scale.set(r,r)}else s.advScaleMin.x!==s.advScaleMax.x||s.advScaleMin.y!==s.advScaleMax.y?a.visual.scale.set(this.game.rnd.realInRange(s.advScaleMin.x,s.advScaleMax.x),this.game.rnd.realInRange(s.advScaleMin.y,s.advScaleMax.y)):a.visual.scale.set(1,1);a.setScaleChange(s.scaleChangeType,s.scaleChange),a.visual.angle=s.minAngle===s.maxAngle?s.minAngle:this.game.rnd.realInRange(s.minAngle,s.maxAngle),a.alpha=this.game.rnd.realInRange(s.minAlpha,s.maxAlpha),a.setAlphaChange(s.alphaChangeType,s.alphaChange),a.setPhysics(this.game.rnd.realInRange(s.minSpeedX,s.maxSpeedX),this.game.rnd.realInRange(s.minSpeedY,s.maxSpeedY),this.game.rnd.realInRange(s.minAngularSpeed,s.maxAngularSpeed),s.friction,s.angularDrag,s.gravity),null!==s.frames&&a.setFrame(s.randomFrame())}return a.onEmit(this),this.particleBringToTop?a.bringToTop():this.particleSendToBack&&a.sendToBack(),a},a.prototype.destroy=function(){e.ParticlesManager.instance.remove(this),n.prototype.destroy.call(this,!0,!1)},a.prototype.randomEmitPoint=function(e,t){return t.area instanceof Phaser.Point?e.setTo(0,0):t.area.random(e),e.x+=this.emitPoint.x,e.y+=this.emitPoint.y,null!==this.emitObject&&(e.x+=this.emitObject.x,e.y+=this.emitObject.y),e},Object.defineProperty(a.prototype,"area",{set:function(e){this._params.area=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"gravity",{set:function(e){this._params.gravity=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"friction",{set:function(e){this._params.friction=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"angularDrag",{set:function(e){this._params.angularDrag=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minScale",{set:function(e){this._params.minScale=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxScale",{set:function(e){this._params.maxScale=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minAngle",{set:function(e){this._params.minAngle=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxAngle",{set:function(e){this._params.maxAngle=e},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"lifetime",{set:function(e){this._params.minLifetime=this._params.maxLifetime=e},enumerable:!0,configurable:!0}),a.prototype.setXSpeed=function(e,t){this._params.setXSpeed(e,t)},a.prototype.setYSpeed=function(e,t){this._params.setYSpeed(e,t)},a.prototype.setAngularSpeed=function(e,t){this._params.setAngularSpeed(e,t)},a.prototype.setAlpha=function(e,t){this._params.setAlpha(e,t)},a.prototype.setAlphaChange=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),this._params.setAlphaChange(e,t,i)},a.prototype.setScale=function(e,t){this._params.setScale(e,t)},a.prototype.setAdvScale=function(e,t,i,n){this._params.setAdvScale(e,t,i,n)},a.prototype.setScaleChange=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=0),this._params.setScaleChange(e,t,i)},a.prototype.setAngle=function(e,t){this._params.setAngle(e,t)},a.prototype.emitAt=function(e,t){this.emitPoint.setTo(e,t)},a.prototype.emitAtObject=function(e){e.center?this.emitPoint.setTo(e.center.x,e.center.y):this.emitPoint.setTo(e.x,e.y)},a.MAX_PARTICELES=16,a}(Phaser.Group);e.ParticlesEmitter=n}(Particles||(Particles={}));!function(e){var t=function(){function e(e,t,i,n){void 0===i&&(i=null),void 0===n&&(n=null),this._emitter=null,this._game=e,this._emitter=t,this._animEmitter=i,this._params=n}return e.prototype.emit=function(e,t,i,n,a){for(this._emitter.emitAt(e,t),null!==this._animEmitter&&this._animEmitter.emitAt(e,t);null!==i;){var s=i.animated?this._animEmitter:this._emitter;if(null===this._params&&i.paramsName,null!==this._params){var r=this._params[i.paramsName];void 0===r||(s.params=r)}s.explode(this._game.rnd.integerInRange(i.countMin,i.countMax),n,a),i=i.next}},e}();e.ParticleChain=t}(Particles||(Particles={}));var Particles;!function(e){var t=function(){function e(){this._emitters=[],this._emittersCount=0}return Object.defineProperty(e,"instance",{get:function(){return null===e._instance&&(e._instance=new e),e._instance},enumerable:!0,configurable:!0}),e.prototype.add=function(e){this._emitters[this._emittersCount++]=e},e.prototype.remove=function(e){for(var t=this._emittersCount-1;t>=0&&this._emitters[t]!==e;t--);-1!==t&&(this._emitters[t]=this._emitters[--this._emittersCount])},e.prototype.update=function(){for(var e=0;e<this._emittersCount;e++){var t=this._emitters[e];t.exists&&t.update()}},e._instance=null,e}();e.ParticlesManager=t}(Particles||(Particles={}));!function(e){var t=function(){function e(){}return e.BURGER_DAY=!1,e.PLAYER_SPEED=350,e.INITIAL_SPAWN_TIME=1e3,e.SPAWN_TIME=8e3,e.SPAWN_LIST=[e.INITIAL_SPAWN_TIME,500,500,e.SPAWN_TIME],e.SPAWN_DEADLY_IN_ROW=1,e.SPAWN_BONUSES_IN_ROW=1,e.DEADLY_MAX=6,e.DEADLY_MIN=2,e.LIKE_SPAWN_MIN=1e3,e.LIKE_SPAWN_MAX=2e3,e.ITEM_ANGLE=73,e.ITEM_SPEED_MIN=300,e.ITEM_SPEED_MAX=400,e.ITEM_ANG_SPEED_MIN=-90,e.ITEM_ANG_SPEED_MAX=90,e.DOUGHNUT_ANGLE=30,e.SCALE_TIME=350,e.INVINCIBLE_DURATION=7e3,e.PICKAXE_TURN_FACTOR=.25,e.YOUTUBER_TIME_MIN=5e3,e.YOUTUBER_TIME_MAX=8e3,e.TUTORIAL_FADE_DELAY=5e3,e.SCORE_FOR_MILLIS=3e3,e}();e.Gameplay=t}(JirkaKral||(JirkaKral={}));!function(e){var t=function(){function e(e,t,i){void 0===i&&(i=null),this.name="<no name>",this.debug=0,this._newFunction=null,this._count=0,this._pool=[],this._canGrow=!0,this._poolSize=0,this._classType=e,this._newFunction=i;for(var n=0;n<t;n++){var a=this.newItem();this._pool[this._count++]=a}this._poolSize=t}return e.prototype.createItem=function(){return 0===this._count?(this.debug,this._canGrow?this.newItem():null):(this.debug,this._pool[--this._count])},e.prototype.destroyItem=function(e){this.debug,this._pool[this._count++]=e},Object.defineProperty(e.prototype,"newFunction",{set:function(e){this._newFunction=e},enumerable:!0,configurable:!0}),e.prototype.newItem=function(){return null!==this._newFunction?this._newFunction():new this._classType},Object.defineProperty(e.prototype,"canGrow",{set:function(e){this._canGrow=e},enumerable:!0,configurable:!0}),e.DEBUG_ALLOCATION=1,e.DEBUG_CREATE=2,e.DEBUG_DESTROY=4,e.DEBUG_ALL=7,e}();e.Pool=t}(JirkaKral||(JirkaKral={}));!function(e){var t=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n._line=t.add.sprite(0,0,"Sprites","slice3",n),n._line.anchor.y=.5,n._lineCropRect=new Phaser.Rectangle(0,0,n.width,n.height),n._line.crop(n._lineCropRect,!1),n._line.alpha=.5,n._line.scale.set(.75),n._leftArrow=t.add.sprite(0,0,"Sprites","Arrow",n),n._rightArrow=t.add.sprite(0,0,"Sprites","Arrow",n),n._rightArrow.scale.x=-1,n._leftArrow.y=n._rightArrow.y=-75,n}return __extends(t,e),t.prototype.line=function(e,t){var i=Phaser.Point.distance(e,t)/.75;this._lineCropRect.width=i,this._line.updateCrop();var n=Phaser.Math.radToDeg(Phaser.Point.angle(e,t));this._line.position.copyFrom(t),this._line.angle=n},t.prototype.updateArrows=function(){var e=this.game.time.time/1e4%360,t=10*Math.sin(Phaser.Math.radToDeg(e));this._leftArrow.position.x=-this.game.width/2+10+t,this._rightArrow.position.x=this.game.width/2-10-t},t}(Phaser.Group);e.Line=t}(JirkaKral||(JirkaKral={}));!function(e){e.SPRITES_BONUS=["Bonus1"],e.SPRITES_BONUS_BURGER_DAY=["Bonus4"],e.SPRITES_LIKE=["Bonus3"],e.SPRITES_DEADLY=["Deadly1"],e.SPRITES_FATTY=["ItemFatty"],e.SPRITES_NIKOL=["ItemNikol1"],e.SPRITES_GEJMR=["ItemGejmr"],e.SPRITES_GOGOMAN=["ItemGogoman"],e.SPRITES_FATTY_BROKEN=["ItemFattyBroken1","ItemFattyBroken2"],e.SPRITE_DEFS={Bonus1:{frameName:"Bonus1",collisions:[{offX:-2,offY:-1,radius:23}],type:2,glow:2,checkScreenBounds:!0},Bonus2:{frameName:"Bonus2",collisions:[{offX:0,offY:20,radius:13},{offX:0,offY:0,radius:13},{offX:0,offY:-29,radius:9}],type:2,glow:2,checkScreenBounds:!0},Bonus3:{frameName:"Bonus3",collisions:[{offX:0,offY:3,radius:23}],type:3,glow:2,checkScreenBounds:!0},Bonus4:{frameName:"Bonus4",collisions:[{offX:-2,offY:-1,radius:26}],type:2,glow:2,checkScreenBounds:!0},Deadly1:{frameName:"Deadly1",collisions:[{offX:0,offY:-1,radius:24}],type:1,glow:1,checkScreenBounds:!0},Hero:{frameName:"Hero",collisions:[{offX:0,offY:-54,radius:35},{offX:0,offY:-12,radius:22}],type:0,glow:0,checkScreenBounds:!1},HeroBurger:{frameName:"HeroBurger",collisions:[{offX:0,offY:-54,radius:35},{offX:0,offY:-12,radius:22}],type:0,glow:0,checkScreenBounds:!1},EnemyFatty:{frameName:"EnemyFatty",collisions:[],type:8,glow:0,checkScreenBounds:!0},EnemyGejmr:{frameName:"EnemyGejmr",collisions:[],type:8,glow:0,checkScreenBounds:!0},EneymyNikol:{frameName:"EnemyNikol",collisions:[],type:8,glow:0,checkScreenBounds:!0},EneymyGogoman:{frameName:"EnemyGogoman",collisions:[],type:8,glow:0,checkScreenBounds:!0},ItemFatty:{frameName:"ItemFatty",collisions:[{offX:-2,offY:-2,radius:28}],type:4,glow:1,checkScreenBounds:!0,xCollisionsToKill:1},ItemFattyBroken1:{frameName:"ItemFattyBroken1",collisions:[{offX:-20,offY:10,radius:10},{offX:-2,offY:20,radius:10},{offX:16,offY:10,radius:10}],type:1,glow:1,checkScreenBounds:!0,xCollisionsToKill:2},ItemFattyBroken2:{frameName:"ItemFattyBroken2",collisions:[{offX:-20,offY:-12,radius:10},{offX:-2,offY:-22,radius:10},{offX:16,offY:-12,radius:10}],type:1,glow:1,checkScreenBounds:!0,xCollisionsToKill:2},ItemGejmr:{frameName:"ItemGejmr",collisions:[{offX:0,offY:-4,radius:28}],type:5,glow:1,checkScreenBounds:!0},ItemNikol1:{frameName:"ItemNikol",collisions:[{offX:-1,offY:3,radius:22},{offX:-1,offY:-8,radius:22}],type:6,checkScreenBounds:!0,glow:2,xCollisionsToKill:4},ItemNikol2:{frameName:"ItemNikol2",collisions:[{offX:-26,offY:-17,radius:11},{offX:-15,offY:10,radius:15},{offX:19,offY:18,radius:9}],type:6,glow:2,checkScreenBounds:!0,xCollisionsToKill:4},ItemGogoman:{frameName:"ItemSiska",collisions:[{offX:0,offY:-3,radius:24}],type:7,glow:1,checkScreenBounds:!0,xCollisionsToKill:4}}}(JirkaKral||(JirkaKral={}));!function(e){var t=function(e){function t(t,i,n,a,s){var r=e.call(this,t,i,n,a)||this;return void 0!==s&&r.setAnchoredFrame(s),r}return __extends(t,e),t.prototype.setAnchoredFrame=function(e){if("string"==typeof this.key){var t=null;"string"==typeof e?(this.frameName=e,t=this.game.cache.getFrameByName(this.key,e)):(this.frame=e,t=this.game.cache.getFrameByIndex(this.key,e)),void 0!==t.anchorX&&void 0!==t.anchorY&&this.anchor.setTo(t.anchorX,t.anchorY)}},t}(Phaser.Sprite);e.AnchoredSprite=t}(JirkaKral||(JirkaKral={}));!function(e){var t=function(t){function i(n){var a=t.call(this,n)||this;a._collisions=[],a._velocityN=new Phaser.Point,a._pt1=new Phaser.Point,a._pt2=new Phaser.Point,a._c=new Phaser.Circle(0,0,0),a._glow=new e.AnchoredSprite(n,0,0,"Sprites"),a.addChild(a._glow),a._sprite=new e.AnchoredSprite(n,0,0,"Sprites"),a.addChild(a._sprite);for(var s=0;s<i.COLLISIONS_MAX;s++)a._collisions.push({offX:0,offY:0,radius:0});return a._collisionsCount=i.COLLISIONS_MAX,a._popTween=n.add.tween(a.scale).to({x:1,y:1},i.POP_TWEEN_DURATION,Helper.Easing.pop5,!1),a}return __extends(i,t),i.prototype.render=function(){for(var e=0;e<this._collisionsCount;e++){var t=this._collisions[e],i=this.scale.x;this._pt1.set(t.offX*i,t.offY*i).rotate(0,0,this.rotation),this._c.setTo(this.x+this._pt1.x,this.y+this._pt1.y,t.radius*i*2),this.game.debug.geom(this._c,"RGBA(0,255,0,1)",!1)}},i.prototype.pop=function(){this.scale.set(0,0),this._popTween.start()},i.prototype.setGlow=function(e){0!==e?(this._glow.exists=!0,this._glow.frameName=1===e?"RedGlow":"GreenGlow",this._glow.anchor.copyFrom(this._sprite.anchor),this._glow.width=3.3*this._sprite.width,this._glow.height=3.3*this._sprite.height,this._glow.alpha=.5):this._glow.exists=!1},i.prototype.setDef=function(e){this._collisionsCount=e.collisions.length;for(var t=0;t<e.collisions.length;t++){var n=e.collisions[t],a=this._collisions[t];a.offX=n.offX,a.offY=n.offY,a.radius=n.radius}this._sprite.setAnchoredFrame(e.frameName),this._checkScreenBounds=e.checkScreenBounds,this._xCollisionsToKill=void 0!==e.xCollisionsToKill?e.xCollisionsToKill:0;var s=e.glow;0!==s&&i.playerInvincible&&(s=2),this.setGlow(s),this._type=e.type,2===e.type||6===e.type||3===e.type?this._collisionType=2:1===e.type||4===e.type||5===e.type||7===e.type?this._collisionType=1:this._collisionType=e.type,this.scale.set(1),this.angle=0,this._particleDelay=1,this._particleTime=0,this.exists=this.visible=!0},i.prototype.setSpeed=function(t,n,a,s){this._velocityN.set(t,n),this._velMagnitude=a,this._angSpeed=s,this._particleDelay=0!==a?i.PARTICLE_TIME*e.Gameplay.ITEM_SPEED_MIN/a:i.PARTICLE_TIME},Object.defineProperty(i.prototype,"type",{get:function(){return this._type},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"collisionType",{get:function(){return this._collisionType},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"velocity",{get:function(){return this._velocityN},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"velMagnitude",{get:function(){return this._velMagnitude},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"showParticle",{get:function(){return this._particleTime<=0&&(this._particleTime=this._particleDelay,!0)},enumerable:!0,configurable:!0}),i.prototype.loadParticleSpwanPt=function(e){return e.set(this.x-30*this._velocityN.x+this.game.rnd.integerInRange(-4,4),this.y-30*this._velocityN.y+this.game.rnd.integerInRange(-4,4)),e},i.prototype.move=function(t){var i=this.game.time.elapsedMS/1e3;if(i=Math.min(50,i),this._particleTime-=i,5===this._type){var n=this._pt1;n.copyFrom(t.pos),n.subtract(this.x,this.y),n.normalize(),n.multiply(e.Gameplay.PICKAXE_TURN_FACTOR,e.Gameplay.PICKAXE_TURN_FACTOR),n.add(this._velocityN.x,this._velocityN.y),n.normalize(),this._velocityN.copyFrom(n),t.passedWall&&(this._type=1,this._velocityN.set(Math.cos(Phaser.Math.degToRad(e.Gameplay.ITEM_ANGLE))*(this._velocityN.x<0?-1:1),Math.sin(e.Gameplay.ITEM_ANGLE)*(this._velocityN.y<0?1:-1)),this._xCollisionsToKill=4)}if(this.x+=this._velocityN.x*this._velMagnitude*i,this.y+=this._velocityN.y*this._velMagnitude*i,this.angle+=this._angSpeed*i,!this._checkScreenBounds)return!0;var a=!1,s=this.game.width/2;return(this.x>s-25&&this._velocityN.x>0||this.x<25-s&&this._velocityN.x<0)&&(this._velocityN.x*=-1,a=!0),s=this.game.height/2,(this.y>s-25&&this._velocityN.y>0||this.y<25-s&&this._velocityN.y<0)&&(this._velocityN.y*=-1,a=!0),!(this._xCollisionsToKill>0&&a&&--this._xCollisionsToKill<=0)},i.prototype.collision=function(e){var t=i.EARLY_EXIT_RADIUS*this.scale.x;if(Phaser.Math.distanceSq(this.x,this.y,e.x,e.y)>t*t)return!1;for(var n=this._pt1,a=this._pt2,s=this.scale.x,r=e.scale.x,o=0;o<this._collisionsCount;o++){var h=this._collisions[o];n.set(h.offX*s,h.offY*s).rotate(0,0,this.rotation).add(this.x,this.y);for(var l=0;l<e._collisionsCount;l++){var u=e._collisions[l];a.set(u.offX*r,u.offY*r).rotate(0,0,this.rotation).add(e.x,e.y);var c=h.radius*s+u.radius*r;if(Phaser.Math.distanceSq(n.x,n.y,a.x,a.y)<=c*c)return!0}}return!1},i.COLLISIONS_MAX=3,i.EARLY_EXIT_RADIUS=150,i.POP_TWEEN_DURATION=250,i.PARTICLE_TIME=.08,i}(Phaser.Group);e.BaseSprite=t}(JirkaKral||(JirkaKral={}));!function(e){var t=function(e){function t(i,n){var a=e.call(this,i,n)||this;a._gradient=new Phaser.Sprite(i,0,0,"Sprites","BgGradient"),a._gradient.anchor.set(.5),a._gradient.width=i.width,a._gradient.height=i.height,a.add(a._gradient);var s=new Phaser.Sprite(i,0,t.LINE_OFFSET,"Sprites","BgBlack");s.anchor.x=.5,s.width=i.width,a.add(s);var r=new Phaser.Sprite(i,0,t.LINE_OFFSET,"Sprites","BgUpperRoom");r.anchor.set(.5,1),a.add(r);var o=new Phaser.Sprite(i,0,i.height/2,"Sprites","BgLowerRoom");return o.anchor.set(.5,1),a.add(o),a._lowerRoom=o,a}return __extends(t,e),t.prototype.resize=function(){this._gradient.height=this.game.height,this._lowerRoom.y=this.game.height/2},t.LINE_OFFSET=0,t.FLOOR_OFFSET=-25,t}(Phaser.Group);e.Background=t}(JirkaKral||(JirkaKral={}));!function(e){var t=function(t){function i(n,a){var s=t.call(this,n,a)||this;return s.onKill=new Phaser.Signal,s.onScore=new Phaser.Signal,s._youtuberArray=[1,2,3],s._hlpPt=new Phaser.Point,s._b=new Phaser.Rectangle(0,0,0,0),s._bottomParticles=new Phaser.Group(n,s),s._line=new e.Line(n,s),s.add(s._line),s._line.visible=!1,s._player=new e.Player(s.game),s.add(s._player),s._player.onInvincibleChange.add(s.onInvincible,s),s._youtuber=new e.Youtuber(s.game,s),s.add(s._youtuber),s._items=new Phaser.Group(n,s),s._items.classType=e.BaseSprite,s._items.createMultiple(i.ITEMS_MAX,"Sprites"),s.createEmitters(),s}return __extends(i,t),i.prototype.render=function(){this._player.render();for(var e=this._items.length-1;e>=0;e--){var t=this._items.getChildAt(e);t.exists&&t.render()}},Object.defineProperty(i.prototype,"freeze",{get:function(){return this._freeze},set:function(e){this._freeze=e},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"player",{get:function(){return this._player},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"youTuber",{get:function(){return this._youtuber},enumerable:!0,configurable:!0}),i.prototype.reset=function(){this._player.resetPlayer(),this._youtuber.resetYT(),this._items.forEach(function(e){e.exists=e.visible=!1},this),this._line.visible=!1,this._spawnListIndex=0,this._spawnTime=e.Gameplay.SPAWN_LIST[this._spawnListIndex++],this._spawnItemsCounter=e.Gameplay.SPAWN_DEADLY_IN_ROW,this._spawnDeadly=!0,this._deadlyTotal=0,this._onScreenLike=null,this._likeSpawnCounter=0,this._youtuberTime=this.game.rnd.integerInRange(e.Gameplay.YOUTUBER_TIME_MIN,e.Gameplay.YOUTUBER_TIME_MAX),Phaser.ArrayUtils.shuffle(this._youtuberArray),this._youtuberIndex=0,e.BaseSprite.playerInvincible=!1,this._freeze=!0,this._scoreParticles.killAllParticles(),this._puffParticles.killAllParticles(),this._trailParticles.killAllParticles()},i.prototype.createEmitters=function(){var e=new Particles.ParticlesEmitter(this.game,0,0,12);e.lifetime=1,e.setYSpeed(-100,-100),e.setXSpeed(-50,50),e.setAlpha(2,2),e.setAlphaChange(Particles.eParameterChangeType.IN_TIME,-2,1),e.setScaleChange(Particles.eParameterChangeType.IN_TIME,-.75,1),e.makeParticles("Sprites",null,12),this.add(e),this._scoreParticles=e,(e=new Particles.ParticlesEmitter(this.game,0,0,8)).particleClass=Particles.AnimatedParticle,e.lifetime=.2,e.makeParticles("Sprites","puff",8,[i.ANIM_PUFF]),this.add(e),this._puffParticles=e,(e=new Particles.ParticlesEmitter(this.game,0,0,64)).lifetime=.35,e.makeParticles("Sprites","TrailParticle",64),e.setScaleChange(Particles.eParameterChangeType.IN_TIME,-2,e.lifetime),e.setAlpha(1.1,1.1),e.setAlphaChange(Particles.eParameterChangeType.IN_TIME,-1.5,e.lifetime),this._bottomParticles.add(e),this._trailParticles=e},i.prototype.emitScoreParticle=function(e,t){this._scoreParticles.emitAtObject(e);var i=this._scoreParticles.emitParticle();null!==i&&(i.visual.frameName=t)},i.prototype.updateBoard=function(){if(!this._freeze){this._line.visible=!1,this._player.move();for(var t=this._items.length-1;t>=0;t--){var i=this._items.getChildAt(t);i.exists&&(this._player.collision(i)&&(this._player.invincible||2===i.collisionType?(3===i.type?(this._onScreenLike=null,Utils.AudioUtils.playSoundRnd(e.Play.SND_LAJK)):6===i.type?(this._player.setInvincible(),Utils.AudioUtils.playSoundRnd(e.Play.SND_POWERUP)):(1===i.type&&(--this._deadlyTotal,this._deadlyTotal<e.Gameplay.DEADLY_MIN&&(this._spawnTime=500)),Utils.AudioUtils.playSoundRnd(e.Play.SND_PICK)),2===i.collisionType||3===i.type?(this.onScore.dispatch(10),this.emitScoreParticle(i.position,"ParticleScore10")):(this.onScore.dispatch(5),this.emitScoreParticle(i.position,"ParticleScore5")),i.exists=i.visible=!1):1===i.collisionType&&(this._freeze=!0,Utils.AudioUtils.playSoundRnd(e.Play.SND_OPPS),this.onKill.dispatch())),i.move(this._player)?i.velMagnitude>0&&i.showParticle&&(this._trailParticles.emitAtObject(i.loadParticleSpwanPt(this._hlpPt)),this._trailParticles.emitParticle()):(4===i.type?this.spawnBrokenDoughnut(i):(this._puffParticles.emitAtObject(i.position),this._puffParticles.emitParticle()),i.exists=i.visible=!1),i.exists&&5===i.type&&(this._line.visible=!0,this._line.line(i.position,this._player.pos),this._line.updateArrows()))}this.spawnFlying(),this.spawnLikes(),this.spawnYoutubers()}},i.prototype.getFreeItem=function(){var e=this._items.getFirstExists(!1);return null===e?null:e},i.prototype.spawnBrokenDoughnut=function(t){for(var i=this._hlpPt,n=1;n<=2;n++){var a=this.getFreeItem();null!==a&&(i.copyFrom(t.velocity),i.rotate(0,0,e.Gameplay.DOUGHNUT_ANGLE*(2*n-3),!0),a.position.copyFrom(t.position),a.setDef(e.SPRITE_DEFS["ItemFattyBroken"+n]),a.setSpeed(i.x,i.y,t.velMagnitude,this.game.rnd.integerInRange(e.Gameplay.ITEM_ANG_SPEED_MAX,2*e.Gameplay.ITEM_ANG_SPEED_MAX)*this.game.rnd.sign()))}},i.prototype.spawnYoutubers=function(){if(this._youtuber.ready&&!((this._youtuberTime-=this.game.time.elapsedMS)>0)){if(this._youtuberIndex>=this._youtuberArray.length){var t=this._youtuberArray[this._youtuberArray.length-1];do{Phaser.ArrayUtils.shuffle(this._youtuberArray)}while(this._youtuberArray[0]===t);this._youtuberIndex=0}var i=this._youtuberArray[this._youtuberIndex++];this._youtuberTime=this.game.rnd.integerInRange(e.Gameplay.YOUTUBER_TIME_MIN,e.Gameplay.YOUTUBER_TIME_MAX),this._youtuber.show(i)}},i.prototype.spawnLikes=function(){if(null===this._onScreenLike&&(this._likeSpawnCounter-=this.game.time.elapsedMS)<=0){var t=this.getFreeItem();if(null===t)return;var i=e.Background.FLOOR_OFFSET-100-40*this.game.rnd.integerInRange(0,3),n=this.game.rnd.integerInRange(-this.game.width/2+50,this.game.width/2-50);t.position.set(n,i);var a=e.SPRITES_LIKE,s=e.SPRITE_DEFS[a[this.game.rnd.integerInRange(0,a.length-1)]];t.setDef(s),t.setSpeed(0,0,0,0),t.pop(),this._onScreenLike=t,this._likeSpawnCounter=this.game.rnd.integerInRange(e.Gameplay.LIKE_SPAWN_MIN,e.Gameplay.LIKE_SPAWN_MAX)}},i.prototype.spawnFlying=function(){if(!((this._spawnTime-=this.game.time.elapsedMS)>0)){var t=this._spawnDeadly&&this._deadlyTotal<e.Gameplay.DEADLY_MAX;t&&++this._deadlyTotal,this._spawnListIndex>=e.Gameplay.SPAWN_LIST.length&&(this._spawnListIndex=e.Gameplay.SPAWN_LIST.length-1),this._spawnTime=e.Gameplay.SPAWN_LIST[this._spawnListIndex++],this._deadlyTotal<e.Gameplay.DEADLY_MIN&&(this._spawnTime=500),--this._spawnItemsCounter<=0&&(this._spawnDeadly=!this._spawnDeadly,this._spawnItemsCounter=this._spawnDeadly?e.Gameplay.SPAWN_DEADLY_IN_ROW:e.Gameplay.SPAWN_BONUSES_IN_ROW);var i=this.getFreeItem();if(null!==i){var n=this.game.rnd.sign(),a=(this.game.height/2-50)*n;i.position.set(0,a);var s=t?e.SPRITES_DEADLY:e.Gameplay.BURGER_DAY?e.SPRITES_BONUS_BURGER_DAY:e.SPRITES_BONUS,r=e.SPRITE_DEFS[s[this.game.rnd.integerInRange(0,s.length-1)]];i.setDef(r);var o=Math.cos(Phaser.Math.degToRad(e.Gameplay.ITEM_ANGLE))*this.game.rnd.sign(),h=Math.sin(e.Gameplay.ITEM_ANGLE)*n,l=this.game.rnd.integerInRange(e.Gameplay.ITEM_ANG_SPEED_MIN,e.Gameplay.ITEM_ANG_SPEED_MAX);t&&(l*=2,l+=Phaser.Math.sign(l)*e.Gameplay.ITEM_ANG_SPEED_MAX),i.setSpeed(o,h,this.game.rnd.integerInRange(e.Gameplay.ITEM_SPEED_MIN,e.Gameplay.ITEM_SPEED_MAX),l),i.pop()}}},i.prototype.onInvincible=function(t){for(var i=this._items.length-1;i>=0;i--){var n=this._items.getChildAt(i);e.BaseSprite.playerInvincible=t,n.exists&&(t?2!==n.collisionType&&1!==n.collisionType||n.setGlow(2):2===n.collisionType?n.setGlow(2):1===n.collisionType&&n.setGlow(1))}},i.ANIM_PUFF=[{name:"puff",frameRate:20,loop:!1,killOnComplete:!0,frames:["ParticlePuff0","ParticlePuff1","ParticlePuff2","ParticlePuff3"]}],i.ITEMS_MAX=16,i}(Phaser.Group);e.Board=t}(JirkaKral||(JirkaKral={}));!function(e){var t=function(){function e(e){var t=2-4*(1+e),i=Math.sqrt(t*t-4);this._a=Math.min((-t+i)/-2,(-t-i)/-2),this._b=1-this._a}return e.prototype.getY=function(e){return this._a*e*e+this._b*e},e}();e.Curve=t}(JirkaKral||(JirkaKral={}));!function(e){var t=function(t){function i(i){var n=t.call(this,i)||this;n.onInvincibleChange=new Phaser.Signal,n._scaleUpTweens=[],n._scaleDownTweens=[];var a="Hero";return e.Gameplay.BURGER_DAY&&(a="HeroBurger"),n._player1=new e.BaseSprite(i),n._player1.setDef(e.SPRITE_DEFS[a]),n.add(n._player1),n._player2=new e.BaseSprite(i),n._player2.setDef(e.SPRITE_DEFS[a]),n.add(n._player2),n.resetPlayer(),n}return __extends(i,t),i.prototype.render=function(){this._player1.render(),this._player2.exists&&this._player2.render()},i.prototype.resetPlayer=function(){this._player2.exists=this._player2.visible=!1,this._dir=1,this._passedWall=!1,this._player1.position.set(0,e.Background.FLOOR_OFFSET),this._player1.scale.set(1),this._player2.position.set(0,e.Background.FLOOR_OFFSET),this._player2.scale.set(1),this._turnTimeCurrent=0,this._player1.angle=0,this._player2.angle=0,this._jumpTime=0,this._jumpAllowed=!0,this._velY=0;for(var t=0;t<this._scaleUpTweens.length;t++)this._scaleUpTweens[t].stop(),this._scaleDownTweens[t].stop();this._scaleUpTweens[0]=this.game.add.tween(this._player1.scale).to({x:2,y:2},e.Gameplay.SCALE_TIME,Helper.Easing.overshoot,!1),this._scaleUpTweens[1]=this.game.add.tween(this._player2.scale).to({x:2,y:2},e.Gameplay.SCALE_TIME,Helper.Easing.overshoot,!1),this._scaleDownTweens[0]=this.game.add.tween(this._player1.scale).to({x:2.2,y:2.2},250,Helper.Easing.sin,!1,0,3),this._scaleDownTweens[0].to({x:1,y:1},e.Gameplay.SCALE_TIME,function(e){return 1-Helper.Easing.overshoot(1-e)},!1),this._scaleDownTweens[0].onComplete.add(function(){this._invincible=!1},this),this._scaleDownTweens[1]=this.game.add.tween(this._player2.scale).to({x:2.2,y:2.2},250,Helper.Easing.sin,!1,0,3),this._scaleDownTweens[1].to({x:1,y:1},e.Gameplay.SCALE_TIME,function(e){return 1-Helper.Easing.overshoot(1-e)},!1),this._invincible=!1},Object.defineProperty(i.prototype,"velY",{get:function(){return this._velY},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"pos",{get:function(){return this._player1.position},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"passedWall",{get:function(){return this._passedWall},enumerable:!0,configurable:!0}),i.prototype.handleInput=function(t,n,a){t&&(this._dir*=-1,this._fromAngle=this._player1.angle,this._toAngle=-i.TURN_ANGLE*this._dir,this._turnTimeMax=i.TURN_TIME/(2*i.TURN_ANGLE)*Math.abs(this._fromAngle-this._toAngle),this._turnTimeCurrent=this._turnTimeMax,this._turnFirstHalf=!0),n&&this._jumpAllowed&&this.game.time.now>this._jumpTime&&(this._velY=i.JUMP_VELOCITY_MAX,this._jumpTime=this.game.time.now+150,this._jumpAllowed=!1,Utils.AudioUtils.playSoundRnd(e.Play.SND_HOP)),a&&this.velY<i.JUMP_VELOCITY_MIN&&(this._velY=i.JUMP_VELOCITY_MIN)},i.prototype.move=function(){this._passedWall=!1,this.updateScale(),this.updateTurn(),this.updateJump(),this._player1.x+=this._dir*e.Gameplay.PLAYER_SPEED*this.game.time.elapsedMS/1e3;var t=this._player1.width/2,i=-this.game.width/2,n=this.game.width/2;this._player1.x<i-t?(this._player1.x+=this.game.width,this._player2.exists=this._player2.visible=!1,this._passedWall=!0):this._player1.x<i+t?(this._player2.exists=this._player2.visible=!0,this._player2.x=this._player1.x+this.game.width):this._player1.x>n+t?(this._player1.x-=this.game.width,this._player2.exists=this._player2.visible=!1,this._passedWall=!0):this._player1.x>n-t?(this._player2.exists=this._player2.visible=!0,this._player2.x=this._player1.x-this.game.width):this._player2.exists=this._player2.visible=!1},i.prototype.updateScale=function(){this._invincible&&(this._invincibleDuration-=this.game.time.elapsedMS)<=0&&(this._scaleDownTweens[0].start(),this._scaleDownTweens[1].start(),this.onInvincibleChange.dispatch(!1))},i.prototype.updateTurn=function(){if(!(this._turnTimeCurrent<=0)){this._turnTimeCurrent=Math.max(0,this._turnTimeCurrent-this.game.time.elapsedMS);var e=1-this._turnTimeCurrent/this._turnTimeMax;e=this._turnFirstHalf?Math.sin(e*Math.PI/2):1-Math.cos(e*Math.PI/2);var t=Phaser.Math.linear(this._fromAngle,this._toAngle,e);this._player1.angle=t,this._player2.angle=t,this._turnTimeCurrent<=0&&this._turnFirstHalf&&(this._fromAngle=t,this._toAngle=0,this._turnTimeMax=i.TURN_TIME/(2*i.TURN_ANGLE)*Math.abs(this._fromAngle-this._toAngle),this._turnTimeCurrent=this._turnTimeMax,this._turnFirstHalf=!1)}},i.prototype.updateJump=function(){if(Math.abs(this._player1.y-e.Background.FLOOR_OFFSET)<1e-4&&this.velY>=0)this._jumpAllowed=!0;else{var t=this._player1.y,n=this.game.time.elapsedMS/1e3;t+=this._velY*n,this._velY+=i.JUMP_GRAVITY*n,t=Math.min(e.Background.FLOOR_OFFSET,t),this._player1.y=t,this._player2.y=t}},Object.defineProperty(i.prototype,"invincible",{get:function(){return this._invincible},enumerable:!0,configurable:!0}),i.prototype.setInvincible=function(){this._invincible||(this._invincible=!0,this._invincibleDuration=e.Gameplay.INVINCIBLE_DURATION,this._scaleUpTweens[0].start(),this._scaleUpTweens[1].start(),this.onInvincibleChange.dispatch(!0))},i.prototype.collision=function(e){return this._player1.collision(e)||this._player2.exists&&this._player2.collision(e)},i.TURN_ANGLE=20,i.TURN_TIME=250,i.JUMP_VELOCITY_MAX=-1e3,i.JUMP_VELOCITY_MIN=-400,i.JUMP_GRAVITY=4e3,i}(Phaser.Group);e.Player=t}(JirkaKral||(JirkaKral={}));!function(e){var t=function(t){function i(i){var n=t.call(this,i)||this;n._tutGroup=new Phaser.Group(i,n);var a=i.add.sprite(0,0,"Sprites","BgGradient",n._tutGroup);a.width=i.width,a.height=i.height,a.alpha=.9,a.anchor.set(.5,1),n._bg=a,n._ltouch=new e.AnchoredSprite(i,0,0,"Sprites","touch"),n._rtouch=new e.AnchoredSprite(i,0,0,"Sprites","touch"),n._lhand=new e.AnchoredSprite(i,-220,0,"Sprites","ruka"),n._tutGroup.add(n._lhand),n._lhand.addChild(n._ltouch),n._licon=new e.AnchoredSprite(i,-160,-320,"Sprites","slice1"),n._tutGroup.add(n._licon),n._rhand=new e.AnchoredSprite(i,220,0,"Sprites","ruka"),n._rhand.scale.x=-1,n._tutGroup.add(n._rhand),n._rhand.addChild(n._rtouch),n._ricon=new e.AnchoredSprite(i,160,-320,"Sprites","slice2"),n._tutGroup.add(n._ricon),n._ltouch.position.set(90,-210),n._rtouch.position.set(90,-210);var s=i.add.sprite(0,0,"Sprites","slice3",n);return s.anchor.set(1,.5),s.width=i.height,s.angle=90,n._line=s,n}return __extends(i,t),i.prototype.tween=function(){this._tutGroup.visible=!0,this.game.tweens.removeFrom(this);var e=-320- -320/1073*this.game.height;this._line.y=0,this._lhand.position.set(-220,0-e),this._licon.position.set(-160,-320-e),this._rhand.position.set(220,0-e),this._ricon.position.set(160,-320-e),this._ltouch.position.set(90,-210),this._rtouch.position.set(90,-210),this.bgVisible(!0),this._tutGroup.alpha=1,this.game.add.tween(this._lhand).from({y:290},500,Phaser.Easing.Sinusoidal.Out,!0),this.game.add.tween(this._rhand).from({y:290},500,Phaser.Easing.Sinusoidal.Out,!0).onComplete.add(function(){this._ltouch.alpha=this._rtouch.alpha=1},this);var t=this.game.add.tween(this._licon).to({y:this._licon.y-70},500,function(e){return Math.sin(Math.PI*e)},!0,750,-1);t.repeatDelay(500),this.game.add.tween(this._ricon).to({x:this._ricon.x-20},2e3,function(e){return Math.sin(2*Math.PI*e)},!0,750,-1),(t=this.game.add.tween(this._ltouch.scale).to({x:1.4,y:1.4},500,Phaser.Easing.Linear.None,!0,500,-1)).repeatDelay(1e3),(t=this.game.add.tween(this._ltouch).to({alpha:0},500,Phaser.Easing.Linear.None,!0,500,-1)).repeatDelay(1e3),(t=this.game.add.tween(this._rtouch.scale).to({x:1.4,y:1.4},500,Phaser.Easing.Linear.None,!0,500,-1)).repeatDelay(1e3),(t=this.game.add.tween(this._rtouch).to({alpha:0},500,Phaser.Easing.Linear.None,!0,500,-1)).repeatDelay(1e3),this._ltouch.alpha=this._rtouch.alpha=0},i.prototype.bgVisible=function(e){this._bg.visible=e},i.prototype.halfLine=function(){var e=this._line.width;this._line.y=e-this.game.height/2+20},i.prototype.fadeOutWithDelay=function(e){this.game.add.tween(this._tutGroup).to({alpha:0},1e3,Phaser.Easing.Linear.None,!0,e).onComplete.add(function(){this._tutGroup.visible=!1},this)},i.prototype.tutGroupVisible=function(e){this._tutGroup.visible=e},i}(Phaser.Group);e.Tutorial=t}(JirkaKral||(JirkaKral={}));!function(e){var t=function(t){function i(e,i){var n=t.call(this,e,0,0,"Sprites")||this;return n._appearTween=null,n._appearTurnTween=null,n._hideTween=null,n._hideTurnTween=null,n._hlpPt=new Phaser.Point,n._board=i,n._popTween=e.add.tween(n.scale).to({x:1.1,y:1.1},150,Helper.Easing.halfSin,!1),n.resetYT(),n}return __extends(i,t),i.prototype.resetYT=function(){this.exists=!1,this._ready=!0,null!==this._appearTween&&this._appearTween.isRunning&&this._appearTween.stop(),null!==this._hideTween&&this._hideTween.isRunning&&this._hideTween.stop();var e=this.game.add.tween(this).to({x:i.ONSCREEN_X},i.APPEAR_TIME,Phaser.Easing.Sinusoidal.Out,!1);e.onComplete.add(function(){this.game.time.events.add(i.STAY_TIME/2,function(){this.throw(),this._popTween.start(),this.game.time.events.add(i.STAY_TIME/2,function(){this._hideTween.start(),this._hideTurnTween.start()},this)},this)},this),this._appearTween=e,this._appearTurnTween=this.game.add.tween(this).to({angle:i.ONSCREEN_ANGLE},1.05*i.APPEAR_TIME,Helper.Easing.overshoot,!1);var t=this.game.add.tween(this).to({x:3*i.OFFSCREEN_X},i.HIDE_TIME,Phaser.Easing.Sinusoidal.In,!1,.25*i.HIDE_TIME);t.onComplete.add(function(){this._ready=!0},this),this._hideTween=t,this._hideTurnTween=this.game.add.tween(this).to({angle:2*i.OFFSCREEN_ANGLE},.85*i.HIDE_TIME,function(e){return 1-Helper.Easing.overshoot(1-e)},!1)},Object.defineProperty(i.prototype,"ready",{get:function(){return this._ready},enumerable:!0,configurable:!0}),i.prototype.show=function(e){this._youtuber=e,this.position.set(i.OFFSCREEN_X,this.game.height/2-50),this.setAnchoredFrame(i.FRAMES[e]),this.angle=i.OFFSCREEN_ANGLE,this.exists=!0,this._ready=!1,this._appearTween.start(),this._appearTurnTween.start()},i.prototype.throw=function(){var t=this._board.getFreeItem();if(null!==t){var n=i.THROW_ITEMS[this._youtuber],a=e.SPRITE_DEFS[n[this.game.rnd.integerInRange(0,n.length-1)]];t.setDef(a);var s=this.x+i.THROW_ITEM_OFFSET.x,r=this.y+i.THROW_ITEM_OFFSET.y;t.position.set(s,r);var o=this._board.player.pos,h=this._hlpPt;switch(this._youtuber){case 0:h.set(o.x-this.x,o.y-this.y),h.normalize(),t.setSpeed(h.x,h.y,this.game.rnd.integerInRange(e.Gameplay.ITEM_SPEED_MIN,e.Gameplay.ITEM_SPEED_MAX),this.game.rnd.integerInRange(e.Gameplay.ITEM_ANG_SPEED_MIN,e.Gameplay.ITEM_ANG_SPEED_MAX));break;case 1:h.set(this.game.rnd.integerInRange(-this.game.width/2+50,this.game.width/2-50)-this.x,o.y-this.y),h.normalize(),t.setSpeed(h.x,h.y,this.game.rnd.integerInRange(e.Gameplay.ITEM_SPEED_MIN,e.Gameplay.ITEM_SPEED_MAX),this.game.rnd.integerInRange(e.Gameplay.ITEM_ANG_SPEED_MIN,e.Gameplay.ITEM_ANG_SPEED_MAX)),Utils.AudioUtils.playSoundRnd(e.Play.SND_NIKOL);break;case 2:h.set(o.x-this.x,o.y-this.y),h.normalize(),t.setSpeed(h.x,h.y,.75*e.Gameplay.ITEM_SPEED_MIN,this.game.rnd.integerInRange(e.Gameplay.ITEM_ANG_SPEED_MAX,2*e.Gameplay.ITEM_ANG_SPEED_MAX)*this.game.rnd.sign()),Utils.AudioUtils.playSoundRnd(e.Play.SND_ENEMY_THROW);break;case 3:h.set(o.x-this.x,o.y-this.y),h.normalize(),t.setSpeed(h.x,h.y,1.25*this.game.rnd.integerInRange(e.Gameplay.ITEM_SPEED_MIN,e.Gameplay.ITEM_SPEED_MAX),1.25*this.game.rnd.integerInRange(e.Gameplay.ITEM_ANG_SPEED_MIN,e.Gameplay.ITEM_ANG_SPEED_MAX)),Utils.AudioUtils.playSoundRnd(e.Play.SND_ENEMY_THROW)}t.pop()}},i.FRAMES=["EnemyFatty","EnemyNikol","EnemyGejmr","EnemyGogoman"],i.THROW_ITEMS=[e.SPRITES_FATTY,e.SPRITES_NIKOL,e.SPRITES_GEJMR,e.SPRITES_GOGOMAN],i.OFFSCREEN_X=-380,i.OFFSCREEN_ANGLE=-20,i.ONSCREEN_X=-180,i.ONSCREEN_ANGLE=10,i.APPEAR_TIME=750,i.STAY_TIME=2e3,i.HIDE_TIME=1500,i.THROW_ITEM_OFFSET=new Phaser.Point(20,-90),i}(e.AnchoredSprite);e.Youtuber=t}(JirkaKral||(JirkaKral={}));!function(e){var t=function(e){function t(){var t=e.call(this)||this;return t._userScale=new Phaser.Point(1,1),t._gameDims=new Phaser.Point,t._forceResize=!0,t}return __extends(t,e),t.prototype.init=function(){this.input.maxPointers=2,this.stage.disableVisibilityChange=!0,this.calcGameDims(),this.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.scale.setGameSize(this._gameDims.x,this._gameDims.y),this.scale.setUserScale(this._userScale.x,this._userScale.y),this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.scale.setResizeCallback(this.gameResized,this),this.game.device.desktop||this.scale.onOrientationChange.add(this.orientationChange,this)},t.prototype.create=function(){this.game.state.start("Preloader",!0,!1)},t.prototype.calcGameDims=function(){var e=window.innerWidth,t=window.innerHeight;(e>t||this.game.device.desktop)&&(e=t*(640/1073));var i=(e+.01)/App.Global.GAME_WIDTH,n=Math.round(t/(e/App.Global.GAME_WIDTH)),a=(t+.01)/n;this._userScale.set(i,a),this._gameDims.set(App.Global.GAME_WIDTH,n)},t.prototype.gameResized=function(e,t){if(!e.incorrectOrientation){var i=this._userScale.x,n=this._userScale.y;this.calcGameDims();var a=this._gameDims,s=this._userScale;if(a.x!==this.game.width||a.y!==this.game.height||Math.abs(s.x-i)>.001||Math.abs(s.y-n)>.001||this._forceResize){this._forceResize=!1,this.scale.setGameSize(a.x,a.y),this.scale.setUserScale(s.x,s.y);var r=this.game.state.getCurrentState();"function"==typeof r.onResize&&r.onResize(a.x,a.y)}}},t.prototype.orientationChange=function(e,t,i){},t}(Phaser.State);e.Boot=t}(JirkaKral||(JirkaKral={}));!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e._restartCounter=2,e}return __extends(i,t),i.prototype.onResize=function(e,t){this.setView(e,t),this._gradient.width=this.game.width,this._gradient.height=this.game.height+2,this._line.width=this.game.width,this._jirka.x=this.game.width/2,this._duck.position.set(this._jirka.x-400,this._jirka.y-163)},i.prototype.setView=function(e,t){this.world.setBounds(-e/2,-t/2,e/2,t/2),this.camera.focusOnXY(0,0)},i.prototype.create=function(){this._once=!1,this._pressed=!1,this.game.input.onDown.add(function(){this._pressed=!0},this),this._space=this.input.keyboard.addKey(Phaser.KeyCode.SPACEBAR);var t=new Phaser.Sprite(this.game,0,0,"Sprites","BgGradient");t.anchor.set(.5),t.width=this.game.width,t.height=this.game.height+2,this.world.add(t),this._gradient=t;var i=new Phaser.Sprite(this.game,0,440,"Sprites","BgBlack");i.anchor.x=.5,i.width=this.game.width,this.world.add(i),this._line=i,this._jirka=new e.AnchoredSprite(this.game,this.game.width/2,0,"Sprites","Jirka"),this.world.add(this._jirka),this._duck=new e.AnchoredSprite(this.game,this._jirka.x-400,this._jirka.y-163,"Sprites","Kachna"),this.world.add(this._duck),this.setView(this.game.width,this.game.height)},i.prototype.onGameeRestart=function(){--this._restartCounter<=0&&(this._pressed=!0)},i.prototype.onGameeButtonDown=function(e){this._pressed=!0},i.prototype.update=function(){this._once||(this._space.justDown&&(this._pressed=!0),this._pressed&&(this._once=!0,App.Global.GAMEE&&Gamee.Gamee.instance.gameStart(),this.game.state.start("Play")))},i}(Phaser.State);e.Menu=t}(JirkaKral||(JirkaKral={}));!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e._ready=!1,e}return __extends(i,t),i.prototype.preload=function(){var t="assets/sfx/";if(this.game.device.ie||Phaser.Device.isAndroidStockBrowser()){for(var i in e.Sounds.AUDIO_JSON.spritemap)this.load.audio(i,t+i+".mp3");this.load.audio("Music",t+"music.mp3")}else{var n=0;this.game.device.iOS&&(n=.1);var a=0;for(var i in e.Sounds.AUDIO_JSON.spritemap){var s=e.Sounds.AUDIO_JSON.spritemap[i];0!==a&&(s.start-=n),++a}this.load.audiosprite("Sfx",e.Sounds.AUDIO_JSON.resources,null,e.Sounds.AUDIO_JSON),this.load.audio("Music",[t+"music.ogg",t+"music.m4a"])}t="assets/",this.load.atlas("Sprites",t+"Sprites.png",t+"Sprites.json"),this.load.json("Config",t+"config.json")},i.prototype.loadUpdate=function(){this.setLoadingText(this.load.progress)},i.prototype.create=function(){this.readConfig();var t=this.add.audio("Music");if(t.volume=.65,Utils.AudioUtils.addMusic("Music",t),this.game.device.ie||Phaser.Device.isAndroidStockBrowser()){Utils.AudioUtils.setSounds(null);for(var i in e.Sounds.AUDIO_JSON.spritemap){(a=this.add.audio(i)).allowMultiple=!0,Utils.AudioUtils.addSound(i,a)}}else{var n=this.add.audioSprite("Sfx");for(var i in e.Sounds.AUDIO_JSON.spritemap){var a;(a=n.sounds[i]).allowMultiple=!0}Utils.AudioUtils.setSounds(n)}},i.prototype.readConfig=function(){var t=this.game.cache.getJSON("Config");for(var i in t)e.Gameplay[i]=t[i]},i.prototype.update=function(){!1===this._ready&&(this._ready=!0,this.game.state.start("Play"))},i.prototype.setLoadingText=function(e){},i}(Phaser.State);e.Preloader=t}(JirkaKral||(JirkaKral={}));!function(e){var t=function(t){function i(){var e=t.call(this)||this;return e._gameOver=!1,e._runFromRestart=!1,e._showTutorialJump=!0,e._showTutorialMove=!0,e._tutorial=null,e._tutorialOn=!0,e._tutorialFirstTime=!0,e._waitForStart=!1,e}return __extends(i,t),i.prototype.onResize=function(e,t){this.setView(e,t),this._bg.resize()},i.prototype.setView=function(e,t){this.world.setBounds(-e/2,-t/2,e/2,t/2),this.camera.focusOnXY(0,0)},i.prototype.create=function(){this.setView(this.game.width,this.game.height),this.stage.backgroundColor=16711680,this._buttonChangeDir=this.game.input.keyboard.addKey(Phaser.KeyCode.X),this._buttonJump=this.game.input.keyboard.addKey(Phaser.KeyCode.Z);var t=this.game.input.keyboard.addKey(Phaser.KeyCode.LEFT);t.onDown.add(function(){this._inputJumpDown=!0},this),t.onUp.add(function(){this._inputJumpUp=!0},this);this.game.input.keyboard.addKey(Phaser.KeyCode.RIGHT).onDown.add(function(){this._inputChangeDir=!0},this),this.game.input.onDown.add(this.inputDown,this),this.game.input.onUp.add(this.inputUp,this),this._bg=new e.Background(this.game,this.world),this._board=new e.Board(this.game,this.world),this._board.onKill.add(this.setGameOver,this),this._board.onScore.add(this.onScore,this),this._tutorial=new e.Tutorial(this.game),this.reset()},i.prototype.onGameePause=function(){this.game.paused=!0},i.prototype.onGameeUnpause=function(){this.game.paused=!1},i.prototype.onGameeRestart=function(){App.Global.game.paused=!1,Gamee.Gamee.instance.gameOver(),this.reset()},i.prototype.reset=function(){this._gameOver=!1,this._buttonChangeDir.justDown,this._buttonJump.justDown,this._inputChangeDir=this._inputJumpDown=!1,this._board.reset(),this._showTutorialJump||this._showTutorialMove?(this._tutorial.position.set(0,this.game.height/2),this._tutorial.tween(),this.world.add(this._tutorial),this._tutorialOn=!0):this._tutorialOn=!1,this._scoreTime=0,this._score=0,App.Global.GAMEE&&(Gamee.Gamee.instance.score=0),Utils.AudioUtils.stopMusic(),Utils.AudioUtils.playMusic("Music"),this._waitForStart=!0},i.prototype.inputDown=function(e){e.position.x<this.game.width/2?this._inputJumpDown=!0:this._inputChangeDir=!0},i.prototype.inputUp=function(e){e.position.x<this.game.width/2&&(this._inputJumpUp=!0)},i.prototype.update=function(){this._gameOver||((App.Global.GAMEE&&!Gamee.Gamee.instance.gameRunning||this._waitForStart)&&(this._buttonJump.justDown||this._inputJumpDown||this._inputChangeDir||this._buttonChangeDir.justDown)&&(this._waitForStart=!1,this._inputJumpDown=!1,this._inputChangeDir=!1,this._buttonJump.justDown,this._buttonChangeDir.justDown,this._board.freeze=!1,Gamee.Gamee.instance.gameStart()),(!App.Global.GAMEE||App.Global.GAMEE&&Gamee.Gamee.instance.gameRunning)&&(this.handleInput(),this._board.updateBoard(),this._tutorialOn&&!this._board.freeze&&(this._tutorialFirstTime?(this._tutorialFirstTime=!1,this._tutorial.bgVisible(!1),this._tutorial.halfLine(),this._tutorial.fadeOutWithDelay(e.Gameplay.TUTORIAL_FADE_DELAY)):(this._tutorial.halfLine(),this._tutorial.tutGroupVisible(!1)),this._tutorialOn=!1),(this._scoreTime+=this.game.time.elapsedMS)>=e.Gameplay.SCORE_FOR_MILLIS&&(this._scoreTime=this._scoreTime%e.Gameplay.SCORE_FOR_MILLIS,this.onScore(1))))},i.prototype.handleInput=function(){if(this._inputJumpDown=this._buttonJump.justDown||this._inputJumpDown,this._inputJumpUp=this._buttonJump.justUp||this._inputJumpUp,this._board.freeze)(this._inputChangeDir||this._buttonChangeDir.justDown||this._inputJumpDown)&&(this._board.freeze=!1,this._inputJumpDown=!1,this._inputJumpUp=!1);else{var e=this._inputChangeDir||this._buttonChangeDir.justDown;this._inputJumpDown,this._board.player.handleInput(e,this._inputJumpDown,this._inputJumpUp),this._inputJumpUp&&(this._inputJumpDown=!1),this._board.player.velY<=0&&(this._inputJumpDown=!1),this._inputJumpUp=!1,this._inputChangeDir=!1}},i.prototype.setGameOver=function(){this._gameOver||(this._gameOver=!0,Utils.AudioUtils.stopMusic(),this.tweens.removeFrom(this._board.youTuber),this.time.events.removeAll(),this.time.events.add(500,function(){App.Global.GAMEE?(this._runFromRestart=!0,Gamee.Gamee.instance.gameOver()):this.reset()},this))},i.prototype.onScore=function(e){this._score+=e,App.Global.GAMEE&&(Gamee.Gamee.instance.score=this._score)},i.SND_NIKOL=["blondyna_1","blondyna_1"],i.SND_HOP=["skok_2","skok_4"],i.SND_LAJK=["lek_1","lek_5","lek_11"],i.SND_OPPS=["predmet_3","predmet_4"],i.SND_POWERUP=["zvetseni_1","zvetseni_4"],i.SND_PICK=["positive_3"],i.SND_ENEMY_THROW=["ajaj_2","ajaj_5"],i.DEBUG=!1,i}(Phaser.State);e.Play=t}(JirkaKral||(JirkaKral={}));var App;!function(e){var t=function(){function e(){}return e.GAMEE=!0,e.DEBUG_GAMEE=!1,e.game=null,e.GAME_WIDTH=640,e.GAME_HEIGHT=1073,e.MAX_GAME_WIDTH=640,e.MAX_GAME_HEIGHT=640,e.scaleX=1,e.scaleY=1,e.correctOrientation=!1,e.musicOn=!0,e.soundOn=!0,e.showLanguages=!1,e.supportedLanguages=["en"],e.currentLanguage="en",e}();e.Global=t}(App||(App={}));var PhaserGlobal={stopFocus:!0};window.onload=function(){var e=new JirkaKral.Game;if(App.Global.game=e,App.Global.GAMEE){new Gamee.Gamee("OneButton",!0).setGame(e)}};!function(e){var t=function(t){function i(){var n=this,a=(window.innerWidth,window.innerHeight,Phaser.AUTO);return n=t.call(this,{width:1,height:1,renderer:a,parent:"content",transparent:!1,antialias:!0,physicsConfig:null,preserveDrawingBuffer:!0})||this,i.game=n,Utils.PhaserUtils.ChangeAnimationPhaserJSONData(n.additionalFrameProperties),Utils.PhaserUtils.AdjustTweenFunctions(),Utils.PhaserUtils.AddBitmapFontAddMethod(),n.state.add("Boot",e.Boot),n.state.add("Preloader",e.Preloader),n.state.add("Menu",e.Menu),n.state.add("Play",e.Play),n.state.start("Boot"),n}return __extends(i,t),i.prototype.onMute=function(){Utils.AudioUtils.stopMusic(),App.Global.soundOn=!1,App.Global.musicOn=!1,this.sound.mute=!0},i.prototype.onUnmute=function(){this.sound.mute=!1,App.Global.soundOn=!0,App.Global.musicOn=!0,Utils.AudioUtils.playMusic("Music")},i.prototype.additionalFrameProperties=function(e,t){t.anchor&&(e.anchorX=t.anchor.w,e.anchorY=t.anchor.h),t.nextitem&&(e.nextItemX=t.nextitem.w,e.nextItemY=t.nextitem.h)},i}(Phaser.Game);e.Game=t}(JirkaKral||(JirkaKral={}));var JirkaKral;!function(e){var t=function(){function e(){}return e.AUDIO_JSON={resources:["assets\\sfx\\Sfx.ogg","assets\\sfx\\Sfx.m4a"],spritemap:{zvetseni_1:{start:0,end:1.3387528344671202,loop:!1},zvetseni_4:{start:3,end:4.7437641723356005,loop:!1},ajaj_2:{start:6,end:6.675011337868481,loop:!1},ajaj_5:{start:8,end:9.043424036281179,loop:!1},blondyna_1:{start:11,end:13.041519274376418,loop:!1},blondyna_2:{start:15,end:16.931678004535147,loop:!1},lek_1:{start:18,end:18.72283446712018,loop:!1},lek_11:{start:20,end:20.596258503401362,loop:!1},lek_5:{start:22,end:22.70875283446712,loop:!1},positive_3:{start:24,end:24.49501133786848,loop:!1},predmet_3:{start:26,end:26.40501133786848,loop:!1},predmet_4:{start:28,end:28.596258503401362,loop:!1},skok_2:{start:30,end:30.4837641723356,loop:!1},skok_4:{start:32,end:32.4218820861678,loop:!1}}},e}();e.Sounds=t}(JirkaKral||(JirkaKral={}));!function(e){var t=function(e){function t(t,i,n,a,s,r,o){var h=e.call(this,t,0,0,n)||this;return h.onClick=new Phaser.Signal,h.onDown=new Phaser.Signal,h.scaleOnOver=new Phaser.Point(1,1),h.scaleOnDown=new Phaser.Point(1,1),h.offsetOnOver=new Phaser.Point(0,0),h.offsetOnDown=new Phaser.Point(0,0),h._tinted=!1,h._downTint=8421504,h._overTint=0,h._savePosition=new Phaser.Point,h._saveScale=new Phaser.Point,h._over=!1,h._down=!1,void 0!==s&&s&&(h._tinted=!0),void 0===r&&(r=a+"Down",!h._tinted&&t.cache.getFrameByName(n,r)||(r=null)),void 0===o&&(o=a+"Over",!h._tinted&&t.cache.getFrameByName(n,o)||(o=null)),h.setFrames(o,a,r,a),h.anchor.setTo(.5,.5),h.name=i,h.onInputOver.add(h.overEvent,h),h.onInputOut.add(h.outEvent,h),h.onInputDown.add(h.downEvent,h),h.onInputUp.add(h.upEvent,h),h}return __extends(t,e),t.prototype.setTint=function(e,t){void 0===t&&(t=16777215),this._downTint=e,this._overTint=t},t.prototype.overEvent=function(){this.setButton(!0,this._down),this.overAction()},t.prototype.outEvent=function(){this.setButton(!1,!1),this.outAction()},t.prototype.downEvent=function(){this.setButton(this._over,!0),this.downAction(),this.onDown.dispatch(this)},t.prototype.upEvent=function(e,t,i){this.setButton(this._over,!1),this.upAction(),i&&this.onClick.dispatch(this)},t.prototype.setButton=function(e,t){this._over||this._down||(this._saveScale.copyFrom(this.scale),this._savePosition.copyFrom(this.position)),this._down=t,this._over=e,t?(Phaser.Point.multiply(this._saveScale,this.scaleOnDown,this.scale),Phaser.Point.add(this._savePosition,this.offsetOnDown,this.position),this._tinted&&(this.tint=this._downTint)):e?(Phaser.Point.multiply(this._saveScale,this.scaleOnOver,this.scale),Phaser.Point.add(this._savePosition,this.offsetOnOver,this.position),this._tinted&&(this.tint=this._overTint)):(this.scale.copyFrom(this._saveScale),this.position.copyFrom(this._savePosition),this._tinted&&(this.tint=16777215))},t.prototype.overAction=function(){},t.prototype.outAction=function(){},t.prototype.downAction=function(){Utils.AudioUtils.playSound("click")},t.prototype.upAction=function(){},t}(Phaser.Button);e.Button=t}(UI||(UI={}));!function(e){var t=function(e){function t(t,i,n,a,s,r,o,h){var l=e.call(this,t,i,n,a,r,o,h)||this;l._changeOnDown=!1,l._checkFramePosition=new Phaser.Point,l._checked=!1;var u=s+"On";l.game.cache.getFrameByName(n,u),l._frameChecked=u;var c=s+"Off";l.game.cache.getFrameByName(n,u)||(c=null),l._frameUnchecked=c;var p=new Phaser.Sprite(t,0,0,n);return p.anchor.set(.5,.5),l.addChild(p),l._checkSprite=p,l.checked=!1,l}return __extends(t,e),Object.defineProperty(t.prototype,"checked",{get:function(){return this._checked},set:function(e){if(this._checked=e,e)this._checkSprite.frameName=this._frameChecked,this._checkSprite.visible=!0;else{var t=null!==this._frameUnchecked;t&&(this._checkSprite.frameName=this._frameUnchecked),this._checkSprite.visible=t}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"changeOnDown",{get:function(){return this._changeOnDown},set:function(e){this._changeOnDown=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"checkSprite",{get:function(){return this._checkSprite},enumerable:!0,configurable:!0}),t.prototype.setCheckPosition=function(e,t){this._checkSprite.position.set(e,t)},t.prototype.downEvent=function(){this.setButton(this._over,!0),this._changeOnDown&&(this.checked=!this.checked),this.downAction(),this.onDown.dispatch(this,this._checked)},t.prototype.upEvent=function(e,t,i){this.setButton(this._over,!1),this.upAction(),i&&(this._changeOnDown||(this.checked=!this.checked),this.onClick.dispatch(this,this._checked))},t}(e.Button);e.CheckBox=t}(UI||(UI={}));var UI;!function(e){!function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP=1]="TOP",e[e.TOP_RIGHT=2]="TOP_RIGHT",e[e.LEFT=3]="LEFT",e[e.CENTER=4]="CENTER",e[e.RIGHT=5]="RIGHT",e[e.BOTTOM_LEFT=6]="BOTTOM_LEFT",e[e.BOTTOM=7]="BOTTOM",e[e.BOTTOM_RIGHT=8]="BOTTOM_RIGHT"}(e.eGroupPlacement||(e.eGroupPlacement={}));var t=function(e){function t(t,i){void 0===i&&(i=null);var n=e.call(this,t,i)||this;return n._groups=[],n}return __extends(t,e),t.prototype.hasGroupAt=function(e){var t=this._groups[e];return void 0!==t&&null!==t},t.prototype.groupAt=function(e,t){void 0===t&&(t=!0);var i=this._groups[e];return void 0!==i&&null!==i||!t||((i=new Phaser.Group(this.game,this)).fixedToCamera=!0,this._groups[e]=i,this.arrangeGroup(e)),i},t.prototype.arrangeGroups=function(){for(var e=0;e<this._groups.length;e++){var t=this._groups[e];void 0!==t&&null!==t&&this.arrangeGroup(e)}},t.prototype.arrangeGroup=function(e){var t=e%3,i=Math.floor(e/3),n=this._groups[e];if(void 0!==n&&null!==n){var a=this.game.width*t/2,s=this.game.height*i/2;n.cameraOffset.set(a,s)}},t}(Phaser.Group);e.UILayer=t}(UI||(UI={}));!function(e){var t=function(){function e(){}return e.setSounds=function(t,i){void 0===i&&(i=null),e._sfx=t,e._sfxIds=i,e._isAudioSprite=null!==t&&t instanceof Phaser.AudioSprite},e.addSound=function(t,i){e._sfxs[t]=i},e.playSoundRnd=function(t,i,n){null!==t&&0!==t.length&&e.playSound(Phaser.ArrayUtils.getRandomItem(t,i,n))},e.playSound=function(t){var i=e.getSoundName(t);App.Global.soundOn&&(null!==e._sfx?e._sfx.play(i):void 0!==e._sfxs[i]&&e._sfxs[i].play())},e.stopSound=function(t){var i=e.getSoundName(t);null!==e._sfx?e._isAudioSprite&&e._sfx.stop(i):void 0!==e._sfxs[i]&&e._sfxs[i].stop()},e.getSoundName=function(t){return"number"==typeof t?e._sfxIds[t]:t},Object.defineProperty(e,"currentMusic",{get:function(){return e._currentMusic},enumerable:!0,configurable:!0}),Object.defineProperty(e,"isMusicPlaying",{get:function(){if(null===this._currentMusic||0===this._currentMusic.length)return!1;return e._music[e._currentMusic].isPlaying},enumerable:!0,configurable:!0}),e.addMusic=function(t,i){e._music[t]=i},e.playMusic=function(t,i){if(void 0===i&&(i=!0),e._currentMusic!==t&&(null!==e._currentMusic&&e._currentMusic.length>0&&e.stopMusic(),t in e._music&&App.Global.musicOn)){e._currentMusic=t;var n=e._music[t];n.loop=i,n.play(),i||n.onStop.addOnce(function(){e.onFinished.dispatch(t)},this)}},e.stopMusic=function(){if(null!==e._currentMusic&&e._currentMusic.length>0){var t=e._music[e._currentMusic];t.isPlaying&&t.stop(),e._currentMusic=""}},e.pauseMusic=function(){if(null!==e._currentMusic&&e._currentMusic.length>0){var t=e._music[e._currentMusic];t.isPlaying&&t.pause()}},e.resumeMusic=function(){if(null!==e._currentMusic&&e._currentMusic.length>0){var t=e._music[e._currentMusic];t.paused&&t.resume()}},e._sfx=null,e._isAudioSprite=!1,e._sfxs={},e._music={},e._currentMusic="",e.onFinished=new Phaser.Signal,e}();e.AudioUtils=t}(Utils||(Utils={}));!function(e){var t=function(){function e(){}return e.supported=function(){return App.Global.game.scale.compatibility.supportsFullScreen},e.isFullscreen=function(){return App.Global.game.scale.isFullScreen},e.changeFullscreen=function(){var e=App.Global.game;e.scale.isFullScreen?e.scale.stopFullScreen():e.scale.startFullScreen(!1,!1)},e}();e.FullscreenUtils=t}(Utils||(Utils={}));!function(e){var t=function(){function e(){}return e.ChangeAnimationPhaserJSONData=function(e){Phaser.AnimationParser.myCallback=e,Phaser.AnimationParser.JSONData=function(e,t){if(t.frames){for(var i=new Phaser.FrameData,n=t.frames,a=0;a<n.length;a++){var s=i.addFrame(new Phaser.Frame(a,n[a].frame.x,n[a].frame.y,n[a].frame.w,n[a].frame.h,n[a].filename));n[a].trimmed&&s.setTrim(n[a].trimmed,n[a].sourceSize.w,n[a].sourceSize.h,n[a].spriteSourceSize.x,n[a].spriteSourceSize.y,n[a].spriteSourceSize.w,n[a].spriteSourceSize.h),Phaser.AnimationParser.myCallback(s,n[a])}return i}}},e.AdjustTweenFunctions=function(){Phaser.TweenManager.prototype.removeFromUpdateQueue=function(e){var t=this._tweens.indexOf(e);-1!==t?this._tweens.splice(t,1):-1!==(t=this._add.indexOf(e))&&this._add.splice(t,1)},Phaser.Tween.prototype.stopAndRemoveFromUpdateQueue=function(e){var t=this.stop(e);return this.manager.removeFromUpdateQueue(this),this.pendingDelete=!1,t}},e.AddBitmapFontAddMethod=function(){Phaser.Cache.prototype.addBitmapFontFromImage=function(e,t,i,n,a,s,r){var o=this.getImage(i,!0),h={url:t,data:o.data,font:null,base:o.base};void 0===s&&(s=0),void 0===r&&(r=0),h.font="json"===a?Phaser.LoaderParser.jsonBitmapFont(n,h.base,s,r):Phaser.LoaderParser.xmlBitmapFont(n,h.base,s,r),this._cache.bitmapFont[e]=h,this._resolveURL(t,h)}},e}();e.PhaserUtils=t}(Utils||(Utils={}));!function(e){var t=function(){return function(){}}();e.ScreenMetrics=t;var i;!function(e){e[e.PORTRAIT=0]="PORTRAIT",e[e.LANDSCAPE=1]="LANDSCAPE"}(i=e.eOrientation||(e.eOrientation={}));var n=function(){function e(){}return e.calculateScreenMetrics=function(e,n,a,s,r,o){void 0===a&&(a=i.LANDSCAPE);var h,l;if(h=window.innerWidth,l=window.innerHeight,(h<l&&a===i.LANDSCAPE||l<h&&a===i.PORTRAIT)&&!s){var u=h;h=l,l=u}void 0!==r&&void 0!==o||(a===i.LANDSCAPE?(r=Math.round(1024*e/960),o=Math.round(720*n/600)):(r=Math.round(720*e/600),o=Math.round(1024*n/960)));var c=h/l,p=0,_=0,d=0,m=0;c>e/n?(m=n,d=2*Math.ceil(m*c/2),p=((d=Math.min(d,r))-e)/2,_=0):(d=e,m=2*Math.ceil(d/c/2),p=0,_=((m=Math.min(m,o))-n)/2);var f=(h+.01)/d,g=(l+.01)/m;return s&&a===i.LANDSCAPE&&(f=g),this.screenMetrics=new t,this.screenMetrics.windowWidth=h,this.screenMetrics.windowHeight=l,this.screenMetrics.defaultGameWidth=e,this.screenMetrics.defaultGameHeight=n,this.screenMetrics.maxGameWidth=r,this.screenMetrics.maxGameHeight=o,this.screenMetrics.gameWidth=d,this.screenMetrics.gameHeight=m,this.screenMetrics.scaleX=f,this.screenMetrics.scaleY=g,this.screenMetrics.offsetX=p,this.screenMetrics.offsetY=_,this.screenMetrics},e}();e.ScreenUtils=n}(Utils||(Utils={}));!function(e){var t=function(){return function(){}}(),i=function(){function e(){}return e.save=function(){var i=new t;i.musicOn=App.Global.musicOn,i.soundOn=App.Global.soundOn,i.currentLanguage=App.Global.currentLanguage;var n=e.getLocalStorage();if(null!==n){var a=JSON.stringify(i);n.setItem("jirkakral_save",a)}},e.load=function(){var t=null;if(null===t||void 0===t){var i=e.getLocalStorage();if(null===i)return!1;t=JSON.parse(i.getItem("jirkakral_save"))}return null!==t&&void 0!==t&&(App.Global.musicOn=t.musicOn,App.Global.soundOn=t.soundOn,App.Global.currentLanguage=t.currentLanguage,!0)},e.getLocalStorage=function(){try{if("localStorage"in window&&null!==window.localStorage)return localStorage}catch(e){return null}return null},e}();e.StorageUtils=i}(Utils||(Utils={}));!function(e){var t=function(){function e(){}return e.padNumber=function(e,t,i){void 0===i&&(i="0");var n=e+"";return n.length>=t?n:new Array(t-n.length+1).join(i)+n},e.addSpacingToNumber=function(e,t){return void 0===t&&(t=" "),(""+e).replace(/\B(?=(\d{3})+(?!\d))/g,t)},e.formatTime=function(t,i,n,a){void 0===n&&(n=-1),void 0===a&&(a=":");var s=!1,r="";if((t=Math.floor(t))>3600||0===i){var o=Math.floor(t/3600);r+=(-1!==n?e.padNumber(o,n):o)+a,t%=3600,s=!0}if(!0===s||t>60||1===i){var h=Math.floor(t/60);r+=(-1!==n?e.padNumber(h,n):h)+a,t%=60,s=!0}var l=t;return r+=-1!==n?e.padNumber(l,n):l},e}();e.StringUtils=t}(Utils||(Utils={}));var Utils;!function(e){var t=function(){function e(){}return e.setTexts=function(t){e._texts=t},e.getText=function(t,i){if(null===e._texts)return"Texts not set";void 0===i&&(i=App.Global.currentLanguage);var n=e._texts[i];if(void 0===n)return"Invalid language "+i;var a=n[t];return void 0===a?"!MISSING TEXT!":a},e._texts=null,e}();e.TextUtils=t}(Utils||(Utils={}));
