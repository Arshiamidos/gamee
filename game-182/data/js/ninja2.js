function startGame(){var t=new Ninja2.Game;return App.Global.game=t,t}var FBInstantUtils;!function(t){var e=function(){function t(t){this._game=null,this._loader=null,this._currentPlayer=null,this._entryPointData=null,this._currentContext=null,this._currentContextPlayers=null,this._playerImagesDB={},this._game=t}return Object.defineProperty(t,"instance",{get:function(){return null===t._instance&&(t._instance=new t(App.Global.game)),t._instance},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentPlayer",{get:function(){return this._currentPlayer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entryPointData",{get:function(){return this._entryPointData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentContext",{get:function(){return this._currentContext},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentContextPlayers",{get:function(){return this._currentContextPlayers},enumerable:!0,configurable:!0}),t.prototype.isAPISupported=function(t){return FBInstant.getSupportedAPIs().indexOf(t)>=0},t.prototype.onGameStart=function(){this._currentPlayer=FBInstant.player,this._entryPointData=FBInstant.getEntryPointData(),this.setContext(FBInstant.context)},t.prototype.setContext=function(t){null!==this._currentContext&&this._currentContext.getID()===FBInstant.context.getID()||(this.clearImageDB(),this._currentContextPlayers=null),this._currentContext=FBInstant.context},t.prototype.getPlayers=function(t,e){var i=this._currentContext.getType();if(null!==this._currentContextPlayers||"SOLO"===i)return"SOLO"===i&&(this._currentContextPlayers=null),void t.call(e,!0);var n=this;this.isAPISupported("context.getPlayersAsync"),this._currentContext.getPlayersAsync().then(function(i){n._currentContextPlayers=i,t.call(e,!0)}).catch(function(i){t.call(e,!1)})},t.prototype.getPlayerInContext=function(t){if(null===this._currentContextPlayers)return null;for(var e=0;e<this._currentContextPlayers.length;e++){var i=this._currentContextPlayers[e];if(i.getID()===t)return i}return null},t.prototype.clearImageDB=function(e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!0),e||!(Object.keys(this._playerImagesDB).length<t.IMAGE_DB_SIZE))for(var n in this._playerImagesDB){var a=this._playerImagesDB[n];if(!a.keep||i){var s="photo_"+a.key;this._game.cache.checkImageKey(s)&&this._game.cache.removeImage(s),delete this._playerImagesDB[n]}}},t.prototype.loadPlayerPhotos=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null),this.clearImageDB(),Array.isArray(t)||(t=[t]);for(var n=[],a=0;a<t.length;a++)void 0===this._playerImagesDB[t[a].key]&&n.push(t[a]);if(0!==n.length){null===this._loader&&(this._loader=new Phaser.Loader(this._game),this._loader.crossOrigin="anonymous"),this._loader.onLoadComplete.addOnce(function(){null!==e&&e.call(i)},this);for(a=0;a<n.length;a++){var s="photo_"+n[a].key,o=n[a].url;void 0!==o&&null!==o&&0!==o.length||(o="assets/profilJouda.png"),this._loader.image(s,n[a].url),this._playerImagesDB[n[a].key]=n[a]}this._loader.start()}else null!==e&&e.call(i)},t.IMAGE_DB_SIZE=16,t._instance=null,t}();t.FBInstantUtils=e}(FBInstantUtils||(FBInstantUtils={}));var Gamee;!function(t){var e=function(){function t(e,i,n,a){this._game=null,this._controller=null,this._saveState=null,this._replayData=null,this._socialData=null,this._indices={right:1,up:2,left:4,down:8,A:16,B:32,button:64},this._pressesCache=0,this._isDown=0,this._justDown=0,this._justUp=0,this._gameRunning=!1,this._score=0,this._ghostScore=0,this._gameReady=!1,this._platform=null,this._isBattle=!1,this._gameReady=!1,void 0!==window.gamee&&(this.setEventHandlers(),window.gamee.gameInit(e,{},n,function(t,e){this.initResponse(t,e);window.gamee.requestPlayerData(function(t,e){null!=e&&(App.Global.saveData.coins=e.player.coins),a()})}.bind(this))),t._instance=this}return Object.defineProperty(t,"instance",{get:function(){return t._instance},enumerable:!0,configurable:!0}),t.prototype.initResponse=function(t,e){var i=e.sound;void 0===i&&(i=!0),this._controller=e.controller,this._sound=i,null!=e.saveState&&0!==e.saveState.length?(this._saveState=JSON.parse(e.saveState),App.Global.saveData=JSON.parse(e.saveState),null==App.Global.saveData.skins&&(App.Global.saveData=new Ninja2.SaveData)):App.Global.saveData=new Ninja2.SaveData,null!=e.replayData&&null!=e.replayData.data&&0!==e.replayData.data.length&&(this._replayData=JSON.parse(e.replayData.data)),null!=e.socialData&&0!==e.socialData.length&&(this._socialData=JSON.parse(e.socialData)),null!=e.platform&&0!==e.platform.length&&(this._platform=e.platform),null!=e.gameContext&&0!==e.gameContext.length&&(this._isBattle="battle"===e.gameContext),this.setKeyHandlers()},t.prototype.setGame=function(t){this._game=t},Object.defineProperty(t.prototype,"gameRunning",{get:function(){return this._gameRunning},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sound",{get:function(){return this._sound},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"replayData",{get:function(){return this._replayData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"saveState",{get:function(){return this._saveState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isWeb",{get:function(){return null!==this._platform&&("web"===this._platform||"mobile_web"===this._platform)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isBattle",{get:function(){return this._isBattle},enumerable:!0,configurable:!0}),t.prototype.gameReady=function(){window.gamee.gameReady(),this._gameReady=!0},t.prototype.setKeyHandlers=function(){var t=this;this._controller.on("keydown",function(e){t._pressesCache|=t._indices[e.button];var i=t._game.state.getCurrentState();"function"==typeof i.onGameeButtonDown&&i.onGameeButtonDown(e.button)}),this._controller.on("keyup",function(e){t._pressesCache&=~t._indices[e.button];var i=t._game.state.getCurrentState();"function"==typeof i.onGameeButtonUp&&i.onGameeButtonUp(e.button)})},t.prototype.setEventHandlers=function(){var t=this;window.gamee.emitter.addEventListener("pause",function(){t.onPause()}),window.gamee.emitter.addEventListener("resume",function(){t.onUnpause()}),window.gamee.emitter.addEventListener("mute",function(){t._game&&t._game.onSound(!1)}),window.gamee.emitter.addEventListener("unmute",function(){t._game&&t._game.onSound(!0)}),window.gamee.emitter.addEventListener("start",function(e){t.onStart(e)})},t.prototype.onPause=function(){var t=this._game.state.getCurrentState();"function"==typeof t.onGameePause&&t.onGameePause()},t.prototype.onUnpause=function(){var t=this._game.state.getCurrentState();"function"==typeof t.onGameeUnpause&&t.onGameeUnpause()},t.prototype.onStart=function(t){if(!this._gameReady)throw new Error("Game received 'start' event before gameReady() was called!");this.gameStart();var e=this._game.state.getCurrentState();if("function"==typeof e.onGameeRestart){var i=void 0!==t.detail.opt_resetState&&t.detail.opt_resetState,n=void 0!==t.detail.opt_replay&&t.detail.opt_replay,a=void 0!==t.detail.opt_ghostMode&&t.detail.opt_ghostMode;e.onGameeRestart(i,n,a)}t.detail.callback()},Object.defineProperty(t.prototype,"score",{get:function(){return this._score},enumerable:!0,configurable:!0}),t.prototype.setScore=function(t,e){void 0===e&&(e=!1),e?(this._ghostScore=t,window.gamee.updateScore(t,!0)):(this._score=t,window.gamee.updateScore(t))},t.prototype.gameStart=function(){this._gameRunning,this._gameRunning=!0},t.prototype.gameOver=function(t){this._gameRunning,this._gameRunning=!1,null!=t&&(t={data:JSON.stringify(t)}),window.gamee.gameOver(t)},t.prototype.gameSave=function(t,e){window.gamee.gameSave(t,e)},t._instance=null,t}();t.Gamee=e}(Gamee||(Gamee={}));!function(t){var e=function(){function t(t,e){this._rnd=t,this.reset(e)}return t.prototype.reset=function(t){--t;var e=Math.ceil(t/2);this._lbound=-e,this._ubound=t-e,this._currentBalance=0===t?this._rnd.integerInRange(-1,0):0},t.prototype.getBoolean=function(){var t=this._currentBalance+this._rnd.integerInRange(this._lbound,this._ubound);return this._currentBalance+=t>=0?-1:1,t>=0},t}();t.RandomBooleanBalancer=e}(Helper||(Helper={}));var Log;!function(t){var e=function(){return function(t,e){this.msg=t,this.color=e}}(),i=function(){function t(){}return t.msg=function(i,n){var a=t.messages;void 0===n&&(n=t.YELLOW);for(var s=0;s<i.length;){var o=i.substr(s,60);if(a.length<t.MAX_LINE)t.messages.push(new e(o,n));else{for(var r=1;r<t.MAX_LINE;r++)a[r-1].msg=a[r].msg,a[r-1].color=a[r].color;a[t.MAX_LINE-1].msg=o,a[t.MAX_LINE-1].color=n}s+=60}},t.render=function(e){for(var i=t.messages,n=0;n<i.length;n++)e.text(i[n].msg,10,60+16*n,i[n].color)},t.RED="RGB(255, 0, 0)",t.GREEN="RGB(0, 255, 0)",t.BLUE="RGB(, 0, 255)",t.YELLOW="RGB(255, 255, 0)",t.MAGENTA="RGB(255, 0, 255)",t.CYAN="RGB(0, 255, 255)",t.WHITE="RGB(255, 255, 255)",t.MAX_LINE=50,t.messages=[],t}();t.Log=i}(Log||(Log={}));!function(t){var e=function(){function t(){}return t.randomizeArray=function(t,e,i,n){void 0===i&&(i=!1),void 0===n&&(n=!1);var a=i?e.slice():e;return Phaser.ArrayUtils.shuffle(a),n?a.slice(0,t):a},t.sort=function(e,i,n,a){if(void 0===n&&(n=0),void 0===a&&(a=e.length),n<a){for(var s,o=n,r=n+1;r<=a;r++)i(e[n],e[r])>0&&(s=e[++o],e[o]=e[r],e[r]=s);s=e[n],e[n]=e[o],e[o]=s,t.sort(e,i,n,o-1),t.sort(e,i,o+1,a)}},t}();t.ArrayUtils=e}(Helper||(Helper={}));!function(t){!function(t){function e(t){return-2*t*t+3*t}t.wiggle=function(t,e,i){var n=t*Math.PI*2*e,a=t*(2*Math.PI*i+Math.PI/2);return Math.sin(n)*Math.cos(a)},t.sinWithExpDecay=function(t,e,i){var n=t*Math.PI*2*e,a=-t*i;return Math.sin(n)*Math.exp(a)},t.pop5=e,t.pop5rev=function(t){return-(e(1-t)-1)},t.sin=function(t){return Math.sin(2*t*Math.PI)},t.halfSin=function(t){return Math.sin(t*Math.PI)},t.sinWithPeriod=function(t,e){return Math.sin(2*t*Math.PI*e)}}(t.Easing||(t.Easing={}))}(Helper||(Helper={}));!function(t){var e=function(){function t(){}return t.create=function(e,i,n,a,s,o,r,h,l,c){return void 0===o&&(o=0),void 0===r&&(r=0),void 0===h&&(h=0),void 0===l&&(l=0),void 0===c&&(c=!1),t._image=new Phaser.Image(e,0,0,a),t._frame="string"==typeof s?e.cache.getFrameByName(a,s):e.cache.getFrameByIndex(a,s),t.calculateNineImage(i,n,o,r,h,l,c),t._nineImage=new Phaser.BitmapData(e,"NineImage"+t._textureKey++,t._width,t._height),t.renderNineImage(),t._nineImage},t.calculateNineImage=function(e,i,n,a,s,o,r){var h=t._frame;if(t._centralWidth=h.width-a-o,t._centralHeight=h.height-n-s,r)t._horizontalRepeats=e,t._verticalRepeats=i,t._width=a+o+t._centralWidth*e,t._height=n+s+t._centralHeight*i,t._lastWidth=0,t._lastHeight=0;else{var l=e-a-o;t._horizontalRepeats=Math.floor(l/t._centralWidth),t._lastWidth=l%t._centralWidth;var c=i-n-s;t._verticalRepeats=Math.floor(c/t._centralHeight),t._lastHeight=c%t._centralHeight,t._width=e,t._height=i}t._leftWidth=a,t._rightWidth=o,t._topHeight=n,t._bottomHeight=s},t.renderNineImage=function(){var e=t._frame.y,i=0;t._topHeight>0&&(t.renderNineImageRow(t._image,e,i,t._topHeight),e+=t._topHeight,i+=t._topHeight);for(var n=0;n<t._verticalRepeats;n++)t.renderNineImageRow(t._image,e,i,t._centralHeight),i+=t._centralHeight;t._lastHeight>0&&(t.renderNineImageRow(t._image,e,i,t._lastHeight),i+=t._lastHeight),e+=t._centralHeight,t._bottomHeight>0&&t.renderNineImageRow(t._image,e,i,t._bottomHeight)},t.renderNineImageRow=function(e,i,n,a){var s=t._frame.x,o=0;t._leftWidth>0&&(t._nineImage.copy(e,s,i,t._leftWidth,a,o,n),o+=t._leftWidth,s+=t._leftWidth);for(var r=0;r<t._horizontalRepeats;r++)t._nineImage.copy(e,s,i,t._centralWidth,a,o,n),o+=t._centralWidth;t._lastWidth>0&&(t._nineImage.copy(e,s,i,t._lastWidth,a,o,n),o+=t._lastWidth),s+=t._centralWidth,t._rightWidth>0&&t._nineImage.copy(e,s,i,t._rightWidth,a,o,n)},t._textureKey=0,t}();t.NineImage=e}(Helper||(Helper={}));var Helper;!function(t){var e;!function(t){t[t.UNDEFINED=-1]="UNDEFINED",t[t.SPACE=1]="SPACE",t[t.NEWLINE=2]="NEWLINE",t[t.CHARACTER=3]="CHARACTER"}(e||(e={}));var i=function(){function t(){}return t.hasNext=function(){return t.textPosition<t.text.length},t.getChar=function(){return t.text.charAt(t.textPosition++)},t.peekChar=function(){return t.text.charAt(t.textPosition)},t.getPosition=function(){return t.textPosition},t.setPosition=function(e){t.textPosition=e},t.getCharAdvance=function(e,i){var n=t.fontData.chars[e],a=n.xAdvance;return i>0&&n.kerning[i]&&(a+=n.kerning[i]),a},t.getCharType=function(t){return" "===t?e.SPACE:/(?:\r\n|\r|\n)/.test(t)?e.NEWLINE:e.CHARACTER},t.wrapText=function(i,n,a,s,o,r){t.text=n,t.setPosition(0),t.fontData=i.cache.getBitmapFont(o).font,void 0===r&&(r=t.fontData.size);var h=r/t.fontData.size,l=t.fontData.lineHeight*h,c=a/h,p=[],_=[],u=[],d=0,m=0,g=0;p[d]=g,u[m++]=0;for(var f=s;t.hasNext();){for(var y=0,P=0,S=-1,v=e.UNDEFINED,b=e.UNDEFINED,E=c,A=-1;t.hasNext();){g=t.getPosition();var T=t.getChar();v=t.getCharType(T);var N=T.charCodeAt(0);if(v===e.SPACE)b!==e.SPACE&&(P=y),++y,E-=t.getCharAdvance(N,A);else if(v===e.CHARACTER){if(b!==e.CHARACTER&&(S=g),(E-=t.getCharAdvance(N,A))<0)break;++y}else if(v===e.NEWLINE){var C=!1;if(t.hasNext()&&(C=!0,P=y,g=S=t.getPosition(),E=-1,v=e.CHARACTER),C)break}b=v,A=N}(f-=l)<0&&(u[m++]=d),E<0&&v===e.CHARACTER?(_[d]=0!==P?P:y,!1,f<0&&(!0,f=s-l),0!==P?(p[++d]=S,t.setPosition(S)):(p[++d]=g,t.setPosition(g))):t.hasNext()||(v===e.CHARACTER?_[d]=y:v===e.SPACE&&(_[d]=P))}u[m]=d+1;for(var w=[],R=1;R<=m;R++){for(var I=u[R-1],D=u[R],x=[],O=I;O<D;O++)x.push(t.text.substr(p[O],_[O]));w.push(x.join("\n"))}return w},t}();t.TextWrapper=i}(Helper||(Helper={}));!function(t){var e=function(){return function(){this.coins=0,this.skins=["ninja"],this.selected="ninja"}}();t.SaveData=e}(Ninja2||(Ninja2={}));!function(t){var e=function(){function e(t,i){this.maxVelocity=e.MAX_VELOCITY,this._delay=0,this._velocity=new Phaser.Point(0,0),this._angularVelocity=0,this._friction=0,this._angularDrag=0,this._gravity=0,this._alpha=1,this._scaleChange=0,this._alphaChange=0,this._game=t}return Object.defineProperty(e.prototype,"visual",{get:function(){return this._visual},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"on",{set:function(t){this._on=t,this._visual.exists=t,this._visual.visible=t},enumerable:!0,configurable:!0}),e.prototype.remove=function(){var t=this._visual.parent;null!==t&&(t instanceof Phaser.Group?t.remove(this._visual):t.removeChild(this._visual),t=null)},e.prototype.bringToTop=function(){var t=this._visual.parent;t instanceof Phaser.Group&&t.bringToTop(this._visual)},e.prototype.sendToBack=function(){var t=this._visual.parent;t instanceof Phaser.Group&&t.sendToBack(this._visual)},Object.defineProperty(e.prototype,"textureKey",{set:function(t){this._textureKey=t},enumerable:!0,configurable:!0}),e.prototype.setScaleChange=function(t,e){void 0===e&&(e=0),this._scaleChangeType=t,this._scaleChange=e},Object.defineProperty(e.prototype,"delay",{set:function(t){this._delay=t,t>0&&(this.on=!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"alpha",{set:function(t){this._alpha=t,this._visual.alpha=Phaser.Math.clamp(t,0,1)},enumerable:!0,configurable:!0}),e.prototype.setAlphaChange=function(t,e){void 0===e&&(e=0),this._alphaChangeType=t,this._alphaChange=e},e.prototype.setPhysics=function(t,e,i,n,a,s){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=0),void 0===s&&(s=0),this._velocity.setTo(t,e),this._angularVelocity=i,this._friction=n,this._angularDrag=a,this._gravity=s,this._simplePhysics=0===s&&0===n&&0===a},Object.defineProperty(e.prototype,"velocity",{get:function(){return this._velocity},enumerable:!0,configurable:!0}),e.prototype.setFrame=function(t){},e.prototype.onEmit=function(t){t.add(this._visual)},e.prototype.onKill=function(t){},e.prototype.update=function(e){void 0===e&&(e=!0);var i=this._game.time.physicsElapsed;if(this._delay>0){if((this._delay-=i)>0)return!0;this.on=!0}if(this.lifetime>0&&(this.lifetime-=i)<=0)return!1;if(0===this._velocity.x&&0===this._velocity.y||(this._visual.x+=this._velocity.x*i,this._visual.y+=this._velocity.y*i),0!==this._angularVelocity&&(this._visual.angle+=this._angularVelocity*i),this._simplePhysics||(this._velocity.x+=-this._friction*this._velocity.x*i,this._velocity.y+=(this._gravity-this._friction*this._velocity.y)*i,this._angularVelocity+=-this._angularDrag*this._angularVelocity*i),!e)return!0;if(this._scaleChangeType!=t.eParameterChangeType.NO_CHANGE)switch(this._scaleChangeType){case t.eParameterChangeType.IN_TIME:(this._visual.scale.x+=this._scaleChange*i)<0&&(this._visual.scale.x=0,this._scaleChange<0&&(this._scaleChangeType=t.eParameterChangeType.NO_CHANGE)),(this._visual.scale.y+=this._scaleChange*i)<0&&(this._visual.scale.y=0,this._scaleChange<0&&(this._scaleChangeType=t.eParameterChangeType.NO_CHANGE))}if(this._alphaChangeType!=t.eParameterChangeType.NO_CHANGE)switch(this._alphaChangeType){case t.eParameterChangeType.IN_TIME:this._alpha+=this._alphaChange*i,this._alpha<0?(this._visual.alpha=0,this._alphaChange<0&&(this._alphaChangeType=t.eParameterChangeType.NO_CHANGE)):this._alpha>1?(this._visual.alpha=1,this._alphaChange>0&&(this._alphaChangeType=t.eParameterChangeType.NO_CHANGE)):this._visual.alpha=this._alpha}return!0},e.MAX_VELOCITY=1e3,e}();t.Particle=e}(Particles||(Particles={}));var __extends=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(e,i){function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.setFrame=function(t){var e=this._visual;"string"==typeof t?e.frameName=t:e.frame=t},e.prototype.onCreate=function(t){var e=new Phaser.Sprite(this._game,0,0,this._textureKey);e.anchor.setTo(.5,.5),this._visual=e},e}(t.Particle);t.SpriteParticle=e}(Particles||(Particles={}));!function(t){var e=function(t){function e(e,i){var n=t.call(this,e,i)||this;return void 0!==i&&null===i||(n._anims=i[0]),n}return __extends(e,t),e.prototype.onCreate=function(e){t.prototype.onCreate.call(this,e);for(var i=this._visual,n=0;n<this._anims.length;n++){var a=this._anims[n],s=i.animations.add(a.name,a.frames,a.frameRate,a.loop);!a.loop&&a.killOnComplete&&(s.killOnComplete=!0)}},e.prototype.update=function(e){void 0===e&&(e=!0);var i=this._delay,n=t.prototype.update.call(this,e);return i>0&&this._delay<=0&&this._visual.animations.currentAnim.play(),n},e.prototype.setFrame=function(t){this.setAnim(t)},e.prototype.setAnim=function(t){var e=this._visual;e.animations.stop(null,!0),this._delay<=0?e.animations.play(t):(e.animations.currentAnim=e.animations.getAnimation(t),e.frame=e.animations.currentAnim._frames[0])},e.prototype.setRandomAnim=function(){this._visual;var t=this._anims[this._game.rnd.integerInRange(0,this._anims.length-1)].name;this.setAnim(t)},e}(t.SpriteParticle);t.AnimatedParticle=e}(Particles||(Particles={}));!function(t){var e=function(){function e(e){this.area=new Phaser.Point(0,0),this.gravity=0,this.minLifetime=1,this.maxLifetime=1,this.delay=0,this.minScale=1,this.maxScale=1,this.scaleChange=0,this.scaleChangeType=t.eParameterChangeType.NO_CHANGE,this.minAngle=0,this.maxAngle=0,this.minSpeedX=0,this.maxSpeedX=0,this.minSpeedY=0,this.maxSpeedY=0,this.friction=0,this.minAngularSpeed=0,this.maxAngularSpeed=0,this.angularDrag=0,this.minAlpha=1,this.maxAlpha=1,this.alphaChange=0,this.alphaChangeType=t.eParameterChangeType.NO_CHANGE,this.frames=null,this._minAdvScale=new Phaser.Point(1,1),this._maxAdvScale=new Phaser.Point(1,1),this._game=e}return e.readParams=function(t,i){var n={};for(var a in i){var s=new e(t);e.doReadParams(s,i,a),n[a]=s}return n},e.doReadParams=function(t,i,n){var a=i[n];if(void 0!==a.parent&&null!==a.parent){var s=a.parent;e.doReadParams(t,i,s)}for(var o in a)"parent"!==o&&(t[o],t[o]=a[o])},e.prototype.clear=function(){this.gravity=0,this.setXSpeed(0,0),this.setYSpeed(0,0),this.setAngularSpeed(0)},e.prototype.randomFrame=function(){var t=null;return null!==this.frames&&(t=Array.isArray(this.frames)?(this.frames[0],this._game.rnd.pick(this.frames)):this.frames),t},e.prototype.setXSpeed=function(t,e){t=t||0,e=e||0,this.minSpeedX=t,this.maxSpeedX=e},e.prototype.setYSpeed=function(t,e){t=t||0,e=e||0,this.minSpeedY=t,this.maxSpeedY=e},e.prototype.setAngularSpeed=function(t,e){t=t||0,e=e||0,this.minAngularSpeed=t,this.maxAngularSpeed=e},e.prototype.setAlpha=function(t,e){void 0===t&&(t=1),void 0===e&&(e=1),this.minAlpha=t,this.maxAlpha=e},e.prototype.setAlphaChange=function(e,i,n){switch(void 0===i&&(i=0),void 0===n&&(n=0),this.alphaChangeType=e,e){case t.eParameterChangeType.NO_CHANGE:this.alphaChange=0;break;case t.eParameterChangeType.IN_TIME:0===n&&(n=1),this.alphaChange=i/n}},e.prototype.setScale=function(t,e){t=t||0,e=e||0,this.minScale=t,this.maxScale=e},Object.defineProperty(e.prototype,"advScaleMin",{get:function(){return this._minAdvScale},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"advScaleMax",{get:function(){return this._maxAdvScale},enumerable:!0,configurable:!0}),e.prototype.setAdvScale=function(t,e,i,n){void 0===t&&(t=1),void 0===e&&(e=1),void 0===i&&(i=1),void 0===n&&(n=1),this._minAdvScale.setTo(t,i),this._maxAdvScale.setTo(e,n)},e.prototype.setScaleChange=function(e,i,n){switch(void 0===i&&(i=0),void 0===n&&(n=0),this.scaleChangeType=e,e){case t.eParameterChangeType.NO_CHANGE:this.scaleChange=0;break;case t.eParameterChangeType.IN_TIME:0===n&&(n=1),this.scaleChange=i/n}},e.prototype.setAngle=function(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.minAngle=t,this.maxAngle=e},e}();t.ParticleParams=e}(Particles||(Particles={}));!function(t){var e;!function(t){t[t.NONE=0]="NONE",t[t.FLOW=1]="FLOW",t[t.EXPLODE=2]="EXPLODE"}(e||(e={}));var i;!function(t){t[t.NO_CHANGE=0]="NO_CHANGE",t[t.IN_TIME=1]="IN_TIME"}(i=t.eParameterChangeType||(t.eParameterChangeType={}));var n=function(n){function a(i,s,o,r){var h=n.call(this,i,null)||this;return h._maxParticles=a.MAX_PARTICELES,h.emitPoint=new Phaser.Point(0,0),h.emitObject=null,h.particleClass=t.SpriteParticle,h.particleBringToTop=!1,h.particleSendToBack=!1,h.frequency=100,h.forceEmit=!1,h._alternativeParams=null,h._on=!1,h._mode=e.NONE,h._flowQuantity=0,h._flowTotal=0,h._flowCounter=0,h._particlesPool=[],h._counterPool=0,h._particlesUsed=[],h._counterUsed=0,h._timer=0,h._emitPoint=new Phaser.Point(0,0),h._params=new t.ParticleParams(i),h.position.setTo(s,o),h._maxParticles=r,h}return __extends(a,n),Object.defineProperty(a.prototype,"params",{get:function(){return this._params},set:function(t){this._params=t},enumerable:!0,configurable:!0}),a.prototype.clear=function(){this._params.clear()},a.prototype.update=function(){if(this._on&&this.game.time.time>=this._timer&&(this._timer=this.game.time.time+this.frequency*this.game.time.slowMotion,this._mode===e.FLOW))if(-1!==this._flowTotal&&this._flowCounter>=this._flowTotal)this.stopFlow();else for(var t=Math.max(1,this._flowQuantity),i=0;i<t&&!(this.emitParticle(this.forceEmit)&&(this._flowCounter++,-1!==this._flowTotal&&this._flowCounter>=this._flowTotal));i++);for(i=this._counterUsed-1;i>=0;i--){var n=this._particlesUsed[i];n.update()||(n.on=!1,n.remove(),n.onKill(this),this._particlesUsed[i]=this._particlesUsed[--this._counterUsed],this._particlesPool[this._counterPool++]=n)}},a.prototype.makeParticles=function(t,e,i,n){(void 0===i||i>this._maxParticles)&&(i=this._maxParticles),void 0!==e&&(this._params.frames=e);for(var a=0;a<i;a++){var s=new this.particleClass(this.game,n);s.textureKey=t,s.onCreate(this),s.on=!1,this._particlesPool[this._counterPool++]=s}},Object.defineProperty(a.prototype,"on",{set:function(t){this._on=t,this.exists=t,this.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"countParticles",{get:function(){return this._counterUsed},enumerable:!0,configurable:!0}),a.prototype.explode=function(t,i,n){this._mode=e.EXPLODE,this.on=!0,this.emitParticles(t,i,n)},a.prototype.flow=function(t,i,n,a,s,o){this._mode=e.FLOW,this.on=!0,void 0!==i&&0!==i||(i=1),void 0===n&&(n=-1),void 0===a&&(a=!0),i>this._maxParticles&&(i=this._maxParticles),this.frequency=t,this._flowCounter=0,this._flowQuantity=i,this._flowTotal=n,a&&(this.emitParticles(i,s,o),this._flowCounter+=i,this._timer=this.game.time.time+t*this.game.time.slowMotion)},a.prototype.stopFlow=function(){this._mode=e.NONE},a.prototype.killAllParticles=function(t){for(void 0===t&&(t=!0);this._counterUsed>0;){var e=this._particlesUsed[--this._counterUsed];e.remove(),t||e.onKill(this),this._particlesPool[this._counterPool++]=e}},a.prototype.emitParticles=function(t,e,i){for(var n=0;n<t;n++){var a=this.emitParticle(this.forceEmit);if(null===a)break;void 0!==e&&null!==e&&e.call(i,a)}},a.prototype.emitParticle=function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!1),0===this._counterPool){if(!t)return null;var n=this._particlesUsed[0];this._particlesUsed[0]=this._particlesUsed[--this._counterUsed],n.remove(),n.onKill(this),this._particlesPool[this._counterPool++]=n}var a=this._particlesPool[--this._counterPool];this._particlesUsed[this._counterUsed++]=a,a.on=!0;var s=null!==this._alternativeParams?this._alternativeParams:this._params;if(this.randomEmitPoint(this._emitPoint,s),a.visual.position.set(this._emitPoint.x,this._emitPoint.y),a.visual.angle=0,e)a.lifetime=-1,a.visual.scale.set(1,1),a.setScaleChange(i.NO_CHANGE),a.visual.angle=0,a.alpha=1,a.setAlphaChange(i.NO_CHANGE),a.setPhysics();else{if(a.lifetime=this.game.rnd.realInRange(s.minLifetime,s.maxLifetime),a.delay=s.delay,1!==s.minScale||1!==s.maxScale){var o=this.game.rnd.realInRange(s.minScale,s.maxScale);a.visual.scale.set(o,o)}else s.advScaleMin.x!==s.advScaleMax.x||s.advScaleMin.y!==s.advScaleMax.y?a.visual.scale.set(this.game.rnd.realInRange(s.advScaleMin.x,s.advScaleMax.x),this.game.rnd.realInRange(s.advScaleMin.y,s.advScaleMax.y)):a.visual.scale.set(1,1);a.setScaleChange(s.scaleChangeType,s.scaleChange),a.visual.angle=s.minAngle===s.maxAngle?s.minAngle:this.game.rnd.realInRange(s.minAngle,s.maxAngle),a.alpha=this.game.rnd.realInRange(s.minAlpha,s.maxAlpha),a.setAlphaChange(s.alphaChangeType,s.alphaChange),a.setPhysics(this.game.rnd.realInRange(s.minSpeedX,s.maxSpeedX),this.game.rnd.realInRange(s.minSpeedY,s.maxSpeedY),this.game.rnd.realInRange(s.minAngularSpeed,s.maxAngularSpeed),s.friction,s.angularDrag,s.gravity),null!==s.frames&&a.setFrame(s.randomFrame())}return a.onEmit(this),this.particleBringToTop?a.bringToTop():this.particleSendToBack&&a.sendToBack(),a},a.prototype.destroy=function(){t.ParticlesManager.instance.remove(this),n.prototype.destroy.call(this,!0,!1)},a.prototype.randomEmitPoint=function(t,e){return e.area instanceof Phaser.Point?t.setTo(0,0):e.area.random(t),t.x+=this.emitPoint.x,t.y+=this.emitPoint.y,null!==this.emitObject&&(t.x+=this.emitObject.x,t.y+=this.emitObject.y),t},Object.defineProperty(a.prototype,"area",{set:function(t){this._params.area=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"gravity",{set:function(t){this._params.gravity=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"friction",{set:function(t){this._params.friction=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"angularDrag",{set:function(t){this._params.angularDrag=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minScale",{set:function(t){this._params.minScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxScale",{set:function(t){this._params.maxScale=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"minAngle",{set:function(t){this._params.minAngle=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"maxAngle",{set:function(t){this._params.maxAngle=t},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"lifetime",{set:function(t){this._params.minLifetime=this._params.maxLifetime=t},enumerable:!0,configurable:!0}),a.prototype.setXSpeed=function(t,e){this._params.setXSpeed(t,e)},a.prototype.setYSpeed=function(t,e){this._params.setYSpeed(t,e)},a.prototype.setAngularSpeed=function(t,e){this._params.setAngularSpeed(t,e)},a.prototype.setAlpha=function(t,e){this._params.setAlpha(t,e)},a.prototype.setAlphaChange=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._params.setAlphaChange(t,e,i)},a.prototype.setScale=function(t,e){this._params.setScale(t,e)},a.prototype.setAdvScale=function(t,e,i,n){this._params.setAdvScale(t,e,i,n)},a.prototype.setScaleChange=function(t,e,i){void 0===e&&(e=0),void 0===i&&(i=0),this._params.setScaleChange(t,e,i)},a.prototype.setAngle=function(t,e){this._params.setAngle(t,e)},a.prototype.emitAt=function(t,e){this.emitPoint.setTo(t,e)},a.prototype.emitAtObject=function(t){t.center?this.emitPoint.setTo(t.center.x,t.center.y):this.emitPoint.setTo(t.x,t.y)},a.MAX_PARTICELES=16,a}(Phaser.Group);t.ParticlesEmitter=n}(Particles||(Particles={}));!function(t){var e=function(){function t(t,e,i,n){void 0===i&&(i=null),void 0===n&&(n=null),this._emitter=null,this._game=t,this._emitter=e,this._animEmitter=i,this._params=n}return t.prototype.emit=function(t,e,i,n,a){for(this._emitter.emitAt(t,e),null!==this._animEmitter&&this._animEmitter.emitAt(t,e);null!==i;){var s=i.animated?this._animEmitter:this._emitter;if(null===this._params&&i.paramsName,null!==this._params){var o=this._params[i.paramsName];void 0===o||(s.params=o)}s.explode(this._game.rnd.integerInRange(i.countMin,i.countMax),n,a),i=i.next}},t}();t.ParticleChain=e}(Particles||(Particles={}));var Particles;!function(t){var e=function(){function t(){this._emitters=[],this._emittersCount=0}return Object.defineProperty(t,"instance",{get:function(){return null===t._instance&&(t._instance=new t),t._instance},enumerable:!0,configurable:!0}),t.prototype.add=function(t){this._emitters[this._emittersCount++]=t},t.prototype.remove=function(t){for(var e=this._emittersCount-1;e>=0&&this._emitters[e]!==t;e--);-1!==e&&(this._emitters[e]=this._emitters[--this._emittersCount])},t.prototype.update=function(){for(var t=0;t<this._emittersCount;t++){var e=this._emitters[t];e.exists&&e.update()}},t._instance=null,t}();t.ParticlesManager=e}(Particles||(Particles={}));!function(t){var e=function(){function t(){}return t.FB_SWITCH_GAME_IDS=null,t.FB_AD_ID="1692562480828262_1716402175110959",t.SHOP_CHAR_DEFS=null,t.SHOP_CHAR_DEFS_FB=[{id:0,name:"ninja",price:0},{id:1,name:"ninja_babka",price:200},{id:2,name:"ninja_blue",price:400},{id:3,name:"ninja_cernoch",price:400},{id:4,name:"ninja_green",price:400},{id:5,name:"ninja_chuck",price:400},{id:6,name:"ninja_white",price:400},{id:7,name:"ninja_yellow",price:400}],t.SHOP_CHAR_DEFS_GAMEE=[{id:0,name:"ninja",price:0},{id:1,name:"ninja_white",price:49},{id:2,name:"ninja_green",price:149},{id:3,name:"ninja_kosmo",price:299},{id:4,name:"ninja_bruce",price:499},{id:5,name:"ninja_chuck",price:899}],t.FB_CHALLENGE_WIN_BONUS=50,t.START_LEFT=!0,t.GRAVITY=4800,t.SPEED_Y_MIN=200,t.SPEED_Y_MAX=400,t.SPEED_X_COEF=1.5,t.SPEED_UP_TIME=3,t.SPEED_DOWN_TIME=1,t.TIME_TO_HARDEST_PATTERN=60,t.GHOST_DIST=-100,t.COIN_COUNTER_MIN=8,t.COIN_COUNTER_MAX=8,t.SLOW_BONUS_COUNTER=5,t.COINS_PAUSE=1,t.BONUS_DIST_MIN=20,t.BONUS_DIST_MAX=50,t.BONUS_MAGNET_DURATION=2560,t.BONUS_DOUBLE_DURATION=2560,t.BONUS_DOUBLE_LEVEL_MAX=1,t.SHAFT_DIST_MIN=20,t.SHAFT_DIST_MAX=30,t.SHAFT_SEGMENTS_MIN=4,t.SHAFT_SEGMENTS_MAX=8,t.SHAFT_SEGMENT_LENGTH_MIN=4,t.SHAFT_SEGMENT_LENGTH_MAX=6,t.SHAFT_DELAY=10,t.NINJA_DELAY_INITIAL=15,t.NINJA_DELAY_MIN=4,t.NINJA_DELAY_MAX=10,t.NINJA_SPEED=450,t.NINJA_ACTIVATE_DISTANCE=768,t}();t.Gameplay=e}(Ninja2||(Ninja2={}));!function(t){var e=function(){function t(t,e,i){void 0===i&&(i=null),this.name="<no name>",this.debug=0,this._newFunction=null,this._count=0,this._pool=[],this._canGrow=!0,this._poolSize=0,this._classType=t,this._newFunction=i;for(var n=0;n<e;n++){var a=this.newItem();this._pool[this._count++]=a}this._poolSize=e}return t.prototype.createItem=function(){return 0===this._count?(this.debug,this._canGrow?this.newItem():null):(this.debug,this._pool[--this._count])},t.prototype.destroyItem=function(t){this.debug,this._pool[this._count++]=t},Object.defineProperty(t.prototype,"newFunction",{set:function(t){this._newFunction=t},enumerable:!0,configurable:!0}),t.prototype.newItem=function(){return null!==this._newFunction?this._newFunction():new this._classType},Object.defineProperty(t.prototype,"canGrow",{set:function(t){this._canGrow=t},enumerable:!0,configurable:!0}),t.DEBUG_ALLOCATION=1,t.DEBUG_CREATE=2,t.DEBUG_DESTROY=4,t.DEBUG_ALL=7,t}();t.Pool=e}(Ninja2||(Ninja2={}));!function(t){var e=function(t){function e(e,i,n,a,s){var o=t.call(this,e,i,n,a)||this;return void 0!==s&&o.setAnchoredFrame(s),o}return __extends(e,t),e.prototype.setAnchoredFrame=function(t){if("string"==typeof this.key){var e=null;"string"==typeof t?(this.frameName=t,e=this.game.cache.getFrameByName(this.key,t)):(this.frame=t,e=this.game.cache.getFrameByIndex(this.key,t)),void 0!==e.anchorX&&void 0!==e.anchorY&&this.anchor.setTo(e.anchorX,e.anchorY)}},e}(Phaser.Sprite);t.AnchoredSprite=e}(Ninja2||(Ninja2={}));!function(t){var e=function(e){function i(i,n){var a=e.call(this,i,n)||this;a._bg=null,a._backClouds=null,a._mountains=null,a._frontClouds=null,a._front=null,a.fixedToCamera=!0,a._bg=i.add.sprite(0,0,"Sprites","bg",a),a._bg.height=a.game.height,a._bg.width=a.game.width;var s=i.height,o=i.width/2;return i.add.sprite(o,s-i.height/2,"Sprites","sun",a).anchor.set(.5,.5),a._backClouds=new t.Clouds(i,a,3,5,10,["mrak1"],200,Math.max(0,i.height-440-200)),a._mountains=i.add.sprite(o,s,"Sprites","mountains",a),a._mountains.anchor.set(.5,1),a._frontClouds=new t.Clouds(i,a,3,20,40,["mrak2","mrak3"],0,Math.max(0,i.height-540)),a._front=i.add.sprite(o,s,"Sprites","front",a),a._front.anchor.set(.5,1),a}return __extends(i,e),i.prototype.updateClouds=function(){this._backClouds.updatePosition(),this._frontClouds.updatePosition()},i}(Phaser.Group);t.Background=e}(Ninja2||(Ninja2={}));!function(t){var e=function(t){function e(e){var i=t.call(this,e,0,0,"Sprites")||this;return i.fixedToCamera=!0,i.anchor.set(.5),i.exists=!1,i._tween=e.add.tween(i.scale).to({x:1.5,y:1.5},300,Helper.Easing.halfSin,!1),i}return __extends(e,t),e.prototype.activate=function(t){0===t?this.exists=!1:(this.exists=!0,this.frameName=e.FRAMES[t-1],this._tween.isRunning||this._tween.start())},e.FRAMES=["bonus_x2","bonus_x4","bonus_x8","bonus_x16"],e}(Phaser.Sprite);t.BonusIndicator=e}(Ninja2||(Ninja2={}));!function(t){var e=function(){function t(e){this._game=null,this._bmd=null,this._background=null,this._profile=null,this._frame=null,this._curtain=null,this._crown=null,this._text=null,this._game=e,this._background=new Phaser.Sprite(e,0,0,"Challenge"),this._bmd=e.make.bitmapData(this._background.width,this._background.height),this._profile=new Phaser.Sprite(e,0,0),this._frame=new Phaser.Sprite(e,0,0,"Sprites","profileMaskBig"),this._curtain=new Phaser.Sprite(e,0,0,"Sprites","zaves2"),this._crown=new Phaser.Sprite(e,0,0,"Sprites","crown"),this._text=new Phaser.Text(e,0,0,"",t.TEXT_STYLE_TEXT),this._text.anchor.set(.5)}return Object.defineProperty(t.prototype,"bmd",{get:function(){return this._bmd},enumerable:!0,configurable:!0}),t.prototype.createChallengeImage=function(e,i,n){this._background.loadTexture("Challenge"),this._bmd.draw(this._background,0,0),this._bmd.draw(this._curtain,786,-128),this._profile.loadTexture(e),this._bmd.draw(this._profile,851,44,160,160),this._bmd.draw(this._frame,851,44,160,160),this._text.clearColors(),this._text.setStyle(t.TEXT_STYLE_TEXT,!0),this._text.setText(i),this._bmd.draw(this._text,929,288,this._text.width,this._text.height),this._bmd.draw(this._text,931,288,this._text.width,this._text.height);var a=n+"?";this._text.setStyle(t.TEXT_STYLE_NUMBER,!0),this._text.addColor("#56424B",a.length-1),this._text.setText(a),this._bmd.draw(this._text,929,388,this._text.width,this._text.height),this._bmd.draw(this._text,931,388,this._text.width,this._text.height)},t.prototype.createResultImage=function(e,i,n,a){this._background.loadTexture("Result"),this._bmd.draw(this._background,0,0),this._bmd.draw(this._curtain,167,-128),this._bmd.draw(this._curtain,772,-64),this._profile.loadTexture("photo_"+e.getID()),this._bmd.draw(this._profile,231,114,160,160),this._profile.loadTexture("photo_"+n.getID()),this._bmd.draw(this._profile,836,114,160,160),this._bmd.draw(this._frame,231,114,160,160),this._bmd.draw(this._frame,836,114,160,160),i>a?this._bmd.draw(this._crown,207,63):i<a&&this._bmd.draw(this._crown,812,63),this._text.clearColors(),this._text.setStyle(t.TEXT_STYLE_NUMBER,!0);var s=""+i;this._text.setText(s),this._bmd.draw(this._text,306,350,this._text.width,this._text.height),this._bmd.draw(this._text,308,350,this._text.width,this._text.height),s=""+a,this._text.setText(s),this._bmd.draw(this._text,911,350,this._text.width,this._text.height),this._bmd.draw(this._text,913,350,this._text.width,this._text.height),this._text.setStyle(t.TEXT_STYLE_TEXT,!0),this._text.setText(e.getName()),this._bmd.draw(this._text,306,407,this._text.width,this._text.height),this._bmd.draw(this._text,308,407,this._text.width,this._text.height),this._text.setText(n.getName()),this._bmd.draw(this._text,911,407,this._text.width,this._text.height),this._bmd.draw(this._text,913,407,this._text.width,this._text.height)},t.prototype.getImage=function(){return this._bmd.canvas.toDataURL()},t.TEXT_STYLE_TEXT={font:"bold 33px Arial",fill:"#56424B",align:"center",wordWrap:!0,wordWrapWidth:230},t.TEXT_STYLE_NUMBER={font:"bold 70px Arial",fill:"#FF1D47",align:"center"},t}();t.ChallengeImage=e}(Ninja2||(Ninja2={}));!function(t){var e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.init=function(t,e,i,n){var a=n>0?-100:this.game.width+100;this.position.set(a,this.game.rnd.integerInRange(e,e+i));var s=this.game.rnd.realInRange(.75,1.25);this.scale.set(s*this.game.rnd.sign(),s),this.frameName=t,this._speed=n,this.exists=!0,this.visible=!0},e.prototype.updateCloud=function(){this.position.x+=this._speed*this.game.time.physicsElapsed;var t=this.position.x;(t<-100||t>this.game.width+100)&&this.kill()},e}(Phaser.Sprite);t.Cloud=e}(Ninja2||(Ninja2={}));!function(t){var e=function(e){function i(i,n,a,s,o,r,h,l){var c=e.call(this,i,n)||this;c._clouds=[],c._count=a,c._speedMin=s,c._speedMax=o,c._frames=r,c._topY=h,c._rangeY=l;for(var p=0;p<a;p++){var _=new t.Cloud(i,0,0,"Sprites");_.anchor.x=.5,_.kill(),c.add(_),c._clouds[p]=_}return c}return __extends(i,e),i.prototype.updatePosition=function(){for(var t=0;t<this._count;t++){var e=this._clouds[t];if(e.exists)e.updateCloud();else{var i=this.game.rnd;e.init(this._frames[i.integerInRange(0,this._frames.length-1)],this._topY,this._rangeY,i.realInRange(this._speedMin,this._speedMax)*i.sign())}}},i}(Phaser.Group);t.Clouds=e}(Ninja2||(Ninja2={}));!function(t){var e=function(t){function e(e){var i=t.call(this,e,null)||this;return i._radius=0,i._circle=new Phaser.Sprite(e,0,0,"Sprites","doubleCircle"),i._circle.anchor.set(.5),i._radius=i._circle.width/2*.95,i.add(i._circle),i._coin1=new Phaser.Sprite(e,0,0,"Sprites","coin2"),i._coin1.anchor.set(.5),i._coin1.scale.set(.5),i.add(i._coin1),i._coin2=new Phaser.Sprite(e,0,0,"Sprites","coin2"),i._coin2.anchor.set(.5),i._coin2.scale.set(.5),i.add(i._coin2),i.scale.set(1.3),i}return __extends(e,t),e.prototype.updateDouble=function(){if(this.visible){var t=Math.sin(Phaser.Math.degToRad(this.game.time.time/2%360)),e=.8+.2*t;this._circle.scale.set(e),this._circle.alpha=.4+.2*t;var i=this.game.time.time/10%360,n=Math.cos(Phaser.Math.degToRad(i)),a=Math.sin(Phaser.Math.degToRad(i)),s=this._radius*e;this._coin1.position.set(n*s,a*s),this._coin2.position.set(-n*s,-a*s)}},e}(Phaser.Group);t.CoinBonus=e}(Ninja2||(Ninja2={}));!function(t){var e=function(t){function e(e){var i=t.call(this,e,0,0,"Sprites","Dark")||this;return i.fixedToCamera=!0,i.visible=!1,i}return __extends(e,t),e.prototype.show=function(t){void 0===t&&(t=.5),this.visible=!0,this.width=this.game.width,this.height=this.game.height,this.alpha=t},e.prototype.hide=function(){this.visible=!1},e.prototype.fade=function(t,e,i,n,a){this.show(),this.alpha=t;var s=this.game.add.tween(this).to({alpha:e},i,Phaser.Easing.Linear.None,!0);null!==n&&s.onComplete.add(n,a)},e}(Phaser.Sprite);t.Dark=e}(Ninja2||(Ninja2={}));!function(t){var e=function(e){function i(n){var a=e.call(this,n)||this;return a._curtain=null,a._scoreGroup=null,a._normalCoins=null,a._bonusCoins=null,a._totalCoins=null,a._collect=null,a._collect2x=null,a._acceptInput=!1,a.fixedToCamera=!0,a.cameraOffset.set(n.width/2,0),a._curtain=n.add.sprite(0,0,"Sprites","zaves",a),a._curtain.anchor.x=.5,a._scoreGroup=new Phaser.Group(n,a),a._scoreGroup.position.set(0,390),n.add.sprite(-60,20,"Sprites","uiCoin",a._scoreGroup).anchor.set(.5),a._normalCoins=new Phaser.BitmapText(n,-28,0,"Font","1234",40,"left"),a._normalCoins.tint=5849936,a._scoreGroup.add(a._normalCoins),n.add.sprite(-60,65,"Sprites","crown_small",a._scoreGroup).anchor.set(.5),a._bonusCoins=new Phaser.BitmapText(n,-28,45,"Font","1234",40,"left"),a._bonusCoins.tint=5849936,a._scoreGroup.add(a._bonusCoins),n.add.sprite(0,100,"Sprites","line",a._scoreGroup).anchor.set(.5),n.add.sprite(-60,135,"Sprites","3coins",a._scoreGroup).anchor.set(.5),a._totalCoins=new Phaser.BitmapText(n,-28,115,"Font","1234",45,"left"),a._totalCoins.tint=16718919,a._scoreGroup.add(a._totalCoins),a._collect=new t.SimpleButton(n,"collect"),a._collect.position.set(-i.COLLECT_OFFSET,n.height-190),a.add(a._collect),a._collect2x=new t.SimpleButton(n,"collect2"),a._collect2x.position.set(i.COLLECT_OFFSET,n.height-190),a.add(a._collect2x),a.exists=!1,a}return __extends(i,e),i.prototype.setCoins=function(t,e){this._normalCoins.text=t.toString(),this._bonusCoins.text=e.toString(),this._totalCoins.text=(t+e).toString()},Object.defineProperty(i.prototype,"collectButton",{get:function(){return this._collect},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"collect2xButton",{get:function(){return this._collect2x},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"acceptInput",{get:function(){return this._acceptInput},set:function(t){this._acceptInput=t},enumerable:!0,configurable:!0}),i.prototype.show=function(){App.Global.adLoaded?(this._collect2x.visible=!0,this._collect.x=-i.COLLECT_OFFSET,this._collect2x.x=i.COLLECT_OFFSET):(this._collect2x.visible=!1,this._collect.x=0),this.exists=this.visible=!0,this._acceptInput=!0},i.prototype.hide=function(){this.exists=this.visible=!1,this._acceptInput=!1},i.COLLECT_OFFSET=140,i}(Phaser.Group);t.EndScreen=e}(Ninja2||(Ninja2={}));!function(t){var e=function(e){function i(t,i){var n=e.call(this,t,0,0,"Sprites","redninja1")||this;n.anchor.set(.5,.5),n.animations.add("red",["redninja1","redninja2","redninja3","redninja4"],20,!0),t.physics.enable(n,Phaser.Physics.ARCADE);var a=n.body;return a.allowGravity=!1,a.setCircle(25,0,65),i&&(n.alpha=.3),n.exists=!1,n}return __extends(i,e),Object.defineProperty(i.prototype,"waiting",{get:function(){return this._waiting},enumerable:!0,configurable:!0}),i.prototype.prepare=function(t,e,i){this.position.set(t,e),this.body.reset(t,e),this.scale.x=i?1:-1;this.body.velocity.set(0),this.exists=!0,this._waiting=!0},i.prototype.activate=function(e){if(this.exists&&this._waiting&&this.y-e>-t.Gameplay.NINJA_ACTIVATE_DISTANCE){this._waiting=!1,this.animations.play("red");this.body.velocity.set(0,t.Gameplay.NINJA_SPEED)}},i}(Phaser.Sprite);t.FallingNinja=e}(Ninja2||(Ninja2={}));!function(t){var e;!function(t){t[t.NONE=0]="NONE",t[t.COIN=1]="COIN",t[t.MAGNET=2]="MAGNET",t[t.DOUBLE=3]="DOUBLE"}(e=t.eBonusType||(t.eBonusType={}));var i=function(){function i(i,n){this._hlpPt=new t.HitInfo,this._patternsLeft=[],this._patternsRight=[],this._prevRnd=!1,this._leftEdgeTile=0,this._rightEdgeTile=0,this._hasCenterTile=!1,this._bonusScheduled=!1,this._bonusDist=0,this._rowsWithoutCoins=0,this._shaftScheduled=!1,this._shaftDist=0,this._ninjaDelay=0,this._leftRoof=!1,this._rightRoof=!1,this._game=i,this._play=n,this._rnd=new Phaser.RandomDataGenerator([(Date.now()*Math.random()).toString()]),this._rndBooleanBalancer=new Helper.RandomBooleanBalancer(this._rnd,2),this._grid=[];for(var a=0;a<64;a++){for(var s=[],o=0;o<10;o++)s[o]=0;this._grid.push(s)}this._wallsPool=new t.Pool(Phaser.Sprite,32,function(){var t=new Phaser.Sprite(i,0,0,"Sprites");i.physics.enable(t,Phaser.Physics.ARCADE);var e=t.body;return e.allowGravity=!1,e.immovable=!0,e.moves=!1,e.setSize(64,64,0,0),t}),this._walls=new Phaser.Group(i),this._linesPool=new t.Pool(Phaser.Sprite,40,function(){return new Phaser.Sprite(i,0,0,"Sprites")}),this._lines=new Phaser.Group(i),this._bonuses=new Phaser.Group(i);for(a=0;a<80;a++){var r=new Phaser.Sprite(i,0,0,"Sprites");r.ghostPicked=!1,r.bonusType=e.COIN,r.anchor.set(.5,.5),r.animations.add("mince",["coin1","coin2","coin3","coin4","coin5","coin6","coin7","coin8","coin9"],10,!0),r.animations.add("magnet",["magnet1","magnet2","magnet3","magnet4","magnet5","magnet6","magnet7","magnet8","magnet9","magnet10"],8,!0),r.animations.add("double",["2x1","2x2","2x3","2x4","2x5","2x6"],8,!0),i.physics.enable(r,Phaser.Physics.ARCADE);var h=r.body;h.allowGravity=!1,h.immovable=!0,h.moves=!1,h.setSize(40,40,-4,0),r.exists=!1,this._bonuses.add(r)}this._magnetCoins=new Phaser.Group(i),this._magnetCoins.classType=t.MagnetCoin,this._magnetCoins.createMultiple(40,"Sprites"),this._ghostNinjas=new Phaser.Group(i),this._ninjas=new Phaser.Group(i);for(a=0;a<12;a++)this._ninjas.add(new t.FallingNinja(i,!1)),this._ghostNinjas.add(new t.FallingNinja(i,!0));this._shaftPattern=new t.Pattern(i,t.Patterns.PATTERN_SHAFT,this._rnd,function(e){e.intParams[0]=this._rnd.integerInRange(t.Gameplay.SHAFT_SEGMENTS_MIN,t.Gameplay.SHAFT_SEGMENTS_MAX),e.intParams[1]=this._rnd.integerInRange(t.Gameplay.SHAFT_SEGMENT_LENGTH_MIN,t.Gameplay.SHAFT_SEGMENT_LENGTH_MAX)},this),this._patternInitial=new t.Pattern(i,t.Patterns.PATTERN_0,this._rnd,function(t){t.intParams[0]=5,t.intParams[1]=3},this);var l;l=new t.Pattern(i,t.Patterns.PATTERN_1,this._rnd,function(t){var e=t.height;t.intParams[0]=e>6?3:2,t.intParams[1]=e>6?3:2,t.intParams[2]=e>6?this._rnd.integerInRange(3,4):this._rnd.integerInRange(2,3),t.intParams[3]=e<=5?this._rnd.integerInRange(1,2):1},this),this._patternsLeft.push(l),this._patternsRight.push(l),l=new t.Pattern(i,t.Patterns.PATTERN_2a,this._rnd,function(t){t.intParams[0]=1,t.intParams[1]=2,t.intParams[2]=this._rnd.integerInRange(2,3)},this),this._patternsRight.push(l),l=new t.Pattern(i,t.Patterns.PATTERN_2b,this._rnd,function(t){t.intParams[0]=1,t.intParams[1]=2,t.intParams[2]=this._rnd.integerInRange(2,3)},this),this._patternsLeft.push(l),l=new t.Pattern(i,t.Patterns.PATTERN_3a,this._rnd,function(t){t.intParams[0]=1,t.intParams[1]=1,t.intParams[2]=this._rnd.integerInRange(2,3),t.intParams[3]=2*t.intParams[2],t.intParams[4]=this._rnd.integerInRange(1,3)},this),this._patternsLeft.push(l),this._patternsRight.push(l),l=new t.Pattern(i,t.Patterns.PATTERN_3b,this._rnd,function(t){t.intParams[0]=1,t.intParams[1]=1,t.intParams[2]=this._rnd.integerInRange(2,3),t.intParams[3]=2*t.intParams[2],t.intParams[4]=this._rnd.integerInRange(1,2)},this),this._patternsLeft.push(l),this._patternsRight.push(l),l=new t.Pattern(i,t.Patterns.PATTERN_4,this._rnd,function(t){t.intParams[0]=this._rnd.integerInRange(2,3),t.intParams[1]=this._rnd.integerInRange(2,3),t.intParams[2]=Math.ceil(t.intParams[1]/2),t.intParams[3]=t.intParams[1]-t.intParams[2],t.boolParams[2]=1===this._rnd.sign()},this),this._patternsLeft.push(l),this._patternsRight.push(l),l=new t.Pattern(i,t.Patterns.PATTERN_6,this._rnd,function(t){t.intParams[0]=1,t.intParams[1]=1,t.intParams[2]=3+t.height-8},this),this._patternsLeft.push(l),this._patternsRight.push(l),l=new t.Pattern(i,t.Patterns.PATTERN_7,this._rnd,function(t){t.height;t.intParams[0]=t.height>=8?4:3,t.intParams[1]=this._rnd.integerInRange(1,3),t.intParams[2]=t.height>=8?5:4,t.intParams[3]=t.height>=8?3:2},this),this._patternsLeft.push(l),this._patternsRight.push(l),l=new t.Pattern(i,t.Patterns.PATTERN_10,this._rnd,function(t){t.intParams[0]=this._rnd.integerInRange(2,3),t.intParams[1]=t.height>=8?4:3,t.intParams[2]=t.height>=8?3:2},this),this._patternsLeft.push(l),this._patternsRight.push(l),l=new t.Pattern(i,t.Patterns.PATTERN_8,this._rnd,function(t){t.intParams[0]=2,t.intParams[1]=2,t.intParams[2]=3},this),this._patternsLeft.push(l),this._patternsRight.push(l),l=new t.Pattern(i,t.Patterns.PATTERN_5,this._rnd,function(t){t.height;t.intParams[0]=t.height>=8?3:2,t.intParams[1]=this._rnd.integerInRange(1,3),t.intParams[2]=t.height>=8?3:2,t.intParams[3]=t.height>=8?3:2},this),this._patternsLeft.push(l),this._patternsRight.push(l),l=new t.Pattern(i,t.Patterns.PATTERN_9,this._rnd,function(t){t.height;t.intParams[0]=2,t.intParams[1]=2,t.intParams[2]=1,t.intParams[3]=this._rnd.integerInRange(2,3),t.boolParams[2]=1===this._rnd.sign()},this),this._patternsLeft.push(l),this._patternsRight.push(l)}return Object.defineProperty(i.prototype,"walls",{get:function(){return this._walls},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bonuses",{get:function(){return this._bonuses},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"ninjas",{get:function(){return this._ninjas},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"ghostNinjas",{get:function(){return this._ghostNinjas},enumerable:!0,configurable:!0}),i.prototype.getMagnetCoin=function(){var t=this._magnetCoins.getFirstExists(!1);return null===t&&(t=this._magnetCoins.create(0,0,"Sprites",0,!1)),t},i.prototype.reseed=function(){return this._rnd.sow([(Date.now()*Math.random()).toString()]),this._rnd.state()},i.prototype.reset=function(e){null!==e&&this._rnd.state(e),this._cameraY=0;for(var i=0;i<this._grid.length;i++)for(var n=0;n<this._grid[i].length;n++)this._grid[i][n]=0;this.cleanTiles(0,!0),this._lastRow=0;var a=!t.Gameplay.START_LEFT;this._pattern=this._patternInitial,this._pattern.randomize(6,t.Gameplay.START_LEFT,a),this._lastWidth=4,this._patternX=3,this._endsLeft=a,this._coinsPause=t.Gameplay.COINS_PAUSE,this._previousCoinsRow=!1,this._prevCoinDropped=!1,this._coinSequence=!1,this._startTime=this._game.time.time,this._rowsWithoutCoins=0,this._bonusScheduled=!1,this._bonusDist=this._rnd.integerInRange(t.Gameplay.BONUS_DIST_MIN,t.Gameplay.BONUS_DIST_MAX),this._shaftScheduled=!1,this._shaftDist=this._rnd.integerInRange(t.Gameplay.SHAFT_DIST_MIN,t.Gameplay.SHAFT_DIST_MAX),this._rndBooleanBalancer.reset(2),this._leftRoof=this._rightRoof=!1},i.prototype.cleanTiles=function(t,e){void 0===e&&(e=!1);for(var i=t+this._game.height+64,n=this._walls.length-1;n>=0;n--){var a=this._walls.getChildAt(n);(a.y>i||e)&&(this._walls.remove(a),a.parent=null,this._wallsPool.destroyItem(a))}for(n=this._lines.length-1;n>=0;n--){var s=this._lines.getChildAt(n);(s.y>i||e)&&(this._lines.remove(s),s.parent=null,this._linesPool.destroyItem(s))}for(n=this._bonuses.length-1;n>=0;n--){var o=this._bonuses.getChildAt(n);(o.y>i||e)&&(o.exists=!1)}for(n=this._ninjas.length-1;n>=0;n--){((h=this._ninjas.getChildAt(n)).y>i||e)&&(h.exists=!1)}var r=this._play.ghostMode&&!this._play.ghostAlive;for(n=this._ghostNinjas.length-1;n>=0;n--){var h;((h=this._ghostNinjas.getChildAt(n)).y>i||e||r)&&(h.exists=!1)}},i.prototype.updateGenerator=function(t){this._cameraY=t,this.cleanTiles(t);for(var e=Math.min(Math.floor(t/64)-2,Math.floor((t+this._game.height)/64)-30);this._lastRow>e;){var i=63&this._lastRow;for(this.clearGridRow(i);!this._pattern.putIntoData(this._grid,this._patternX,i);)this.randomizePattern();this.drawRow(i,this._lastRow),this.placeBonus(),this.updateShaft(),this.activateNinjas(),--this._lastRow}},i.prototype.randomizePattern=function(){this._prevEndsLeft=this._endsLeft;for(var t=this._pattern.exitLeftX,e=this._pattern.exitRightX,i=Phaser.Math.clamp(-this._lastRow/200,0,1);;){var n=1===this._rnd.sign(),a=n?this._patternsLeft:this._patternsRight,s=Math.max(5,Math.floor((a.length-1)*i)),o=a[this._rnd.integerInRange(0,s)];this._shaftScheduled&&(this._shaftScheduled=!1,o=this._shaftPattern);var r=o.minPatternHeight,h=o.maxPatternHeight,l=this._lastWidth+Phaser.Math.sign(this._rnd.integerInRange(0,h-r)-(this._lastWidth-r))*this._rnd.integerInRange(1,2);l=Phaser.Math.clamp(l,r,h),o.excludeLevel=l,this._endsLeft=1===this._rnd.sign(),(this._endsLeft&&-1===o.exitLeftX||!this._endsLeft&&-1===o.exitRightX)&&(this._endsLeft=!this._endsLeft),o.randomize(l,n,this._endsLeft);var c=o.height,p=this._patternX+(this._prevEndsLeft?t:e),_=0;p-=n?o.enterTopY:o.enterBottomY,n&&!this._prevEndsLeft?(p-=3,_=-1):!n&&this._prevEndsLeft?(p+=3,_=1):n&&this._prevEndsLeft?_=-1:n||this._prevEndsLeft||(_=1);for(var u=1;u>0&&(p<0||p+c>10);u--)p+=_;if(0!==u){this._pattern=o,this._patternX=p,this._lastWidth=c,this._leftRoof=this._rnd.integerInRange(0,99)<50,this._rightRoof=this._rnd.integerInRange(0,99)<50,this._pattern,this._shaftPattern;break}}},i.prototype.drawRow=function(i,n){--this._coinsPause;var a=!1,s=this._previousCoinsRow;this._previousCoinsRow=!1,this._prevRnd=!1;for(var o=i+1&63,r=0;r<this._grid[0].length;r++){if((3840&this._grid[i][r])===t.MINCE&&(this._rowsWithoutCoins=0,this._previousCoinsRow=!0,this._coinsPause<=0&&!s&&(this._coinSequence||(this._coinSequence=!0)),this._coinSequence)){a=!0;this._grid[i][r];this._grid[i][r]=0;var h=this._bonuses.getFirstExists(!1);null!==h&&(h.ghostPicked=!1,h.bonusType=e.COIN,h.position.set(64*r+32,64*n+32),h.exists=!0,h.animations.play("mince"))}128===this._grid[i][r]&&this.addTile(r,n,"k0"),0===r&&this.addBorder(-1,n,i,o),this.addBorder(r,n,i,o)}this.addRoof(o,i),this._coinSequence&&!a&&(this._coinSequence=!1,this._coinsPause=t.Gameplay.COINS_PAUSE),a||++this._rowsWithoutCoins},i.prototype.addRoof=function(t,e){this.analyzeRow(t);for(var n=this._lastRow+1,a=this._grid[t],s=this._grid[e],o=this._grid[t+1&63],r=this._lines.children.length,h=0;h<a.length;h++){var l=h<=this._leftEdgeTile,c=h>=this._rightEdgeTile;if((l||c)&&(!(l&&!this._leftRoof||c&&!this._rightRoof)&&128===a[h]&&128!==s[h])){var p="rnd04",_=0;l?(_+=h-1<0||128===s[h-1]?1:0,_+=(h-1<0||128===o[h-1])&&128!==o[h]?2:0,(_+=128===o[h]&&128!==o[h+1]?4:0)>0&&_<=5?p=i.LEFT_ROOF[_]:_=0):(_+=h+1>=a.length||128===s[h+1]?1:0,_+=(h+1>=a.length||128===o[h+1])&&128!==o[h]?2:0,(_+=128===o[h]&&128!==o[h-1]?4:0)>0&&_<=5?p=i.RIGHT_ROOF[_]:_=0);var u=this._linesPool.createItem();null!==u&&(u.scale.x=1,u.anchor.set(0),0===_?u.position.set(64*h,64*n):u.position.set(64*h-16,64*n-16),u.frameName=p,null===u.parent&&(c?this._lines.add(u):this._lines.add(u,!1,r)))}}},i.prototype.addBorder=function(t,e,n,a){var s=this._grid,o=this._prevRnd;this._prevRnd&&(this._prevRnd=!1);var r=0;r+=t<0||128===s[n][t]?1:0,r+=t+1>=s[0].length||128===s[n][t+1]?2:0,r+=t<0||128===s[a][t]?4:0,r+=t+1>=s[0].length||128===s[a][t+1]?8:0;var h=-1===t&&5===r||t===s[0].length-1&&10===r||15===r&&this._game.rnd.integerInRange(0,99)>=5;if(r>0&&!h){if(15===r){if(o||t<0||t>=s[0].length-1)return;null!==(l=this._linesPool.createItem())&&(l.anchor.set(.5),l.scale.x=this._game.rnd.sign(),l.position.set(64*t+64,64*e+64),l.frameName=i.RND_TILES[this._game.rnd.integerInRange(0,i.RND_TILES.length-1)],null===l.parent&&this._lines.add(l)),this._prevRnd=!0}else{var l;null!==(l=this._linesPool.createItem())&&(l.anchor.set(0),l.scale.set(1),l.position.set(64*t+32,64*e+32),l.frameName=i.BORDER_TILES[r],null===l.parent&&this._lines.add(l))}}},i.prototype.addTile=function(t,e,i){var n=this._wallsPool.createItem();n.position.set(64*t,64*e),n.exists=!0,n.visible=!0,n.frameName=i,null===n.parent&&this._walls.add(n)},i.prototype.analyzeRow=function(t){var e=this._grid[t];for(this._leftEdgeTile=0;128===e[this._leftEdgeTile];)++this._leftEdgeTile;for(this._rightEdgeTile=e.length-1;128===e[this._rightEdgeTile];)--this._rightEdgeTile;this._hasCenterTile=!1;for(var i=this._leftEdgeTile;i<=this._rightEdgeTile;i++)if(128===e[i]){this._hasCenterTile=!0;break}},i.prototype.placeBonus=function(){if(this._bonusScheduled){if(this._rowsWithoutCoins<3)return;var i=this._lastRow+1&63;if(this.analyzeRow(i),this._hasCenterTile)return;var n=0;n=0===this._leftEdgeTile?this._rightEdgeTile:this._rightEdgeTile===this._grid[0].length-1?this._leftEdgeTile:(this._leftEdgeTile+this._rightEdgeTile)/2;for(var a=Math.floor(n),s=Math.floor(n+.9),o=!1,r=this._lastRow;!o&&r<=this._lastRow+2;r++)for(var h=this._grid[63&r],l=a;l<=s;l++)if(128===h[l]){o=!0;break}if(o)return;var c=this._bonuses.getFirstExists(!1);if(null!==c){var p=1===this._rnd.sign()?e.MAGNET:e.DOUBLE;c.ghostPicked=!1,c.bonusType=p,c.position.set(64*n+32,64*(this._lastRow+1)+32),c.exists=!0,c.animations.play(p===e.MAGNET?"magnet":"double")}this._coinsPause=3,this._bonusScheduled=!1,this._bonusDist=this._rnd.integerInRange(t.Gameplay.BONUS_DIST_MIN,t.Gameplay.BONUS_DIST_MAX)}else--this._bonusDist<0&&(this._bonusScheduled=!0)},i.prototype.updateShaft=function(){if(this._pattern===this._shaftPattern){if(--this._ninjaDelay<=0){var e=this._lastRow;this.analyzeRow(63&e);var i=this._rndBooleanBalancer.getBoolean(),n=i?this._leftEdgeTile:this._rightEdgeTile;if(0===n||n===this._grid[0].length-1)return;var a=this._ninjas.getFirstExists(!1);if(null!==a&&a.prepare(64*n+32,64*e+32,i),this._play.ghostMode&&this._play.ghostAlive){var s=this._ghostNinjas.getFirstExists(!1);null!==s&&s.prepare(64*n+32,64*e+32,i)}this._ninjaDelay=this._rnd.integerInRange(t.Gameplay.NINJA_DELAY_MIN,t.Gameplay.NINJA_DELAY_MAX)}}else!this._shaftScheduled&&--this._shaftDist<=0&&(this._shaftScheduled=!0,this._shaftDist=this._rnd.integerInRange(t.Gameplay.SHAFT_DIST_MIN,t.Gameplay.SHAFT_DIST_MAX),this._ninjaDelay=t.Gameplay.NINJA_DELAY_INITIAL)},i.prototype.activateNinjas=function(){for(var e=this._play.player.y,i=0;i<this._ninjas.length;i++)this._ninjas.getAt(i).activate(e);if(this._play.ghostMode&&this._play.ghostAlive){var n=e+t.Gameplay.GHOST_DIST;for(i=0;i<this._ghostNinjas.length;i++){var a=this._ghostNinjas.getAt(i);a.activate(n),a.waiting||this._play.ghostActive||(a.exists=!1)}}},i.prototype.clearGridRow=function(t){for(var e=0;e<10;e++)this._grid[t][e]=0},i.prototype.castRay=function(t,e,i,n,a,s){return this.doCastRay(t,e,i,n,a,s)},i.prototype.castYLimitedRay=function(t,e,i,n,a,s,o,r){return this.doCastRay(t,e,i,n,a,s,o,r)},i.prototype.castYLimitedRayWithCallback=function(t,e,i,n,a,s,o,r,h){return this.doCastRay(t,e,i,n,a,0,s,o,r,h)},i.prototype.doCastRay=function(t,e,n,a,s,o,r,h,l,c){void 0===r&&(r=0),void 0===h&&(h=9),void 0===l&&(l=null),void 0===c&&(c=null);var p=this._hlpPt;p.hitType=s,p.unit=o,p.fromX=t,p.fromY=e;var _=Math.floor(t/64),u=Math.floor(e/64),d=Phaser.Math.sign(n),m=Phaser.Math.sign(a),g=Math.abs(n),f=Math.abs(a),y=t/64-_;d>0&&(y=1-y);var P=e/64-u;m>0&&(P=1-P);for(var S=y*f-P*g;;)if(S<0){_+=d;if((b=u<=0&&_>=0&&_<10)&&null!==l&&l.call(c,_,u),(b&&(this._grid[63&u][_%64]&i.WALL)>0||!b)&&(!b||0===s||2===s)){if(1===o){var v=e+a*((E=64*(d<0?_+1:_))-t)/n;p.destX=E,p.destY=v;break}p.destX=_,p.destY=u;break}S+=f}else{var b;if((b=(u+=m)<=0&&_>=0&&_<10)&&null!==l&&l.call(c,_,u),(b&&(this._grid[63&u][_%64]&i.WALL)>0||!b)&&(!b||0===s||1===s)){if(1===o){var E=t+n*((v=64*(m<0?u+1:u))-e)/a;p.destX=E,p.destY=v;break}p.destX=_,p.destY=u;break}S-=g}return p},i.WALL=128,i.BORDER_TILES=["b00","b01","b02","b03","b04","b05","b06","b07","b08","b09","b10","b11","b12","b13","b14","b15"],i.RND_TILES=["rnd00","rnd01","rnd02"],i.LEFT_ROOF=["rnd04","L1","L2","L3","L4","L5"],i.RIGHT_ROOF=["rnd04","P1","P2","P3","P4","P5"],i}();t.Generator=i}(Ninja2||(Ninja2={}));!function(t){var e=function(){return function(){}}();t.HitInfo=e}(Ninja2||(Ninja2={}));!function(t){var e=function(){function e(t,i,n,a,s){void 0===a&&(a=null),void 0===s&&(s=null),this._intParams=[],this._boolParams=[],this._cmdStack=[],this._fillUp=!0,this._fillDown=!0,this._fillTmp=[],this._game=t,this._rnd=n,this._pattern=i,this._randomizeFce=a,this._context=s;for(var o=0;o<e.MAX_INT_PARAMS;o++)this._intParams[o]=0;for(o=0;o<e.MAX_BOOL_PARAMS;o++)this._boolParams[o]=!1}return Object.defineProperty(e.prototype,"height",{get:function(){for(var t=this._pattern,e=0,i=0;i<t.rowHeader.length;i++)t.rowHeader[i]<this._excludeLevel&&++e;return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enterTop",{get:function(){return this._boolParams[0]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exitTop",{get:function(){return this._boolParams[1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"intParams",{get:function(){return this._intParams},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"boolParams",{get:function(){return this._boolParams},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"minPatternHeight",{get:function(){return this._pattern.minHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"maxPatternHeight",{get:function(){return this._pattern.maxHeight},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enterTopY",{get:function(){return this.getFirstBlock(!0,!1)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){return this._pattern.name},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"enterBottomY",{get:function(){var t=this.getFirstBlock(!1,!1);return-1===t?-1:this.height-t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exitLeftX",{get:function(){return this.getFirstBlock(!0,!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exitRightX",{get:function(){var t=this.getFirstBlock(!1,!0);return-1===t?-1:this.height-t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"excludeLevel",{set:function(t){this._excludeLevel=t},enumerable:!0,configurable:!0}),e.prototype.getFirstBlock=function(t,e){for(var i=this._pattern,n=t?1:-1,a=t?160:144,s=t?0:i.rowHeader.length-1,o=t?0:1,r=e?i.columnHeader.length-1:0,h=-1;s<i.rowHeader.length&&s>=0;s+=n)i.rowHeader[s]>=this._excludeLevel||((240&i.pattern[s][r])===a&&(h=o),++o);return h},e.prototype.randomize=function(t,i,n){if(this._excludeLevel=t,this._boolParams[0]=i,this._boolParams[1]=n,null!==this._randomizeFce)this._randomizeFce.call(this._context,this);else{for(var a=2;a<e.MAX_BOOL_PARAMS;a++)this._boolParams[a]=1===this._rnd.sign();for(a=0;a<e.MAX_INT_PARAMS;a++)this._intParams[a]=this._rnd.integerInRange(0,5)}this._x=0,this._cmdIndex=0,this._cmdStackTop=0,this._fillUp=!0,this._fillDown=!0,this._firstColumnInRepeat=!1,this._repeatLength=-1},e.prototype.patternColumnEmpty=function(t){for(var e=this._pattern,i=0;i<e.rowHeader.length;i++)if(!(e.rowHeader[i]>=this._excludeLevel)){var n=e.pattern[i][t];if(this.showBlock(n))return!1}return!0},e.prototype.showBlock=function(t){if(0==(128&t))return!1;var i=112&t,n=15&t;return!(i===e.BLOCK_OFF&&this._boolParams[n]||i===e.BLOCK_ON&&!this._boolParams[n])},e.prototype.putIntoData=function(i,n,a){for(var s=this._pattern,o=s.commands,r=this._cmdStack;this._cmdIndex<o.length;){var h=o[this._cmdIndex++];if(h===t.REP_START){var l=this._intParams[o[this._cmdIndex++]];r[this._cmdStackTop++]=l,r[this._cmdStackTop++]=this._cmdIndex,r[this._cmdStackTop++]=this._x,this._firstColumnInRepeat=!0,this._repeatLength=l}if(h===t.REP_END){var c=r[--this._cmdStackTop],p=r[--this._cmdStackTop];(l=r[--this._cmdStackTop]-1)>0&&(this._x=c,this._cmdIndex=p,r[this._cmdStackTop++]=l,r[this._cmdStackTop++]=p,r[this._cmdStackTop++]=c),this._repeatLength=-1}if(h===t.COLUMN){var _=this._x++,u=s.columnHeader[_];if(!((240&u)===e.HEADER_EXCLUDE&&(15&u)>=this._excludeLevel)&&!(0===_&&this.patternColumnEmpty(0)||_===s.columnHeader.length-1&&this.patternColumnEmpty(_)))return this.putColumnIntoData(i,n,a,_),this._firstColumnInRepeat=!1,this._repeatLength=-1,!0;this._firstColumnInRepeat=!1,this._repeatLength=-1}}return!1},e.prototype.putColumnIntoData=function(i,n,a,s){for(var o=this._pattern,r=0,h=0;h<o.rowHeader.length;h++)if(!(o.rowHeader[h]>=this._excludeLevel)){var l=o.pattern[h][s];if(l===t.MINCE&&(this._firstColumnInRepeat&&this._repeatLength>0||!this._firstColumnInRepeat&&-1===this._repeatLength)&&(i[a][n]=t.MINCE+(this._repeatLength<=0?0:this._repeatLength-this._cmdStack[this._cmdStackTop-3])),this.showBlock(l)){i[a][n]=128;var c=3840&l;c>0&&(this._fillTmp[r++]=c+n)}n++}for(h=0;h<r;h++){var p=this._fillTmp[h];if(this._fillUp&&(3840&p)===e.FILL_UP)for(var _=(255&p)-1;_>=0&&0===i[a][_];)i[a][_]=128,--_;if(this._fillDown&&(3840&p)==e.FILL_DOWN)for(_=1+(255&p);_<=9&&0===i[a][_];)i[a][_]=128,++_}},e.HEADER_EXCLUDE=16,e.HEADER_REPEAT=32,e.HEADER_REPEAT_START=48,e.HEADER_REPEAT_END=64,e.BLOCK_OFF=16,e.BLOCK_ON=32,e.FILL_UP=256,e.FILL_DOWN=512,e.MAX_INT_PARAMS=5,e.MAX_BOOL_PARAMS=5,e}();t.Pattern=e}(Ninja2||(Ninja2={}));!function(t){t.MINCE=2048,t.COLUMN=1,t.REP_START=2,t.REP_END=3;var e=function(){function e(){}return e.PATTERN_SHAFT={name:"pattern: sachta",minHeight:4,maxHeight:7,rowHeader:[0,2,4,5,6,7,8,9,3,1],columnHeader:[0,0,0,0,0],pattern:[[416,384,384,384,417],[0,0,0,0,0],[0,0,t.MINCE,0,0],[0,0,t.MINCE,0,0],[0,0,t.MINCE,0,0],[0,0,t.MINCE,0,0],[0,0,t.MINCE,0,0],[0,0,t.MINCE,0,0],[0,0,0,0,0],[656,640,640,640,657]],commands:[t.COLUMN,t.REP_START,0,t.COLUMN,t.REP_START,1,t.COLUMN,t.REP_END,t.COLUMN,t.REP_END,t.COLUMN]},e.PATTERN_0={name:"pattern 0: starting block",minHeight:4,maxHeight:10,rowHeader:[0,2,3,4,5,6,7,8,9,1],columnHeader:[25,0,0],pattern:[[0,416,417],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,656,657]],commands:[t.COLUMN,t.REP_START,0,t.COLUMN,t.REP_END,t.REP_START,1,t.COLUMN,t.REP_END]},e.PATTERN_1={name:"pattern 1: nahore a dole",minHeight:4,maxHeight:8,rowHeader:[0,8,6,4,2,3,5,7,9,1],columnHeader:[0,0,0,0],pattern:[[416,0,384,417],[0,0,0,0],[0,0,0,0],[0,t.MINCE,t.MINCE,0],[0,t.MINCE,t.MINCE,0],[0,t.MINCE,t.MINCE,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[656,640,0,657]],commands:[t.REP_START,0,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,1,t.COLUMN,t.REP_END]},e.PATTERN_2a={name:"pattern 2a: schody dolu",minHeight:6,maxHeight:8,rowHeader:[0,1,9,8,7,6,5,4,3,2],columnHeader:[26,25,24,23,22,0,0,0,0,0],pattern:[[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[656,640,t.MINCE,0,0,0,0,0,0,0],[656,0,640,t.MINCE,0,0,0,0,0,0],[656,0,0,640,t.MINCE,0,0,0,0,0],[656,0,0,0,640,t.MINCE,0,0,0,0],[656,0,0,0,0,640,t.MINCE,0,0,417],[0,0,0,0,0,0,640,t.MINCE,0,0],[0,0,0,0,0,0,0,640,t.MINCE,0],[0,0,0,0,0,0,0,0,640,657]],commands:[t.REP_START,0,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,1,t.COLUMN,t.REP_END]},e.PATTERN_2b={name:"pattern 2b: schody nahoru",minHeight:6,maxHeight:8,rowHeader:[2,3,4,5,6,7,8,9,1,0],columnHeader:[26,25,24,23,22,0,0,0,0,0],pattern:[[0,0,0,0,0,0,0,0,384,417],[0,0,0,0,0,0,0,384,t.MINCE,0],[0,0,0,0,0,0,384,t.MINCE,0,0],[416,0,0,0,0,384,t.MINCE,0,0,657],[416,0,0,0,384,t.MINCE,0,0,0,0],[416,0,0,384,t.MINCE,0,0,0,0,0],[416,0,384,t.MINCE,0,0,0,0,0,0],[416,384,t.MINCE,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0],[0,0,0,0,0,0,0,0,0,0]],commands:[t.REP_START,0,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,1,t.COLUMN,t.REP_END]},e.PATTERN_3a={name:"pattern 3a: vlnka nahoru",minHeight:6,maxHeight:8,rowHeader:[0,1,2,6,7,8,9,3,4,5],columnHeader:[26,0,0,0,0,0,26],pattern:[[0,0,0,384,0,0,0],[0,0,384,t.MINCE,384,0,0],[416,384,0,t.MINCE,0,384,417],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,640,0,0,0],[0,0,640,0,640,0,0],[656,640,0,0,0,640,657]],commands:[t.REP_START,0,t.COLUMN,t.REP_END,t.REP_START,4,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,3,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_END,t.REP_START,1,t.COLUMN,t.REP_END]},e.PATTERN_3b={name:"pattern 3b: vlnka dolu",minHeight:6,maxHeight:8,rowHeader:[0,1,2,6,7,8,9,3,4,5],columnHeader:[26,0,0,0,0,0,26],pattern:[[416,384,0,0,0,384,417],[0,0,384,0,384,0,0],[0,0,0,384,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[656,640,0,t.MINCE,0,640,657],[0,0,640,t.MINCE,640,0,0],[0,0,0,640,0,0,0]],commands:[t.REP_START,0,t.COLUMN,t.REP_END,t.REP_START,4,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,3,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_END,t.REP_START,1,t.COLUMN,t.REP_END]},e.PATTERN_4={name:"pattern 4: chodba",minHeight:4,maxHeight:6,rowHeader:[0,1,4,5,6,7,8,9,2,3],columnHeader:[26,0,0,0,0,0,0],pattern:[[416,384,384,384,384,384,417],[0,0,162,t.MINCE,146,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,146,t.MINCE,162,0,0],[656,640,640,640,640,640,657]],commands:[t.COLUMN,t.REP_START,0,t.REP_START,2,t.COLUMN,t.REP_END,t.COLUMN,t.REP_START,1,t.COLUMN,t.REP_END,t.COLUMN,t.REP_START,3,t.COLUMN,t.REP_END,t.REP_END,t.REP_START,1,t.COLUMN,t.REP_END]},e.PATTERN_5={name:"pattern 5: doura",minHeight:6,maxHeight:10,rowHeader:[0,0,8,9,0,0,9,8,0,0],columnHeader:[26,0,0,0,0,0,0],pattern:[[416,384,384,384,384,384,417],[0,0,t.MINCE,0,128,0,0],[0,0,128,0,128,0,0],[0,0,128,0,128,0,0],[0,0,128,0,t.MINCE,0,0],[0,0,128,0,t.MINCE,0,0],[0,0,128,0,128,0,0],[0,0,128,0,128,0,0],[0,0,t.MINCE,0,128,0,0],[656,640,640,640,640,640,657]],commands:[t.REP_START,0,t.COLUMN,t.REP_END,t.REP_START,1,t.REP_START,2,t.COLUMN,t.REP_END,t.COLUMN,t.REP_START,3,t.COLUMN,t.REP_END,t.COLUMN,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_END,t.REP_START,0,t.COLUMN,t.REP_END]},e.PATTERN_6={name:"pattern 6: lezaty X",minHeight:8,maxHeight:10,rowHeader:[0,1,2,6,7,8,9,3,4,5],columnHeader:[26,0,0,0,0,0,26],pattern:[[416,384,0,0,0,384,417],[0,0,384,0,384,0,0],[0,0,0,384,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,640,0,0,0],[0,0,640,0,640,0,0],[656,640,0,0,0,640,657]],commands:[t.REP_START,0,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,1,t.COLUMN,t.REP_END]},e.PATTERN_7={name:"pattern 7: elka",minHeight:7,maxHeight:10,rowHeader:[0,0,0,9,0,7,9,0,0,0],columnHeader:[0,0,0,0,0,0,0],pattern:[[416,384,384,384,384,384,417],[0,128,128,128,128,0,0],[0,0,128,t.MINCE,t.MINCE,0,0],[0,0,128,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,0,0,0],[0,0,0,t.MINCE,128,0,0],[0,0,t.MINCE,t.MINCE,128,0,0],[0,0,128,128,128,128,0],[656,640,640,640,640,640,657]],commands:[t.REP_START,0,t.COLUMN,t.REP_END,t.REP_START,1,t.REP_START,2,t.COLUMN,t.REP_END,t.COLUMN,t.REP_START,3,t.COLUMN,t.REP_END,t.COLUMN,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_END,t.REP_START,0,t.COLUMN,t.REP_END]},e.PATTERN_8={name:"pattern 8: diamant",minHeight:8,maxHeight:10,rowHeader:[0,1,2,3,8,8,4,5,6,7],columnHeader:[0,24,0,0,0,24,0],pattern:[[0,0,0,384,0,0,0],[0,0,384,t.MINCE,384,0,0],[416,384,0,t.MINCE,0,384,417],[0,0,0,128,0,0,0],[0,0,128,128,128,0,0],[0,0,128,128,128,0,0],[0,0,0,128,0,0,0],[656,640,0,t.MINCE,0,640,657],[0,0,640,t.MINCE,640,0,0],[0,0,0,640,0,0,0]],commands:[t.REP_START,0,t.COLUMN,t.REP_END,t.COLUMN,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.COLUMN,t.REP_START,1,t.COLUMN,t.REP_END]},e.PATTERN_9={name:"pattern 9: chaos",minHeight:5,maxHeight:8,rowHeader:[7,5,0,0,0,0,0,5,9,9],columnHeader:[0,0,0,0,0,0,0,0,0,0,0],pattern:[[416,0,0,0,128,128,128,0,0,0,417],[416,128,128,0,0,0,0,0,128,128,417],[416,128,128,0,128,128,128,0,128,128,417],[0,0,t.MINCE,t.MINCE,0,0,162,0,0,0,0],[0,128,128,128,128,0,128,128,128,128,0],[0,0,t.MINCE,t.MINCE,0,0,146,0,0,0,0],[656,128,128,0,128,128,128,0,128,128,657],[656,128,128,0,0,0,0,0,128,128,657],[656,0,0,0,128,128,128,0,0,0,657],[656,0,0,0,128,128,128,0,0,0,657]],commands:[t.REP_START,0,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.COLUMN,t.COLUMN,t.COLUMN,t.REP_START,3,t.COLUMN,t.REP_END,t.COLUMN,t.COLUMN,t.COLUMN,t.COLUMN,t.REP_END,t.REP_START,1,t.COLUMN,t.REP_END]},e.PATTERN_10={name:"pattern 10: bloky",minHeight:6,maxHeight:10,rowHeader:[0,1,2,6,8,9,7,3,4,5],columnHeader:[0,0,0,0,0,26,0],pattern:[[416,384,384,384,384,384,417],[0,0,160,0,144,0,0],[0,0,160,0,144,0,0],[0,t.MINCE,128,t.MINCE,128,0,0],[0,t.MINCE,128,t.MINCE,128,0,0],[0,t.MINCE,128,t.MINCE,128,0,0],[0,t.MINCE,128,t.MINCE,128,0,0],[0,0,144,0,160,0,0],[0,0,144,0,160,0,0],[656,640,640,640,640,640,657]],commands:[t.REP_START,1,t.COLUMN,t.REP_END,t.REP_START,0,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_START,2,t.COLUMN,t.REP_END,t.REP_END,t.REP_START,1,t.COLUMN,t.REP_END]},e}();t.Patterns=e}(Ninja2||(Ninja2={}));!function(t){var e=function(t){function e(i,n,a,s,o,r,h){void 0===r&&(r=0),void 0===h&&(h=0);var l=t.call(this,i,n)||this;return l._valNum=0,l._icon=i.add.sprite(0,0,"Sprites",a,l),l._icon.anchor.y=.5,l._value=new Phaser.BitmapText(i,l._icon.width+e.SPACE,o*r,"Font","0",o,"left"),l._value.anchor.y=.5,l.add(l._value),l.value=h,l}return __extends(e,t),Object.defineProperty(e.prototype,"icon",{get:function(){return this._icon},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this._value},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this._valNum},set:function(t){t!==this._valNum&&(this._valNum=t,this._value.text=""+t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"totalWidth",{get:function(){return this._icon.width+e.SPACE+this._value.textWidth},enumerable:!0,configurable:!0}),e.SPACE=10,e}(Phaser.Group);t.IconWithText=e}(Ninja2||(Ninja2={}));!function(t){var e=function(){function t(){}return t.prototype.set=function(t,e,i,n){this.x=t,this.y=e,this.onFloor=i,this.score=n},t}();t.JumpSnapshot=e}(Ninja2||(Ninja2={}));!function(t){var e=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._from=new Phaser.Point,e._time=0,e}return __extends(e,t),e.prototype.setup=function(t,e){this.exists=!0,this.anchor.set(.5,.5),this.frameName=t,this._from.copyFrom(e),this._time=0,this.position.copyFrom(e)},e.prototype.move=function(t){this._time+=this.game.time.physicsElapsed;var i=Math.min(this._time/e.COIN_TIME_MAX,1),n=1-Math.cos(Math.PI/2*i);return this.position.set(Phaser.Math.linear(this._from.x,t.x,n),Phaser.Math.linear(this._from.y,t.y,n)),i>=1},e.COIN_TIME_MAX=.5,e}(Phaser.Sprite);t.MagnetCoin=e}(Ninja2||(Ninja2={}));!function(t){var e=function(){return function(){this.position=new Phaser.Point(0,0),this.tiles=[],this.nextPosition=new Phaser.Point(0,0)}}();t.Piece=e}(Ninja2||(Ninja2={}));!function(t){var e=function(e){function i(n,a){var s=e.call(this,n,0,200,"Sprites","Empty")||this;s.onOutOfScreen=new Phaser.Signal,s.isGhost=!1,s._playState=null,s._scoreCoins=0,s._scoreDistance=0,s._bonusType=t.eBonusType.NONE,s._bonusEnd=0,s._bonusLevel=0,s._emitter=null,s._coinBonus=null,s._magnetCoinsCount=0,s._magnetCoins=[],s._ghostActive=!1,s._animPrefix=null,s._playState=a,s.anchor.set(0,0),n.physics.arcade.enable(s,!1);var o=s.body;s.width;o.allowGravity=!1,s.createParticles(),s._emitter.position.set(27,18),s._sprite=s.game.add.sprite(0,0,"Sprites","skeleton-jump_5"),s._sprite.position.set(27,18),s._sprite.anchor.set(.56,.62),s.addChild(s._sprite);for(var r=0;r<t.Gameplay.SHOP_CHAR_DEFS.length;r++){var h=t.Gameplay.SHOP_CHAR_DEFS[r].name,l=h+"-";s._sprite.animations.add(l+"run",i.CHAR_ANIMS[h].runAnim,16,!0),s._sprite.animations.add(l+"jump",i.CHAR_ANIMS[h].jumpAnim,20,!1),s._sprite.animations.add(l+"fall",i.CHAR_ANIMS[h].fallAnim,1,!1)}s._coinBonus=new t.CoinBonus(n),s._coinBonus.position.set(27,18),s.addChild(s._coinBonus),s._coinBonus.exists=s._coinBonus.visible=!1,s._circleBody=new Phaser.Sprite(n,27,18,"Sprites","Empty"),n.physics.arcade.enable(s._circleBody,!1);return(o=s._circleBody.body).setCircle(87,-87,-87),o.allowGravity=!1,s._circleBody.exists=!1,s.addChild(s._circleBody),s}return __extends(i,e),Object.defineProperty(i.prototype,"allowGravity",{set:function(t){this.body.allowGravity=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"onFloor",{get:function(){return this._onFloor},set:function(t){this._onFloor=t},enumerable:!0,configurable:!0}),i.prototype.setAnim=function(t){this._sprite.animations.play(this._animPrefix+t)},i.prototype.setSkin=function(t){this._animPrefix=t+"-"},i.prototype.stopAnim=function(){this._sprite.animations.stop()},Object.defineProperty(i.prototype,"ghostActive",{get:function(){return this._ghostActive},set:function(t){this._ghostActive=t,this.exists=t},enumerable:!0,configurable:!0}),i.prototype.resetPlayer=function(e){void 0===e&&(e="ninja-"),this._animPrefix=e;var i=t.Gameplay.START_LEFT?-1:1,n=this.body;for(n.gravity.set(t.Gameplay.GRAVITY*i,0),n.allowGravity=!0,this.position.set(this.game.width/2,this.isGhost?t.Gameplay.GHOST_DIST:15),n.reset(this.game.width/2,this.isGhost?t.Gameplay.GHOST_DIST:15),this.scaleSprite(i),this.alpha=this.isGhost?.5:1,this._onFloor=1===i,this.standing=!1,this.inAir=!1,this._dead=!1,this._scoreCoins=0,this._scoreDistance=0,this.sendScore(),this._ghostActive=!1,this._bonusType=t.eBonusType.NONE,this._bonusEnd=0,this._bonusLevel=0;this._magnetCoinsCount>0;){this._magnetCoins[--this._magnetCoinsCount].exists=!1}this.setAnim("jump")},Object.defineProperty(i.prototype,"dead",{get:function(){return this._dead},set:function(e){this._dead=e,e&&(this.stopAnim(),this.stopBonus(),this._emitter.killAllParticles(),this.body.allowGravity=!0,this.body.gravity.set(0,t.Gameplay.GRAVITY/4))},enumerable:!0,configurable:!0}),i.prototype.scaleSprite=function(t){this.scale.x=Math.min(1,2*Math.abs(t)),this._sprite.scale.x=Phaser.Math.sign(t)},i.prototype.postUpdate=function(){e.prototype.postUpdate.call(this);var t=this.body;this.exists&&!this._dead&&(this.x<-64||this.x>this.game.width+40)&&(t.velocity.set(0,0),t.allowGravity=!1,this.onOutOfScreen.dispatch())},i.prototype.updateDistanceScore=function(){var e=this._scoreDistance;this._scoreDistance=Math.max(0,Math.floor(-this.y/t.Gameplay.SPEED_Y_MAX)),this._scoreDistance>e&&this.sendScore()},i.prototype.addCoin=function(){var t=1<<this._bonusLevel;this._scoreCoins+=t,this.sendScore()},i.prototype.sendScore=function(){App.Global.GAMEE&&Gamee.Gamee.instance.setScore(this._scoreCoins+this._scoreDistance,this.isGhost),this.isGhost||this._playState.onScoreSent(this._scoreCoins+this._scoreDistance)},i.prototype.getScore=function(){return this._scoreCoins+this._scoreDistance},i.prototype.getCoins=function(){return this._scoreCoins},i.prototype.createParticles=function(){var t=new Particles.ParticlesEmitter(this.game,0,0,32);t.makeParticles("Sprites","magnet",16);t.lifetime=1,t.setScale(3,3),t.setAlpha(0,0),t.setScaleChange(Particles.eParameterChangeType.IN_TIME,-3,1),t.setAlphaChange(Particles.eParameterChangeType.IN_TIME,1.5,1),this.addChild(t),this._emitter=t},i.prototype.setMagnetBonus=function(){this.stopBonus(),this._bonusType=t.eBonusType.MAGNET,this._bonusEnd=this.y-t.Gameplay.BONUS_MAGNET_DURATION,this._bonusLevel=0,this._emitter.flow(200),this._circleBody.exists=!0,this.isGhost||Utils.AudioUtils.playSound("magnet")},i.prototype.setDoubleBonus=function(){this.stopBonus(),this._bonusType=t.eBonusType.DOUBLE,this._bonusEnd=this.y-t.Gameplay.BONUS_DOUBLE_DURATION,this._bonusLevel=Math.min(this._bonusLevel+1,t.Gameplay.BONUS_DOUBLE_LEVEL_MAX),this._coinBonus.exists=this._coinBonus.visible=!0,this.isGhost||Utils.AudioUtils.playSound("double")},Object.defineProperty(i.prototype,"magnetBonus",{get:function(){return this._bonusType===t.eBonusType.MAGNET},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"doubleBonus",{get:function(){return this._bonusType===t.eBonusType.DOUBLE},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bonusCircle",{get:function(){return this._bonusType===t.eBonusType.MAGNET?this._circleBody:null},enumerable:!0,configurable:!0}),i.prototype.stopBonus=function(){this._circleBody.exists=!1,this._bonusType=t.eBonusType.NONE,this._emitter.stopFlow(),this._coinBonus.exists=this._coinBonus.visible=!1},i.prototype.setMagnetCoin=function(t,e,i){t.setup(i,e),this._magnetCoins[this._magnetCoinsCount++]=t,t.alpha=this.isGhost?.3:1},i.prototype.updateBonus=function(){if(this._emitter.update(),this.y<this._bonusEnd&&(this.stopBonus(),this._bonusLevel=0),this._bonusType===t.eBonusType.DOUBLE&&this._coinBonus.updateDouble(),!this._dead)for(var e=this._magnetCoinsCount-1;e>=0;e--){var i=this._magnetCoins[e];i.move(this._sprite.world)&&(Utils.AudioUtils.playSound("bonus"),this.addCoin(),i.exists=!1,this._magnetCoins[e]=this._magnetCoins[--this._magnetCoinsCount])}},i.CHAR_ANIMS={ninja:{runAnim:["skeleton-run_0","skeleton-run_1","skeleton-run_2","skeleton-run_3","skeleton-run_4","skeleton-run_5"],jumpAnim:["skeleton-jump_0","skeleton-jump_1","skeleton-jump_2","skeleton-jump_3","skeleton-jump_4","skeleton-jump_5"],fallAnim:["skeleton-jump_5"]},ninja_babka:{runAnim:["skeleton-babka-run_0","skeleton-babka-run_1","skeleton-babka-run_2","skeleton-babka-run_3","skeleton-babka-run_4","skeleton-babka-run_5"],jumpAnim:["skeleton-babka-jump_0","skeleton-babka-jump_1","skeleton-babka-jump_2","skeleton-babka-jump_3","skeleton-babka-jump_4","skeleton-babka-jump_5"],fallAnim:["skeleton-babka-jump_5"]},ninja_blue:{runAnim:["skeleton-modry-run_0","skeleton-modry-run_1","skeleton-modry-run_2","skeleton-modry-run_3","skeleton-modry-run_4","skeleton-modry-run_5"],jumpAnim:["skeleton-modry-jump_0","skeleton-modry-jump_1","skeleton-modry-jump_2","skeleton-modry-jump_3","skeleton-modry-jump_4","skeleton-modry-jump_5"],fallAnim:["skeleton-modry-jump_5"]},ninja_cernoch:{runAnim:["skeleton-cernoch-run_0","skeleton-cernoch-run_1","skeleton-cernoch-run_2","skeleton-cernoch-run_3","skeleton-cernoch-run_4","skeleton-cernoch-run_5"],jumpAnim:["skeleton-cernoch-jump_0","skeleton-cernoch-jump_1","skeleton-cernoch-jump_2","skeleton-cernoch-jump_3","skeleton-cernoch-jump_4","skeleton-cernoch-jump_5"],fallAnim:["skeleton-cernoch-jump_5"]},ninja_green:{runAnim:["skeleton-zeleny-run_0","skeleton-zeleny-run_1","skeleton-zeleny-run_2","skeleton-zeleny-run_3","skeleton-zeleny-run_4","skeleton-zeleny-run_5"],jumpAnim:["skeleton-zeleny-jump_0","skeleton-zeleny-jump_1","skeleton-zeleny-jump_2","skeleton-zeleny-jump_3","skeleton-zeleny-jump_4","skeleton-zeleny-jump_5"],fallAnim:["skeleton-zeleny-jump_5"]},ninja_chuck:{runAnim:["skeleton-chuck-run_0","skeleton-chuck-run_1","skeleton-chuck-run_2","skeleton-chuck-run_3","skeleton-chuck-run_4","skeleton-chuck-run_5"],jumpAnim:["skeleton-chuck-jump_0","skeleton-chuck-jump_1","skeleton-chuck-jump_2","skeleton-chuck-jump_3","skeleton-chuck-jump_4","skeleton-chuck-jump_5"],fallAnim:["skeleton-chuck-jump_5"]},ninja_white:{runAnim:["skeleton-bily-run_0","skeleton-bily-run_1","skeleton-bily-run_2","skeleton-bily-run_3","skeleton-bily-run_4","skeleton-bily-run_5"],jumpAnim:["skeleton-bily-jump_0","skeleton-bily-jump_1","skeleton-bily-jump_2","skeleton-bily-jump_3","skeleton-bily-jump_4","skeleton-bily-jump_5"],fallAnim:["skeleton-bily-jump_5"]},ninja_yellow:{runAnim:["skeleton-zluty-run_0","skeleton-zluty-run_1","skeleton-zluty-run_2","skeleton-zluty-run_3","skeleton-zluty-run_4","skeleton-zluty-run_5"],jumpAnim:["skeleton-zluty-jump_0","skeleton-zluty-jump_1","skeleton-zluty-jump_2","skeleton-zluty-jump_3","skeleton-zluty-jump_4","skeleton-zluty-jump_5"],fallAnim:["skeleton-zluty-jump_5"]},ninja_bruce:{runAnim:["skeleton-bruce-run_0","skeleton-bruce-run_1","skeleton-bruce-run_2","skeleton-bruce-run_3","skeleton-bruce-run_4","skeleton-bruce-run_5"],jumpAnim:["skeleton-bruce-jump_0","skeleton-bruce-jump_1","skeleton-bruce-jump_2","skeleton-bruce-jump_3","skeleton-bruce-jump_4","skeleton-bruce-jump_5"],fallAnim:["skeleton-bruce-jump_5"]},ninja_kosmo:{runAnim:["skeleton-kosmo-run_0","skeleton-kosmo-run_1","skeleton-kosmo-run_2","skeleton-kosmo-run_3","skeleton-kosmo-run_4","skeleton-kosmo-run_5"],jumpAnim:["skeleton-kosmo-jump_0","skeleton-kosmo-jump_1","skeleton-kosmo-jump_2","skeleton-kosmo-jump_3","skeleton-kosmo-jump_4","skeleton-kosmo-jump_5"],fallAnim:["skeleton-kosmo-jump_5"]}},i}(Phaser.Sprite);t.Player=e}(Ninja2||(Ninja2={}));!function(t){var e=function(t){function e(e){var i=t.call(this,e,null)||this;return i._profile=null,i._bg=null,i._name=null,i._score=null,i.fixedToCamera=!0,i._profile=new Phaser.Sprite(e,0,50),i._profile.anchor.set(.5),i.add(i._profile),i._bg=e.add.sprite(0,0,"Sprites","player",i),i._bg.anchor.set(.5,0),i._name=new Phaser.Sprite(e,0,106),i._name.anchor.set(.5),i.add(i._name),i._score=new Phaser.BitmapText(e,0,130,"Font","",25,"center"),i._score.anchor.set(.5),i._score.tint=16719687,i.add(i._score),i.visible=!1,i}return __extends(e,t),e.prototype.init=function(t,e,i){this._profile.loadTexture("photo_"+t),this._profile.width=this._profile.height=64,this._name.loadTexture(e),this._name.scale.set(.4),this._score.text=""+i},Object.defineProperty(e.prototype,"score",{set:function(t){this._score.text=t.toString()},enumerable:!0,configurable:!0}),e}(Phaser.Group);t.ProfileImage=e}(Ninja2||(Ninja2={}));!function(t){var e=function(t){function e(i,n){var a=t.call(this,i)||this;a._bg=null,a._profilePhoto=null,a._profileFrame=null,a._name=null,a._score=null,a._nameBmd=null,a._nameText=null,a._nameBmdWidth=0,a.fixedToCamera=!0,a._bg=i.add.sprite(0,0,"Sprites","playerBig",a),a._bg.anchor.x=.5;var s=new Phaser.Group(i,a);return s.position.set(0,107),a._profilePhoto=new Phaser.Sprite(i,0,0),a._profilePhoto.anchor.set(.5),s.add(a._profilePhoto),a._profileFrame=i.add.sprite(0,0,"Sprites","profileMaskBig",s),a._profileFrame.anchor.set(.5),a._nameText=new Phaser.Text(i,0,0,"",e.NAME_STYLE),a._nameBmdWidth=Math.abs(a._bg.width)-50,a._nameBmd=i.make.bitmapData(a._nameBmdWidth,64),a._name=i.add.sprite(0,80,a._nameBmd,0,s),a._name.anchor.x=.5,a._score=new Phaser.BitmapText(i,0,120,"Font","",40,"center"),a._score.anchor.x=.5,a._score.tint=16719687,s.add(a._score),a}return __extends(e,t),Object.defineProperty(e.prototype,"nameBmd",{get:function(){return this._nameBmd},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"scoreVisible",{set:function(t){this._score.visible=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"crown",{set:function(t){this._profileFrame.frameName=t?"crown2":"profileMaskBig"},enumerable:!0,configurable:!0}),e.prototype.setProfile=function(t,e){this._profilePhoto.loadTexture(t),this._profilePhoto.width=127,this._profilePhoto.height=127,this.renderName(e)},e.prototype.setScore=function(t){this._score.text=""+t},e.prototype.renderName=function(t){this._nameText.setText(t),this._nameBmd.clear();var e=this._nameText.width,i=this._nameText.height;if(e>this._nameBmdWidth){var n=this._nameBmdWidth/e;e*=n,i*=n}this._nameBmd.draw(this._nameText,(this._nameBmdWidth-e)/2,0,e,i)},e.NAME_STYLE={font:"bold 36px Arial",fill:"#453246",boundsAlignH:"center",boundsAlignV:"middle"},e}(Phaser.Group);t.ProfileImageBig=e}(Ninja2||(Ninja2={}));!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n._curtain=null,n._text=null,n._yesButton=null,n._noButton=null,n._acceptInput=!1,n.fixedToCamera=!0,n.cameraOffset.set(i.width/2,0),n._curtain=i.add.sprite(0,0,"Sprites","zaves",n),n._curtain.anchor.x=.5,n._text=new Phaser.BitmapText(i,0,500,"Font","Retry?",40,"center"),n._text.anchor.set(.5),n._text.tint=5849936,n.add(n._text),n._yesButton=new t.SimpleButton(i,"replay"),n._yesButton.position.set(-120,615),n.add(n._yesButton),n._noButton=new t.SimpleButton(i,"cancel"),n._noButton.position.set(120,615),n.add(n._noButton),n.exists=!1,n}return __extends(i,e),Object.defineProperty(i.prototype,"yesButton",{get:function(){return this._yesButton},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"noButton",{get:function(){return this._noButton},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"acceptInput",{get:function(){return this._acceptInput},set:function(t){this._acceptInput=t},enumerable:!0,configurable:!0}),i.prototype.show=function(){this.exists=this.visible=!0,this._acceptInput=!0},i.prototype.hide=function(){this.exists=this.visible=!1,this._acceptInput=!1},i}(Phaser.Group);t.RetryScreen=e}(Ninja2||(Ninja2={}));!function(t){var e=function(t){function e(e){var i=t.call(this,e)||this;return i._bg=null,i._text=null,i.fixedToCamera=!0,i.cameraOffset.set(i.game.width/2,35),i._bg=e.add.sprite(0,0,"Sprites","Dark",i),i._bg.anchor.set(.5),i._bg.alpha=.5,i._bg.width=100,i._bg.height=40,i._text=new Phaser.BitmapText(e,0,5,"Font","",25,"center"),i._text.anchor.set(.5),i.add(i._text),i}return __extends(e,t),e.prototype.setScore=function(t){this._text.text=t.toString()},e}(Phaser.Group);t.ScoreSign=e}(Ninja2||(Ninja2={}));!function(t){var e=function(e){function i(i,n,a){var s=e.call(this,i)||this;return s._topBelt=null,s._singleButton=null,s._challengeButton=null,s._vsButton=null,s._shop=null,s._soundToggle=null,s._acceptInput=!1,s.fixedToCamera=!0,s.cameraOffset.set(i.width/2,i.height/2),s._topBelt=new t.TopBelt(i,s),s._topBelt.position.set(-i.width/2,-i.height/2),s._singleButton=new t.SimpleButton(i,"singleplayer"),s.add(s._singleButton),s._vsButton=new t.SimpleButton(i,"multiplayer"),s.add(s._vsButton),s._shop=new t.SimpleButton(i,"shop"),s._shop.position.set(-i.width/2+100,i.height/2-70),s.add(s._shop),s._challengeButton=new t.SimpleButton(i,"social"),s._challengeButton.position.set(0,i.height/2-70),s.add(s._challengeButton),s._soundToggle=new UI.Toggle(i,"Sound","Sprites","soundOff","soundOn",!0),s._soundToggle.setTint(12632256),s._soundToggle.scaleOnOver.set(1.03),s._soundToggle.scaleOnDown.set(.94),s._soundToggle.position.set(i.width/2-100,i.height/2-70),s._soundToggle.toggled=!i.sound.mute,s.add(s._soundToggle),s.hide(),s}return __extends(i,e),Object.defineProperty(i.prototype,"acceptInput",{get:function(){return this._acceptInput},set:function(t){this._acceptInput=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"singleButton",{get:function(){return this._singleButton},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"challengeButton",{get:function(){return this._challengeButton},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"vsButton",{get:function(){return this._vsButton},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"shop",{get:function(){return this._shop},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"soundToggle",{get:function(){return this._soundToggle},enumerable:!0,configurable:!0}),i.prototype.show=function(t,e,i,n){this._challengeButton.visible=t,this._vsButton.visible=e;var a=-160*(1+(e?1:0)-1)/2;this._singleButton.y=a,a+=195,e&&(this._vsButton.y=a),this.exists=this.visible=!0,this._topBelt.hiScore=i,this._topBelt.coins=n},i.prototype.hide=function(){this.exists=this.visible=!1},i}(Phaser.Group);t.SelectionScreen=e}(Ninja2||(Ninja2={}));!function(t){var e=function(){return function(){this.id=0,this.name=null,this.price=0}}();t.ShopChar=e}(Ninja2||(Ninja2={}));!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n._topBelt=null,n._shopGroup=null,n._imageGroup=null,n._image=null,n._price=null,n._leftArrow=null,n._rightArrow=null,n._buyUseButton=null,n._exitButton=null,n._index=0,n._owned=!1,n._change=!1,n._acceptInput=!1,n.fixedToCamera=!0,n.cameraOffset.set(i.width/2,i.height/2),n._topBelt=new t.TopBelt(i,n),n._topBelt.position.set(-i.width/2,-i.height/2),n._shopGroup=new Phaser.Group(i,n),n._imageGroup=new Phaser.Group(i,n._shopGroup),n._image=i.add.sprite(0,0,"SkinsBig",0,n._imageGroup),n._image.anchor.set(.5),n._price=new Phaser.BitmapText(i,0,0,"Font","1234",40,"center"),n._price.anchor.set(.5),n._imageGroup.add(n._price),n._leftArrow=new t.SimpleButton(i,"shopLeftArrow"),n._leftArrow.scaleOnDown.set(1),n._leftArrow.x=-250,n._leftArrow.onClick.add(function(){this._index=Math.max(0,this._index-1),this.setShop()},n),n._shopGroup.add(n._leftArrow),n._rightArrow=new t.SimpleButton(i,"shopRightArrow"),n._rightArrow.scaleOnDown.set(1),n._rightArrow.x=250,n._rightArrow.onClick.add(function(){this._index=Math.min(t.Gameplay.SHOP_CHAR_DEFS.length-1,this._index+1),this.setShop()},n),n._shopGroup.add(n._rightArrow),n._buyUseButton=new t.SimpleButton(i,"shopBuy"),n._buyUseButton.position.set(-128,i.height/2-100),n.add(n._buyUseButton),App.Global.FBINSTANT||(n._buyUseButton.x=0),n._exitButton=new t.SimpleButton(i,"shopBack"),n._exitButton.position.set(128,i.height/2-100),n.add(n._exitButton),App.Global.FBINSTANT||n._exitButton.position.set(-n.game.width/2+100,-n.game.height/2+55),n.exists=!1,n}return __extends(i,e),Object.defineProperty(i.prototype,"exitButton",{get:function(){return this._exitButton},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"buyUseButton",{get:function(){return this._buyUseButton},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"change",{get:function(){return this._change},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"acceptInput",{get:function(){return this._acceptInput},set:function(t){this._acceptInput=t},enumerable:!0,configurable:!0}),i.prototype.show=function(t,e){this._change=!1,this.exists=this.visible=!0,this._acceptInput=!0,this._topBelt.hiScore=t,this._topBelt.coins=e,this._index=this.getShopCharIdx(),this.setShop()},i.prototype.hide=function(){this.exists=this.visible=!1,this._acceptInput=!1},i.prototype.setShop=function(){var e=t.Gameplay.SHOP_CHAR_DEFS[this._index];this._owned=App.Global.saveData.skins.indexOf(e.name)>=0,this._image.frameName=e.name;var i="shopBuy";if(this._owned?(this._image.tint=16777215,this._price.visible=!1,i="shopUse"):(this._image.tint=0,this._price.visible=!0,this._price.text=e.price.toString()),this._buyUseButton.button.setFrames(i,i,i,i),!App.Global.FBINSTANT){var n=16777215,a=!0;this._owned?e.name===App.Global.saveData.selected&&(n=12632256,a=!1):App.Global.saveData.coins<e.price&&(n=12632256,a=!1),this._buyUseButton.button.tint=n,this._buyUseButton.button.inputEnabled=a}this.showArrows()},i.prototype.showArrows=function(){this._leftArrow.visible=this._index>0,this._rightArrow.visible=this._index<t.Gameplay.SHOP_CHAR_DEFS.length-1},i.prototype.getShopCharIdx=function(){for(var e=App.Global.saveData.selected,i=0,n=0;n<t.Gameplay.SHOP_CHAR_DEFS.length;n++)if(t.Gameplay.SHOP_CHAR_DEFS[n].name===e){i=n;break}return i},i.prototype.onBuyUseButton=function(){if(this._owned){var e=t.Gameplay.SHOP_CHAR_DEFS[this._index].name;App.Global.saveData.selected!==e&&(App.Global.saveData.selected=e,this._change=!0,this.setShop())}else{var i=t.Gameplay.SHOP_CHAR_DEFS[this._index];App.Global.saveData.coins>=i.price&&(App.Global.saveData.coins-=i.price,App.Global.saveData.skins.push(i.name),this._topBelt.coins=App.Global.saveData.coins,App.Global.FBINSTANT&&FBInstant.logEvent("character purchased"),this.setShop())}},i.prototype.update=function(){if(this.visible&&null!=this._image&&t.Gameplay.SHOP_CHAR_DEFS[this._index].name===App.Global.saveData.selected){var e=.01*Math.sin(this.game.time.time%500/500*2*Math.PI)+1;this._image.scale.set(e)}},i}(Phaser.Group);t.ShopScreen=e}(Ninja2||(Ninja2={}));!function(t){var e=function(e){function i(i){var n=e.call(this,i)||this;return n.onShopClosed=new Phaser.Signal,n._shopGroup=null,n._imageGroup=null,n._image=null,n._price=null,n._leftArrow=null,n._rightArrow=null,n._tapToPlay=null,n._index=0,n._owned=!1,n._change=!1,n._acceptInput=!1,n._lockShop=!1,n._pointerDown=!1,n._dragged=!1,n._dragStart=new Phaser.Point,n._dragEnd=new Phaser.Point,n._dragHlpPt=new Phaser.Point,n._iconDown=!1,n.fixedToCamera=!0,n.cameraOffset.set(i.width/2,i.height/2),n._shopGroup=new Phaser.Group(i,n),n._imageGroup=new Phaser.Group(i,n._shopGroup),n._image=i.add.sprite(0,0,"SkinsBig",0,n._imageGroup),n._image.anchor.set(.5),n._image.hitArea=new Phaser.Rectangle(-n.game.width/2,-n.game.height/2,n.game.width,n.game.height),n._image.inputEnabled=!0,n._image.events.onInputDown.add(function(){this._iconDown=!0},n),n._image.events.onInputUp.add(function(t,e,i){this._iconDown&&(this._iconDown=!1,i&&this.onBuyUseButton())},n),n._price=new t.IconWithText(i,n._shopGroup,"gameeCoin",40,40,.17,12345),n._imageGroup.add(n._price),n._leftArrow=new t.SimpleButton(i,"shopLeftArrow"),n._leftArrow.scaleOnDown.set(1),n._leftArrow.x=-250,n._leftArrow.onClick.add(n.onLeftArrow,n),n._shopGroup.add(n._leftArrow),n._rightArrow=new t.SimpleButton(i,"shopRightArrow"),n._rightArrow.scaleOnDown.set(1),n._rightArrow.x=250,n._rightArrow.onClick.add(n.onRightArrow,n),n._shopGroup.add(n._rightArrow),n._tapToPlay=new Phaser.BitmapText(n.game,0,310,"Font","Tap to Play",34,"center"),n._tapToPlay.anchor.set(.5),n._shopGroup.add(n._tapToPlay),n.exists=!1,n}return __extends(i,e),Object.defineProperty(i.prototype,"change",{get:function(){return this._change},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"acceptInput",{get:function(){return this._acceptInput},set:function(t){this._acceptInput=t},enumerable:!0,configurable:!0}),i.prototype.onLeftArrow=function(){this._lockShop||(this._index=Math.max(0,this._index-1),this.setShop())},i.prototype.onRightArrow=function(){this._lockShop||(this._index=Math.min(t.Gameplay.SHOP_CHAR_DEFS.length-1,this._index+1),this.setShop())},i.prototype.show=function(t,e){this._pointerDown=!1,this._dragged=!1,this._change=!1,this.exists=this.visible=!0,this._acceptInput=!0,this._index=this.getShopCharIdx(),this.setShop(),this.game.input.onDown.add(this.dragStart,this),this.game.input.onUp.add(this.dragEnd,this),this.game.input.addMoveCallback(this.dragMove,this)},i.prototype.hide=function(){this.exists=this.visible=!1,this._acceptInput=!1,this._dragged=!1,this.game.input.onDown.remove(this.dragStart,this),this.game.input.onUp.remove(this.dragEnd,this),this.game.input.deleteMoveCallback(this.dragMove,this)},i.prototype.dragStart=function(t){Math.abs(t.y-this.game.height/2)>this.game.height/2-0||(this._dragStart.copyFrom(t.position),this._pointerDown=!0)},i.prototype.dragMove=function(e,i,n,a){if(this._pointerDown){this._dragEnd.set(i,n);var s=Phaser.Point.subtract(this._dragEnd,this._dragStart,this._dragHlpPt).getMagnitude();if(s>10&&(this._dragged=!0,this._iconDown=!1),s>50){this._dragged=!1,this._pointerDown=!1;var o=this._dragEnd.x-this._dragStart.x,r=this._dragEnd.y-this._dragStart.y;if(Math.abs(o)<Math.abs(r))return;o>0?(this._index>0&&Utils.AudioUtils.playSound("jump"),this.onLeftArrow()):(this._index<t.Gameplay.SHOP_CHAR_DEFS.length-1&&Utils.AudioUtils.playSound("jump"),this.onRightArrow())}}},i.prototype.dragEnd=function(t){this._pointerDown=!1},i.prototype.setShop=function(){var e=t.Gameplay.SHOP_CHAR_DEFS[this._index];this._owned=App.Global.saveData.skins.indexOf(e.name)>=0,this._image.frameName=e.name;this._owned?(this._image.tint=16777215,this._price.visible=!1,this._tapToPlay.text="Tap to Play"):(this._image.tint=0,this._price.visible=!0,this._price.value=e.price,this._price.x=-this._price.totalWidth/2,this._tapToPlay.text="Tap to Buy"),this.showArrows()},i.prototype.showArrows=function(){this._leftArrow.visible=this._index>0,this._rightArrow.visible=this._index<t.Gameplay.SHOP_CHAR_DEFS.length-1},i.prototype.getShopCharIdx=function(){for(var e=App.Global.saveData.selected,i=0,n=0;n<t.Gameplay.SHOP_CHAR_DEFS.length;n++)if(t.Gameplay.SHOP_CHAR_DEFS[n].name===e){i=n;break}return i},i.prototype.onBuyUseButton=function(){if(!this._lockShop)if(this._owned){var e=t.Gameplay.SHOP_CHAR_DEFS[this._index].name;App.Global.saveData.selected!==e&&(App.Global.saveData.selected=e,this._change=!0,this.setShop()),Utils.AudioUtils.playSound("jump"),this.onShopClosed.dispatch(this._change)}else{var i=t.Gameplay.SHOP_CHAR_DEFS[this._index];if(App.Global.saveData.coins>=i.price||App.Global.GAMEE)if(App.Global.GAMEE){this._lockShop=!0;var n=this;window.gamee.purchaseItem({itemName:i.displayName,coinsCost:i.price,itemImage:i.base64Image},function(t,e){e.purchaseStatus&&(App.Global.saveData.coins=e.coinsLeft,App.Global.saveData.skins.push(i.name),n.updateCoins(),n.setShop(),Utils.AudioUtils.playSound("bonus"),window.gamee.gameSave(JSON.stringify(App.Global.saveData),!1)),n._lockShop=!1})}else App.Global.saveData.coins-=i.price,App.Global.saveData.skins.push(i.name),this.updateCoins(),this.setShop(),Utils.AudioUtils.playSound("bonus")}},i.prototype.updateCoins=function(){},i.prototype.update=function(){if(this.visible&&null!=this._image&&t.Gameplay.SHOP_CHAR_DEFS[this._index].name===App.Global.saveData.selected){var e=.01*Math.sin(this.game.time.time%500/500*2*Math.PI)+1;this._image.scale.set(e)}},i}(Phaser.Group);t.ShopScreenGamee=e}(Ninja2||(Ninja2={}));!function(t){var e=function(t){function e(e,i,n,a,s,o,r){var h=t.call(this,e)||this;h.onClick=new Phaser.Signal,h.onDown=new Phaser.Signal,h.scaleOnOver=new Phaser.Point(1,1),h.scaleOnDown=new Phaser.Point(1,1),h.offsetOnOver=new Phaser.Point(0,0),h.offsetOnDown=new Phaser.Point(0,0),h._tinted=!1,h._downTint=8421504,h._overTint=16777215,h._savePosition=new Phaser.Point,h._saveScale=new Phaser.Point,h._over=!1,h._down=!1;var l=new Phaser.Button(e,0,0,n);return h.add(l),h._button=l,void 0!==s&&s&&(h._tinted=!0),void 0===o&&(!h._tinted&&e.cache.getFrameByName(n,o)||(o=null)),void 0===r&&(!h._tinted&&e.cache.getFrameByName(n,r)||(r=null)),l.setFrames(r,a,o,a),l.anchor.setTo(.5,.5),l.name=i,l.onInputOver.add(h.overEvent,h),l.onInputOut.add(h.outEvent,h),l.onInputDown.add(h.downEvent,h),l.onInputUp.add(h.upEvent,h),h}return __extends(e,t),Object.defineProperty(e.prototype,"button",{get:function(){return this._button},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"anchor",{get:function(){return this._button.anchor},enumerable:!0,configurable:!0}),e.prototype.setHitArea=function(t){this._button.hitArea=t},e.prototype.setTint=function(t,e){void 0===e&&(e=16777215),this._downTint=t,this._overTint=e},e.prototype.overEvent=function(){this.setButton(!0,this._down),this.overAction()},e.prototype.outEvent=function(){this.setButton(!1,!1),this.outAction()},e.prototype.downEvent=function(){this.setButton(this._over,!0),this.downAction(),this.onDown.dispatch(this)},e.prototype.upEvent=function(t,e,i){this.setButton(this._over,!1),this.upAction(),i&&this.onClick.dispatch(this)},e.prototype.setButton=function(t,e){if(this._over||this._down||(this._saveScale.copyFrom(this._button.scale),this._savePosition.copyFrom(this._button.position)),this._down=e,this._over=t,e){if(Phaser.Point.multiply(this._saveScale,this.scaleOnDown,this._button.scale),Phaser.Point.add(this._button.position,this.offsetOnDown,this._button.position),this._tinted){this._button.tint=this._downTint;for(var i=0;i<this._button.children.length;i++)this._button.getChildAt(i).tint=this._downTint}}else if(t){if(Phaser.Point.multiply(this._saveScale,this.scaleOnOver,this._button.scale),Phaser.Point.add(this._button.position,this.offsetOnOver,this._button.position),this._tinted){this._button.tint=this._overTint;for(i=0;i<this._button.children.length;i++)this._button.getChildAt(i).tint=this._overTint}}else if(this._button.scale.copyFrom(this._saveScale),this._button.position.copyFrom(this._savePosition),this._tinted){this._button.tint=16777215;for(i=0;i<this._button.children.length;i++)this._button.getChildAt(i).tint=16777215}},e.prototype.overAction=function(){},e.prototype.outAction=function(){},e.prototype.downAction=function(){Utils.AudioUtils.playSound("jump")},e.prototype.upAction=function(){},e}(Phaser.Group);t.Button=e}(UI||(UI={}));!function(t){var e=function(t){function e(e,i){var n=t.call(this,e,i,"Sprites",i,!0)||this;n._text=null,n.setTint(12632256);var a=e.cache.getFrameByName("Sprites",i).width,s=(a+4)/a;return n.scaleOnOver.set(s),s=(a-8)/a,n.scaleOnDown.set(s),n}return __extends(e,t),e}(UI.Button);t.SimpleButton=e}(Ninja2||(Ninja2={}));!function(t){var e=function(t){function e(i,n){var a=t.call(this,i,n)||this;a._hiscore=null,a._coins=null,a._coinsIcon=null;var s=i.add.sprite(0,0,"Sprites","bar",a);if(App.Global.FBINSTANT||(s.height=115),App.Global.FBINSTANT){var o=new Phaser.BitmapText(i,40,e.TXT_Y,"Font","HiScore",27,"left");o.anchor.set(0,.5),o.tint=16770755,a.add(o),a._hiscore=new Phaser.BitmapText(i,o.x+o.textWidth+8,e.TXT_Y,"Font","12345",27,"left"),a._hiscore.anchor.set(0,.5),a._hiscore.tint=16327236,a.add(a._hiscore)}var r=e.TXT_Y;return App.Global.FBINSTANT||(r=Math.floor(57.5)),a._coins=new Phaser.BitmapText(i,s.width-40,r,"Font","12345",27,"right"),a._coins.anchor.set(1,.5),a._coins.tint=16770755,a.add(a._coins),a._coinsIcon=i.add.sprite(a._coins.x-a._coins.textWidth-8,r,"Sprites",App.Global.FBINSTANT?"uiCoin":"gameeCoin",a),a._coinsIcon.anchor.set(1,.65),a}return __extends(e,t),Object.defineProperty(e.prototype,"hiScore",{set:function(t){null!==this._hiscore&&(this._hiscore.text=t.toString())},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"coins",{set:function(t){this._coins.text=t.toString(),this._coinsIcon.x=this._coins.x-this._coins.textWidth-8},enumerable:!0,configurable:!0}),e.TXT_Y=35,e}(Phaser.Group);t.TopBelt=e}(Ninja2||(Ninja2={}));!function(t){var e=function(t){function e(e){return t.call(this,e,0,0,"Sprites","vs")||this}return __extends(e,t),e}(Phaser.Sprite);t.VsBadge=e}(Ninja2||(Ninja2={}));!function(t){var e=function(t){function e(e){return t.call(this,e,0,0,"Sprites","winStamp")||this}return __extends(e,t),e}(Phaser.Sprite);t.WinBadge=e}(Ninja2||(Ninja2={}));!function(t){var e=function(){function t(){}return t.AUDIO_JSON={resources:["assets\\sfx\\Sfx.ogg","assets\\sfx\\Sfx.m4a"],spritemap:{bonus:{start:0,end:.7888662131519274,loop:!1},end:{start:2,end:4.77297052154195,loop:!1},jump:{start:6,end:6.695283446712018,loop:!1},katana:{start:8,end:9.380975056689342,loop:!1},land:{start:11,end:11.529727891156462,loop:!1},double:{start:13,end:15.351020408163265,loop:!1},magnet:{start:17,end:17.96829931972789,loop:!1}}},t}();t.Sounds=e}(Ninja2||(Ninja2={}));!function(t){var e=function(t){function e(){var e=t.call(this)||this;return e._userScale=new Phaser.Point(1,1),e._gameDims=new Phaser.Point,e._forceResize=!0,e}return __extends(e,t),e.prototype.init=function(){this.input.maxPointers=1,App.Global.GAMEE&&(this.stage.disableVisibilityChange=!0),this.calcGameDims(),this.scale.scaleMode=Phaser.ScaleManager.USER_SCALE,this.scale.setGameSize(this._gameDims.x,this._gameDims.y),this.scale.setUserScale(this._userScale.x,this._userScale.y),this.scale.pageAlignHorizontally=!0,this.scale.pageAlignVertically=!0,this.scale.setResizeCallback(this.gameResized,this),this.game.device.desktop||this.scale.onOrientationChange.add(this.orientationChange,this),this.androidUnlockAudio()},e.prototype.androidUnlockAudio=function(){this.game.device.chrome&&this.game.device.chromeVersion>=55&&(this.game.sound.touchLocked=!0,this.game.input.addTouchLockCallback(function(){if(this.noAudio||!this.touchLocked||null!==this._unlockSource)return!0;if(this.usingWebAudio){var t=this.context.createBuffer(1,1,22050);this._unlockSource=this.context.createBufferSource(),this._unlockSource.buffer=t,this._unlockSource.connect(this.context.destination),void 0===this._unlockSource.start?this._unlockSource.noteOn(0):this._unlockSource.start(0),"suspended"===this._unlockSource.context.state&&this._unlockSource.context.resume()}return!0},this.game.sound,!0))},e.prototype.create=function(){App.Global.GAMEE&&this.game.onSound(Gamee.Gamee.instance.sound),this.game.state.start("Preloader",!0,!1)},e.prototype.calcGameDims=function(){var t=window.innerWidth,e=window.innerHeight;(t>e||this.game.device.desktop&&!App.Global.FBINSTANT)&&(t=.625*e);var i=(t+.01)/App.Global.GAME_WIDTH,n=Math.round(e/(t/App.Global.GAME_WIDTH)),a=(e+.01)/n;this._userScale.set(i,a),this._gameDims.set(App.Global.GAME_WIDTH,n)},e.prototype.gameResized=function(t,e){if(!t.incorrectOrientation){var i=this._userScale.x,n=this._userScale.y;this.calcGameDims();var a=this._gameDims,s=this._userScale;if(a.x!==this.game.width||a.y!==this.game.height||Math.abs(s.x-i)>.001||Math.abs(s.y-n)>.001||this._forceResize){this._forceResize=!1,this.scale.setGameSize(a.x,a.y),this.scale.setUserScale(s.x,s.y);var o=this.game.state.getCurrentState();"function"==typeof o.onResize&&o.onResize(a.x,a.y)}}},e.prototype.orientationChange=function(t,e,i){},e}(Phaser.State);t.Boot=e}(Ninja2||(Ninja2={}));!function(t){var e=function(e){function i(){var t=e.call(this)||this;return t._ready=!1,t}return __extends(i,e),i.prototype.preload=function(){var e="assets/sfx/";if(this.game.device.ie||Phaser.Device.isAndroidStockBrowser()){for(var i in t.Sounds.AUDIO_JSON.spritemap)this.load.audio(i,e+i+".mp3");this.load.audio("Music",e+"music.mp3")}else{var n=0;this.game.device.iOS&&(n=.1);var a=0;for(var i in t.Sounds.AUDIO_JSON.spritemap){var s=t.Sounds.AUDIO_JSON.spritemap[i];0!==a&&(s.start-=n),++a}this.load.audiosprite("Sfx",t.Sounds.AUDIO_JSON.resources,null,t.Sounds.AUDIO_JSON),this.load.audio("Music",[e+"music.ogg",e+"music.m4a"])}e="assets/",this.load.atlas("Sprites",e+"Sprites.png",e+"Sprites.json"),this.load.atlas("SkinsBig",e+"SkinsBig.png",e+"SkinsBig.json"),this.load.image("Challenge",e+"Challenge.jpg"),this.load.image("Result",e+"Result.jpg"),this.load.xml("Font",e+"font.xml"),this.load.json("Config",e+"config.json")},i.prototype.create=function(){this.readConfig(),this.cache.addBitmapFontFromImage("Font",null,"Sprites",this.cache.getXML("Font"),"xml");var e=this.add.audio("Music");if(e.volume=.65,Utils.AudioUtils.addMusic("Music",e),this.game.device.ie||Phaser.Device.isAndroidStockBrowser()){Utils.AudioUtils.setSounds(null);for(var i in t.Sounds.AUDIO_JSON.spritemap){(a=this.add.audio(i)).allowMultiple=!0,Utils.AudioUtils.addSound(i,a)}}else{var n=this.add.audioSprite("Sfx");for(var i in t.Sounds.AUDIO_JSON.spritemap){var a;(a=n.sounds[i]).allowMultiple=!0}Utils.AudioUtils.setSounds(n)}App.Global.FBINSTANT||null!=App.Global.saveData&&null!=App.Global.saveData.skins||(App.Global.saveData=new t.SaveData)},i.prototype.readConfig=function(){var e=this.game.cache.getJSON("Config");for(var i in e)t.Gameplay[i]=e[i];App.Global.FBINSTANT?t.Gameplay.SHOP_CHAR_DEFS=t.Gameplay.SHOP_CHAR_DEFS_FB:t.Gameplay.SHOP_CHAR_DEFS=t.Gameplay.SHOP_CHAR_DEFS_GAMEE},i.prototype.loadUpdate=function(){App.Global.FBINSTANT&&FBInstant.setLoadingProgress(this.load.progress)},i.prototype.update=function(){if(!this._ready&&this.cache.isSoundDecoded("Music")){this._ready=!0;var t=FBInstantUtils.FBInstantUtils.instance,e=this;App.Global.FBINSTANT?FBInstant.startGameAsync().then(function(){t.onGameStart(),t.getPlayers(function(){FBInstant.player.getDataAsync(["saveData"]).then(function(i){null!=i.saveData&&(App.Global.saveData=i.saveData,null==App.Global.saveData.skins&&(App.Global.saveData.skins=["ninja"]),null==App.Global.saveData.selected&&(App.Global.saveData.selected="ninja")),App.Global.adsSupported=t.isAPISupported("getRewardedVideoAsync"),App.Global.adsSupported,e.setPlayState()})},e)}).catch(function(t){}):this.setPlayState()}},i.prototype.setPlayState=function(){this.game.state.start("Play")},i}(Phaser.State);t.Preloader=e}(Ninja2||(Ninja2={}));!function(t){var e;!function(t){t[t.IDLE=0]="IDLE",t[t.FORCE_RESET=1]="FORCE_RESET",t[t.PLAY=2]="PLAY",t[t.SHOP_WAIT=3]="SHOP_WAIT"}(e||(e={}));var i=function(i){function n(){var t=i.call(this)||this;return t.TEST_REPLAY='{"time":"Fri May 18 2018 14:12:57 GMT+0200 (CEST)","seed":"!rnd,1,0.5556587416213006,0.13264011405408382,0.08920112461782992","score":1144,"y":[-206.50000000000006,-488.44444444444383,-832.6851851851825,-1265.9999999999966,-1600.2592592592575,-1954.5740740740741,-2389.111111111113,-2736.7407407407445,-3117.796296296302,-3358.46296296297,-4334.500000000012,-4795.777777777792,-4929.481481481496,-5136.722222222238,-5330.592592592609,-5524.462962962981,-5838.666666666686,-6025.851851851872,-6226.407407407429,-6393.537037037059,-6620.833333333357,-6781.277777777802,-7162.333333333359,-7657.037037037066,-8165.111111111142,-9288.22222222211,-9502.148148148008,-9696.018518518353,-9883.203703703513,-10077.074074073858,-10197.407407407176,-10518.296296296023,-10658.685185184893,-11180.12962962927,-11507.7037037033,-12015.777777777308,-12356.722222221708,-12650.870370369817,-12844.740740740162,-13058.66666666606,-13326.074074073433,-13827.462962962256,-13994.592592591864,-14201.833333332577,-14282.055555554789,-14462.555555554765,-14856.98148148064,-14997.37037036951,-15365.055555554647,-15512.129629628702,-15766.166666665706,-15913.24074073976,-16040.259259258262,-16294.296296295266,-16641.92592592492,-16782.314814813828,-16902.64814814718,-17029.666666665715,-17210.16666666574,-17551.111111110233,-17938.85185185103,-18326.592592591824,-19309.314814814185,-19429.648148147535,-19777.277777777213,-20058.05555555503,-20372.25925925878,-20632.981481481038,-21388.40740740707,-21876.425925925658,-22110.407407407172,-22397.870370370176,-22585.055555555387,-22932.685185185066,-23240.203703703628,-23420.703703703653,-23674.740740740726,-23928.7777777778,-24109.277777777825,-24349.944444444525,-24650.7777777779,-24804.537037037182,-25011.777777777952,-25225.703703703908,-25392.83333333356,-26322.074074074433,-26870.259259259696,-27304.796296296794,-27418.44444444496,-27612.314814815356,-27926.518518519104,-28060.222222222827,-28294.20370370434,-28541.555555556228,-28869.129629630348,-29510.907407408216,-29771.629629630475,-30146.0000000009,-30533.740740741694,-30954.90740740842,-31369.38888888996,-31496.407407408497,-31703.648148149266,-31904.20370370485,-32231.77777777897,-32505.870370371602,-32686.370370371627,-32913.66666666788,-33288.0370370381,-33468.537037038026,-33669.0925925935,-33862.96296296379,-34203.9074074081,-34584.9629629635,-34905.85185185226,-35728.12962962971,-36216.14814814803,-36603.888888888614,-37004.99999999956,-37339.25925925869,-37960.98148148066,-38161.537037036134,-38342.03703703606,-38682.98148148037,-38809.999999998836,-39043.98148148022,-39224.48148148015,-39418.35185185044,-39719.185185183655,-40093.555555553874,-40253.999999998254,-40467.92592592409,-40795.499999998035,-40962.6296296276,-41223.351851849715,-41430.59259259037,-41611.0925925903,-41791.59259259023,-42212.75925925672,-42433.370370367746,-42687.40740740468,-42914.703703700885,-43543.11111110804,-43676.81481481169,-43803.833333330156,-43950.90740740417,-44118.03703703373,-44311.907407404025,-44552.574074070595,-44873.462962959355,-45053.96296295928,-45307.99999999622,-45548.666666662786,-46023.31481481074,-46284.03703703286,-46578.18518518089,-46798.79629629191,-47393.77777777315,-47941.96296295812,-48309.648148143155,-48503.51851851345,-48871.203703698484,-49024.96296295768,-49559.77777777228,-49800.44444443885,-50094.59259258688,-51251.12962962345,-51391.51851851228,-51592.07407406776,-51792.62962962323,-52019.92592591944,-52407.66666666002,-52701.81481480805,-52982.592592585715,-53189.83333332637,-53383.703703696665,-53617.68518517805,-53858.35185184462,-54232.72222221484,-55161.96296295521,-55429.37037036251,-55616.55555554762,-55797.055555547544,-56010.98148147338,-56191.48148147331,-56378.66666665842,-56599.27777776944,-56726.29629628791,-56866.68518517674,-57134.09259258404,-57301.222222213604,-57608.740740732,-57749.12962962083,-57909.57407406521,-58283.94444443543,-58444.38888887981,-58611.51851850937,-58852.18518517594,-58992.574074064774,-59139.64814813879,-59266.66666665726,-59473.90740739791,-60002.03703702733,-60503.42592591602,-61205.37037036018,-61746.87037035996,-62348.537037026384,-62930.14814813726,-63137.38888887792,-63317.888888877846,-63551.87037035923,-63765.79629628507,-64193.64814813675,-64648.24074072916,-64855.48148146982,-65035.981481469746,-65269.96296295113,-65784.72222221018,-66018.70370369157,-66219.25925924705,-66399.75925924697,-66586.94444443208,-67355.74074072807,-67990.8333333204,-69515.05555554201,-70785.24074072669,-71186.35185183764,-71574.09259257822,-71801.38888887443,-71928.4074073929,-72249.29629628165,-72630.35185183705,-72951.24074072581,-73258.75925924421,-73445.94444442932,-74248.16666665122,-74843.14814813246,-75037.01851850275,-75337.85185183596,-75785.75925924319,-76146.75925924304,-76333.94444442815,-76661.5185185021,-77122.79629627969]}',t._playState=e.IDLE,t._gameStartTime=0,t._gameOver=!1,t._replayMode=!1,t._ghostMode=!1,t._replayData=null,t._recordData=null,t._replayPosition=0,t._jumpSnapshotsPool=null,t._jumpSnapshots=null,t._challengerID=null,t._fbPlayer=null,t._fbOpponent=null,t._fbPlayerLeaderboardEntry=null,t._fbOpponentLeaderboardEntry=null,t._playerProfileBig=null,t._opponentProfileBig=null,t._playerProfile=null,t._opponentProfile=null,t._dark=null,t._endScreen=null,t._selectionScreen=null,t._challengeImage=null,t._noOpponentsInLB=!1,t._isChallenge=!1,t._playingChallenge=!1,t._endScreenCoins=0,t._endScreenBonus=0,t._retryScreen=null,t._shopScreen=null,t._shopScreenGamee=null,t}return __extends(n,i),n.prototype.create=function(){this.camera.bounds=null,this.stage.backgroundColor=8421504,this.physics.arcade.gravity.y=0,this._button=this.game.input.keyboard.addKey(Phaser.KeyCode.SPACEBAR),this.game.input.onDown.add(function(t){this._buttonDown=!0,this._buttonDownY=t.y},this),this._background=new t.Background(this.game,this.world),this._generator=new t.Generator(this.game,this),this._arrow=new Phaser.Sprite(this.game,0,0,"Sprites","sipka"),this._arrow.anchor.set(.5,1),this._arrow.angle=33.7,this.world.add(this._arrow),this._arrow.exists=!1,this._player=new t.Player(this.game,this),this._player.name="Player",this._player.onOutOfScreen.add(this.setGameOver,this),this.world.add(this._player),this._player.exists=!1,this._ghostPlayer=new t.Player(this.game,this),this._ghostPlayer.isGhost=!0,this._ghostPlayer.onOutOfScreen.add(this.ghostDied,this),this.world.add(this._ghostPlayer),this.world.bringToTop(this._generator.ninjas),this.createEmitters(),this._jumpSnapshotsPool=new t.Pool(t.JumpSnapshot,100),this._jumpSnapshotsPool.canGrow=!0,this._dark=new t.Dark(this.game),this.world.add(this._dark),App.Global.GAMEE?(this.reset(),Gamee.Gamee.instance.gameReady(),this._dark.show(.75),this._playState=e.IDLE):App.Global.FBINSTANT?(this._generator.reset("!rnd,1,0.04830890614539385,0.6252902785781771,0.5818512891419232"),this.game.camera.y=-this.game.height,this._generator.updateGenerator(this.game.camera.y),this.FBInitialSetup(),App.Global.adsSupported&&this.FBGetAdPlacement(t.Gameplay.FB_AD_ID)):(this._ghostMode=!0,this.reset());this.time.slowMotion=1,this.time.desiredFps=60},n.prototype.createEmitters=function(){var t=new Particles.ParticlesEmitter(this.game,0,0,64);t.gravity=2500,t.lifetime=.8,t.setXSpeed(-100,100),t.setYSpeed(-400,-600),t.makeParticles("Sprites","coin1",32),this.world.add(t),this._coinEmitter=t},Object.defineProperty(n.prototype,"player",{get:function(){return this._player},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ghostPlayer",{get:function(){return this._ghostPlayer},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ghostMode",{get:function(){return this._ghostMode},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ghostAlive",{get:function(){return!this._ghostPlayer.dead},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"ghostActive",{get:function(){return this._ghostPlayer.ghostActive},enumerable:!0,configurable:!0}),n.prototype.onGameePause=function(){this.game.paused=!0},n.prototype.onGameeUnpause=function(){this.game.paused=!1},n.prototype.onGameeRestart=function(t,i,n){App.Global.game.paused=!1,this._replayMode=i,this._ghostMode=n,this._buttonDown=!1,this._gameStartTime=this.game.time.time,this.reset(),this._replayMode||this._ghostMode?this._playState=e.FORCE_RESET:null!==this._shopScreenGamee&&!1!==this._shopScreenGamee.visible||this.onGameeShop(),Utils.AudioUtils.playSound("katana")},n.prototype.onGameeButtonDown=function(t){this._buttonDown=!0},n.prototype.onGameeButtonUp=function(t){this._buttonDown=!1},n.prototype.onScoreSent=function(t){App.Global.FBINSTANT&&(this._playerProfile.score=t)},n.prototype.reset=function(){this.game.physics.arcade.isPaused=!0,this._gameOver=!1,this._buttonDown=!1,this.camera.y=-this.game.height;var e=this._generator.reseed(),i="ninja-";if(this._replayMode||this._ghostMode){if(this._replayPosition=0,App.Global.GAMEE?(this._replayData=Gamee.Gamee.instance.replayData,null!=this._replayData.ch&&(i=this._replayData.ch+"-")):App.Global.FBINSTANT?null!=this._replayData.ch&&(i=this._replayData.ch+"-"):(this._replayData=JSON.parse(this.TEST_REPLAY),null!=this._replayData.ch&&(i=this._replayData.ch+"-")),null===this._replayData)throw new Error("Replay requested, but no replay data!");e=this._replayData.seed}this._replayMode||(this._recordData={time:(new Date).toString(),seed:e,score:0,snapshot:new t.JumpSnapshot,y:[]}),this._jumpSnapshots=[],this._generator.reset(e),this._generator.updateGenerator(this.camera.y),this._player.exists=!0,this._player.resetPlayer(this._replayMode?i:App.Global.saveData.selected+"-"),this._ghostPlayer.exists=this._ghostMode,this._ghostPlayer.resetPlayer(i),this._ghostPlayer.ghostActive=this._ghostMode&&null!==this._replayData,App.Global.FBINSTANT&&(this._ghostPlayer.ghostActive=this._ghostPlayer.ghostActive&&(null===this._replayData.snapshot||-1===this._replayData.snapshot.score)),this._jumpTimer=0,this._speed=t.Gameplay.SPEED_Y_MIN,this._speedUpdateDir=1;this._arrow.exists=!0,this._arrow.position.set(320,-128),this._arrow.alpha=1,this._arrowTween=this.add.tween(this._arrow).to({x:330,y:-138},200,Phaser.Easing.Sinusoidal.InOut,!0,0,-1,!0),App.Global.FBINSTANT||(this.physics.arcade.isPaused=!0,App.Global.GAMEE||this.onGameeShop()),Utils.AudioUtils.stopMusic(),Utils.AudioUtils.playMusic("Music")},n.prototype.update=function(){switch(this._background.updateClouds(),this._playState){case e.IDLE:return;case e.FORCE_RESET:return this._playState=e.PLAY,this._dark.hide(),this._buttonDown=!1,void(this.game.physics.arcade.isPaused=!1);case e.PLAY:if(this.game.physics.arcade.isPaused=!1,App.Global.GAMEE&&!Gamee.Gamee.instance.gameRunning)return;this.play();break;case e.SHOP_WAIT:null!==this._shopScreen&&this._shopScreen.visible||null!==this._shopScreenGamee&&this._shopScreenGamee.visible||!this._buttonDown||!(this._buttonDownY>=110)||(this._buttonDown=!1,this.game.time.time-this._gameStartTime>250&&(this._playState=e.FORCE_RESET))}},n.prototype.play=function(){this.updateScore();var e=this._ghostMode&&this._ghostPlayer.ghostActive;if(this._player.inAir&&this.movePlayer(this._player),e&&this._ghostPlayer.inAir&&this.movePlayer(this._ghostPlayer),this._player.updateBonus(),e&&this._ghostPlayer.updateBonus(),this.updatePhysics(this._player),e&&this.updatePhysics(this._ghostPlayer),!this._gameOver){this.updateSpeed();var i=Math.min(0,this._player.y+this.game.height/3);this.camera.y=i-this.game.height}if(this._generator.updateGenerator(this.camera.y),this._replayMode?this.handleReplay(this._player):this.handleInput(this._player),e&&this.handleReplay(this._ghostPlayer),App.Global.FBINSTANT&&this._ghostMode&&!this._ghostPlayer.dead)if(this._ghostPlayer.ghostActive)this._player.y-this._ghostPlayer.y<-t.Gameplay.GHOST_DIST&&!this._ghostPlayer.inAir&&(this._ghostPlayer.body.velocity.y=1.25*-this._speed);else if(this._player.y-this._replayData.snapshot.y<=-t.Gameplay.GHOST_DIST){var n=this._replayData.snapshot;this._ghostPlayer.position.set(n.x,n.y),this._ghostPlayer.body.reset(n.x,n.y),this._ghostPlayer.onFloor=n.onFloor,this._ghostPlayer.scaleSprite(n.onFloor?1:-1),this._ghostPlayer.ghostActive=!0}},n.prototype.updateScore=function(){this._player.dead||this._player.updateDistanceScore(),this._ghostMode&&!this._ghostPlayer.dead&&this._ghostPlayer.updateDistanceScore()},n.prototype.updateSpeed=function(){if(1===this._speedUpdateDir){var e=t.Gameplay.SPEED_Y_MAX-t.Gameplay.SPEED_Y_MIN;this._speed+=e/t.Gameplay.SPEED_UP_TIME*this.time.physicsElapsed,this._speed>t.Gameplay.SPEED_Y_MAX&&(this._speedUpdateDir=0)}else if(-1===this._speedUpdateDir){e=t.Gameplay.SPEED_Y_MAX-t.Gameplay.SPEED_Y_MIN;this._speed-=e/t.Gameplay.SPEED_DOWN_TIME*this.time.physicsElapsed,this._speed<t.Gameplay.SPEED_Y_MIN&&(this._speedUpdateDir=1)}Phaser.Math.clamp(this._speed,t.Gameplay.SPEED_Y_MIN,t.Gameplay.SPEED_Y_MAX)},n.prototype.movePlayer=function(t){if(!t.dead){var e=t.body,i=Phaser.Math.sign(e.gravity.x),n=Math.abs(e.x-t.startX)/Math.abs(t.startX-t.destinationX),a=(2*Phaser.Easing.Exponential.InOut(n)-1)*i;t.scaleSprite(a>=0?1:-1)}},n.prototype.handleInput=function(t){if(!t.dead){this._button.justDown&&(this._buttonDown=!0),this._button.justUp&&(this._buttonDown=!1);if(this._buttonDown&&t.standing&&!t.inAir&&!(this.game.time.now<this._jumpTimer)){this._buttonDown=!1,this._jumpTimer=this.game.time.now+150,this._recordData.y.push(t.y);var e=this._jumpSnapshotsPool.createItem();null!==e&&(e.set(t.x,t.y,t.onFloor,t.getScore()),this._jumpSnapshots.push(e)),this.doJump(t)}}},n.prototype.handleReplay=function(t){if(!(t.dead||this._replayPosition>=this._replayData.y.length)){var e=this._replayData.y[this._replayPosition];t.y<=e&&(t.y=e,++this._replayPosition,this.doJump(t))}},n.prototype.doJump=function(e){var i=e.onFloor;e.onFloor=!i;var n=-this._speed,a=(i?-this._speed:this._speed)*t.Gameplay.SPEED_X_COEF,s=e.body,o=s.x,r=s.y,h=0;i?(h=Math.max(this._generator.castRay(o,r,a,n,2,1).destX,this._generator.castRay(o,r+s.height,a,n,2,1).destX),h+=0):(h=Math.min(this._generator.castRay(o+s.width,r,a,n,2,1).destX,this._generator.castRay(o+s.width,r+s.height,a,n,2,1).destX),h-=s.width),e.inAir=!0,e.standing=!1,e.startX=s.x,e.destinationX=h,e.allowGravity=!1,s.gravity.x=t.Gameplay.GRAVITY*(e.onFloor?1:-1),s.velocity.x=this._speed*t.Gameplay.SPEED_X_COEF*Phaser.Math.sign(s.gravity.x),e.setAnim("jump"),e===this._player&&Utils.AudioUtils.playSound("jump"),this._arrow.exists&&(this._arrowTween.stop(),this.add.tween(this._arrow).to({alpha:0},400,Phaser.Easing.Linear.None,!0,0).onComplete.add(function(){this._arrow.exists=!1},this))},n.prototype.updatePhysics=function(t){if(!t.dead){var e=t.body,i=t.bonusCircle;i&&this.physics.arcade.overlap(i,this._generator.bonuses,this.onMagnetBonusCollision,null,this),this.physics.arcade.overlap(t,this._generator.bonuses,this.onBonusCollision,null,this),e.touching.none=!0,e.touching.up=e.touching.down=e.touching.left=e.touching.right=!1;var n=!1;t.isGhost?this._replayPosition>=this._replayData.y.length&&(n=this.physics.arcade.overlap(t,this._generator.ghostNinjas)):n=this.physics.arcade.overlap(t,this._generator.ninjas);var a=this.physics.arcade.collide(t,this._generator.walls);if(t.inAir&&a){e.velocity.x=0,t.allowGravity=!0,t.inAir=!1;var s=Phaser.Math.sign(e.gravity.x);t.scaleSprite(1*s)}var o=t.isGhost&&this._replayPosition>=this._replayData.y.length;if((!t.isGhost||o)&&(n||e.touching.up||e.touching.down))return t.inAir=!1,e.velocity.set(0,0),e.gravity.x=0,t.dead=!0,void(t===this._player?(this.setGameOver(),this._replayMode&&null!=this._replayData.score&&Gamee.Gamee.instance.setScore(this._replayData.score,!1)):(Utils.AudioUtils.playSound("land"),Utils.AudioUtils.playSound("land"),null!=this._replayData.score&&App.Global.GAMEE&&Gamee.Gamee.instance.setScore(this._replayData.score,!0)));var r=t.standing;t.standing=e.touching.left||e.touching.right,t.inAir||r===t.standing||(t.setAnim(t.standing?"run":"fall"),t.standing&&t===this._player&&Utils.AudioUtils.playSound("land")),e.velocity.y=-this._speed}},n.prototype.onMagnetBonusCollision=function(e,i){if(i.bonusType===t.eBonusType.COIN){var n=e.parent;if(n===this._player)i.exists=!1;else{if(i.ghostPicked)return;i.ghostPicked=!0}var a=this._generator.getMagnetCoin();n.setMagnetCoin(a,i.position,i.frameName)}},n.prototype.onBonusCollision=function(e,i){if(e!==this._ghostPlayer||!i.ghostPicked){var n=i.bonusType,a=e===this._player?1:.3,s=e.doubleBonus&&n===t.eBonusType.COIN?4:1,o=s>1?.65:1;switch(n){case t.eBonusType.COIN:e.addCoin();break;case t.eBonusType.MAGNET:e.setMagnetBonus();break;case t.eBonusType.DOUBLE:e.setDoubleBonus()}if(e===this._player||e===this._ghostPlayer&&!i.ghostPicked)for(var r=0;r<s;r++){this._coinEmitter.emitAt(i.x,i.y);var h=this._coinEmitter.emitParticle();null!==h&&(h.visual.frameName=i.frameName,h.visual.scale.set(o),h.visual.alpha=a,s>1&&h.velocity.multiply(3,1))}e===this._player?(n===t.eBonusType.COIN&&Utils.AudioUtils.playSound("bonus"),i.exists=!1):i.ghostPicked=!0}},n.prototype.ghostDied=function(){this._ghostPlayer.exists=!1,this._ghostPlayer.dead=!0,null!=this._replayData.score&&App.Global.GAMEE&&Gamee.Gamee.instance.setScore(this._replayData.score,!0)},n.prototype.setGameOver=function(){this._gameOver||(this._gameOver=!0,this._endScreenCoins=this._endScreenBonus=0,Utils.AudioUtils.stopMusic(),Utils.AudioUtils.playSound("end"),this.time.events.add(1e3,function(){if(this._playState=e.IDLE,null!==this._recordData&&(this._recordData.score=this._player.getScore()),App.Global.GAMEE){this._ghostPlayer.exists=!1;null!==(i=this._replayMode?null:this._recordData)&&null!=App.Global.saveData.selected&&(this._recordData.ch=App.Global.saveData.selected),Gamee.Gamee.instance.gameOver(i)}else if(App.Global.FBINSTANT){if(this.packRecordedData(this._jumpSnapshots),null!==this._jumpSnapshots)for(var t=0;t<this._jumpSnapshots.length;t++)this._jumpSnapshotsPool.destroyItem(this._jumpSnapshots[t]);this.FBGameOver()}else{this._ghostPlayer.exists=!1;var i;null!==(i=this._replayMode?null:this._recordData)&&null!=App.Global.saveData.selected&&(this._recordData.ch=App.Global.saveData.selected)}},this))},n.prototype.packRecordedData=function(t){if(0===t.length)return this._recordData.snapshot.set(-1,0,!1,-1),void(this._recordData.y=[]);var e=0;App.Global.FBINSTANT&&(this._recordData.vsID=FBInstantUtils.FBInstantUtils.instance.currentPlayer.getID(),this._recordData.ver=n.REPLAY_DATA_VERSION,this._recordData.ch=App.Global.saveData.selected,this._recordData.y=null,this._recordData.time=null);do{var i=t[e];0===e?this._recordData.snapshot.set(-1,i.y,!1,-1):this._recordData.snapshot.set(i.x,i.y,i.onFloor,i.score);for(var a="",s=-i.y,o=0,r=e,h=0;r<t.length;r++,h++){var l=-t[r].y,c=Math.round(100*(l-s));s+=c/100,0==(1&h)?(c&=1048575,a+=String.fromCharCode(255&c),a+=String.fromCharCode(c>>8&255),o=c>>16):(c=c<<4|o,a+=String.fromCharCode(255&c),a+=String.fromCharCode(c>>8&255),a+=String.fromCharCode(c>>16&255),o=0)}this._recordData.yEnc=btoa(a),++e}while(JSON.stringify(this._recordData).length>=990)},n.prototype.unpackReplayData=function(t){var e="string"==typeof t?JSON.parse(t):t;if(void 0!==e.ver&&e.ver===n.REPLAY_DATA_VERSION&&void 0!==e.yEnc){this._replayData=e,void 0===this._replayData.vsID&&(this._replayData.vsID=null);for(var i=atob(this._replayData.yEnc),a=[],s=this._replayData.snapshot.y,o=0,r=0,h=0;r<i.length;){var l=0;0==(1&h)?(l=i.charCodeAt(r++),l+=i.charCodeAt(r++)<<8,o=(l+=i.charCodeAt(r++)<<16)>>20&15,l&=1048575):(l=i.charCodeAt(r++)<<4,l+=i.charCodeAt(r++)<<12,l|=o),s=-l/100+s,a.push(s),++h}this._replayData.y=a}else this._replayData=null},n.prototype.FBGameOver=function(){var e=this;this._fbPlayerLeaderboardEntry=null,this._endScreenCoins=this._player.getCoins(),FBInstant.getLeaderboardAsync(n.LEADERBOARD_NAME).then(function(t){return t.setScoreAsync(e._player.getScore(),JSON.stringify(e._recordData))},function(){}).then(function(i){e._fbPlayerLeaderboardEntry=i,e._isChallenge&&e._playingChallenge?i.getScore()>e._replayData.score?(e._endScreenBonus=t.Gameplay.FB_CHALLENGE_WIN_BONUS,e.FBChallengeSendResult(i.getScore(),e._replayData.score)):e.FBShowRetryScreen(i.getScore(),e._replayData.score):e.FBShowEndScreen()},function(){e.FBShowEndScreen()}).catch(function(t){})},n.prototype.FBInitialSetup=function(){var e=FBInstantUtils.FBInstantUtils.instance;this._dark.fade(1,.5,250,function(){var i=[];if(i.push({key:e.currentPlayer.getID(),url:e.currentPlayer.getPhoto(),keep:!0}),null!=e.entryPointData&&void 0!==e.entryPointData.vsID){this.unpackReplayData(e.entryPointData),this.FBIsChallenge();var n=e.getPlayerInContext(e.entryPointData.vsID);null!==n&&(this._challengerID=n.getID(),i.push({key:n.getID(),url:n.getPhoto(),keep:!0}))}e.loadPlayerPhotos(i,function(){this._playerProfileBig=new t.ProfileImageBig(this.game,!1),this._playerProfileBig.setProfile("photo_"+e.currentPlayer.getID(),e.currentPlayer.getName()),this._playerProfileBig.visible=!1,this._playerProfile=new t.ProfileImage(this.game),this.world.addAt(this._playerProfile,this.world.getIndex(this._dark)),this._playerProfile.cameraOffset.set(60,0),this._playerProfile.init(e.currentPlayer.getID(),this._playerProfileBig.nameBmd,0),this.FBChooseBattleOrChallenge()},this)},this)},n.prototype.FBChooseBattleOrChallenge=function(){var t=FBInstantUtils.FBInstantUtils.instance;if(this._noOpponentsInLB=!1,this._fbPlayer=t.currentPlayer,this._fbOpponent=null,this._fbPlayerLeaderboardEntry=null,this._fbOpponentLeaderboardEntry=null,this._isChallenge)return this.unpackReplayData(t.entryPointData),this._replayData&&(this._fbOpponent=t.getPlayerInContext(this._replayData.vsID)),this._playingChallenge=!0,void this.FBPrepareBattle();var e=this;FBInstant.getLeaderboardAsync(n.LEADERBOARD_NAME).then(function(t){return t,t.getPlayerEntryAsync()}).then(function(t){var i=-1;e._noOpponentsInLB=null===t,null!==t&&(e._fbPlayerLeaderboardEntry=t,i=t.getRank()),(e._noOpponentsInLB||i<=1)&&(e._noOpponentsInLB=!0),e.FBShowSelection()})},n.prototype.FBShowSelection=function(){this._replayData=null,this._playingChallenge=!1;var e=FBInstantUtils.FBInstantUtils.instance,i=this;null===this._selectionScreen&&(this._selectionScreen=new t.SelectionScreen(this.game,this._fbPlayer.getID(),this._challengerID),this._selectionScreen.singleButton.onClick.add(function(){this._selectionScreen.acceptInput&&(FBInstant.logEvent("solo game clicked"),this.FBPrepareBattle())},this),this._selectionScreen.vsButton.onClick.add(function(){if(this._selectionScreen.acceptInput){e.isAPISupported("getLeaderboardAsync");try{FBInstant.getLeaderboardAsync(n.LEADERBOARD_NAME).then(function(t){if(null==i._fbPlayerLeaderboardEntry);else i._fbPlayerLeaderboardEntry;var e=5,n=i._fbPlayerLeaderboardEntry.getRank()-2-4;return n<0&&(e=5+n,n=0),t.getEntriesAsync(e,n)}).then(function(t){for(var e=0;e<t.length;e++)t[e];if(0!==t.length){var n=t.length-1;i._fbOpponentLeaderboardEntry=t[n],i._fbOpponent=t[n].getPlayer(),i.unpackReplayData(t[n].getExtraData())}FBInstant.logEvent("multiplayer game clicked"),i.FBPrepareBattle()},function(){FBInstant.logEvent("multiplayer game clicked"),i.FBPrepareBattle()}).catch(function(t){})}catch(t){}}},this),this._selectionScreen.challengeButton.onClick.add(function(){this._selectionScreen.acceptInput&&(this._selectionScreen.acceptInput=!1,FBInstant.logEvent("add friends clicked"),this.FBChallenge())},this),this._selectionScreen.shop.onClick.add(function(){this._selectionScreen.acceptInput&&(this._selectionScreen.hide(),FBInstant.logEvent("shop clicked"),this.FBShowShop())},this),this._selectionScreen.soundToggle.onDown.add(function(t){this._selectionScreen.acceptInput&&(this.game.sound.mute=!t.toggled)},this),this.world.bringToTop(this._selectionScreen)),this._selectionScreen.show(null!==this._fbPlayerLeaderboardEntry,!this._noOpponentsInLB,null!=this._fbPlayerLeaderboardEntry?this._fbPlayerLeaderboardEntry.getScore():0,App.Global.saveData.coins),this._selectionScreen.acceptInput=!0},n.prototype.FBPrepareBattle=function(){null!==this._selectionScreen&&this._selectionScreen.visible&&this._selectionScreen.hide();var t=FBInstantUtils.FBInstantUtils.instance;null!==this._fbOpponent?t.loadPlayerPhotos({key:this._fbOpponent.getID(),url:this._fbOpponent.getPhoto(),keep:!1},function(){this.FBShowBattle()},this):this.FBShowBattle()},n.prototype.FBShowBattle=function(){var e=null===this._fbOpponent;this._ghostMode=!e,null!==this._opponentProfile&&(this._opponentProfile.visible=!1),this._playerProfile.visible=!1,this._playerProfileBig.visible=!0,this._playerProfileBig.crown=!1,this._playerProfileBig.scoreVisible=!e,e?this._playerProfileBig.cameraOffset.set(320,0):(this._playerProfileBig.cameraOffset.set(128,0),this._playerProfileBig.setScore(this._playingChallenge||null===this._fbPlayerLeaderboardEntry?0:this._fbPlayerLeaderboardEntry.getScore())),e||(null===this._opponentProfileBig&&(this._opponentProfileBig=new t.ProfileImageBig(this.game,!0)),this._opponentProfileBig.visible=!0,this._opponentProfileBig.crown=!1,this._opponentProfileBig.cameraOffset.set(512,0),this._opponentProfileBig.setProfile("photo_"+this._fbOpponent.getID(),this._fbOpponent.getName()),this._opponentProfileBig.setScore(this._replayData.score),null===this._opponentProfile&&(this._opponentProfile=new t.ProfileImage(this.game),this.world.addAt(this._opponentProfile,this.world.getIndex(this._dark))),this._opponentProfile.cameraOffset.set(580,0),this._opponentProfile.init(this._fbOpponent.getID(),this._opponentProfileBig.nameBmd,null!==this._fbOpponentLeaderboardEntry?this._fbOpponentLeaderboardEntry.getScore():this._replayData.score)),this.game.time.events.add(2e3,this.FBStartBattle,this)},n.prototype.FBStartBattle=function(){var t=null===this._fbOpponent;this._dark.hide(),this._playerProfileBig.visible=!1,this._playerProfile.visible=!0,this._playerProfile.score=0,null!==this._opponentProfileBig&&(this._opponentProfileBig.visible=!1),null===this._opponentProfile||t||(this._opponentProfile.visible=!0),this._playState=e.FORCE_RESET},n.prototype.FBShowEndScreen=function(){var e=null===this._fbOpponent;if(null!==this._opponentProfile&&(this._opponentProfile.visible=!1),this._playerProfile.visible=!1,this._dark.show(),this._playerProfileBig.visible=!0,this._playerProfileBig.scoreVisible=!0,this._playerProfileBig.setScore(this._player.getScore()),null!==this._opponentProfile&&(this._opponentProfileBig.visible=!e,!e)){var i=null!==this._fbOpponentLeaderboardEntry?this._fbOpponentLeaderboardEntry.getScore():this._replayData.score;this._playerProfileBig.crown=this._player.getScore()>i,this._opponentProfileBig.crown=i>this._player.getScore()}if(null===this._endScreen){var n=new t.EndScreen(this.game);n.collectButton.onClick.add(function(){n.acceptInput&&(this._endScreen.acceptInput=!1,this.FBCollect())},this),n.collect2xButton.onClick.add(function(){n.acceptInput&&(this._endScreen.acceptInput=!1,FBInstant.logEvent("collect2x clicked"),this.FBShowAd())},this),this._endScreen=n}this.world.remove(this._endScreen),this.world.addAt(this._endScreen,this.world.getIndex(this._playerProfileBig)),this._endScreen.setCoins(this._endScreenCoins,this._endScreenBonus),this._endScreen.show()},n.prototype.FBCollect=function(){var t=this;App.Global.saveData.coins+=this._endScreenCoins+this._endScreenBonus,FBInstant.player.setDataAsync({saveData:App.Global.saveData}).then(function(){t._playerProfileBig.visible=!1,null!==t._opponentProfileBig&&(t._opponentProfileBig.visible=!1),t._endScreen.hide(),t._dark.fade(.5,1,250,function(){t._dark.fade(1,.5,250,t.FBChooseBattleOrChallenge,t)},t),FBInstant.player.flushDataAsync().then(function(){}).catch(function(t){})}).catch(function(t){})},n.prototype.FBShowAd=function(){var t=this,e=this.game.sound.mute;this.game.sound.mute=!0,App.Global.ad.showAsync().then(function(){t.game.sound.mute=e,t._endScreenCoins*=2,t._endScreenBonus*=2,App.Global.adsSupported&&null!==App.Global.ad&&t.FBLoadAd(App.Global.ad),t.FBCollect()}).catch(function(i){t.game.sound.mute=e,App.Global.adsSupported&&null!==App.Global.ad&&t.FBLoadAd(App.Global.ad),t.FBCollect()})},n.prototype.FBChallenge=function(){var e=this,i=FBInstantUtils.FBInstantUtils.instance;i.isAPISupported("context.chooseAsync"),FBInstant.context.chooseAsync().then(function(){i.setContext(FBInstant.context),i.getPlayers(function(n){if(n&&null!==i.currentContextPlayers){null===e._challengeImage&&(e._challengeImage=new t.ChallengeImage(e.game));var a="Can you beat my score";e._challengeImage.createChallengeImage("photo_"+e._fbPlayer.getID(),a,e._fbPlayerLeaderboardEntry.getScore());var s=JSON.parse(e._fbPlayerLeaderboardEntry.getExtraData());i.isAPISupported("updateAsync"),FBInstant.updateAsync({action:"CUSTOM",template:"challenge",image:e._challengeImage.getImage(),text:a,data:s,strategy:"IMMEDIATE"}).then(function(){e._selectionScreen.acceptInput=!0}).catch(function(t){e._selectionScreen.acceptInput=!0})}else e._selectionScreen.acceptInput=!0},e)},function(){e._selectionScreen.acceptInput=!0}).catch(function(t){e._selectionScreen.acceptInput=!0})},n.prototype.FBSwitchGameButton=function(e){if(this._endScreen.acceptInput&&void 0!==t.Gameplay.FB_SWITCH_GAME_IDS&&0!==t.Gameplay.FB_SWITCH_GAME_IDS.length){this._endScreen.acceptInput=!1;var i=this,n=t.Gameplay.FB_SWITCH_GAME_IDS[this.rnd.integerInRange(0,t.Gameplay.FB_SWITCH_GAME_IDS.length-1)],a=n.id;FBInstant.switchGameAsync(a).then(function(){i._endScreen.acceptInput=!0}).catch(function(t){i._endScreen.acceptInput=!0})}},n.prototype.FBIsChallenge=function(){void 0===this._replayData.ver||this._replayData.ver!==n.REPLAY_DATA_VERSION||void 0===this._replayData.vsID?this._isChallenge=!1:this._isChallenge=!0},n.prototype.FBChallengeSendResult=function(e,i){this._isChallenge=!1;var n=this,a=FBInstantUtils.FBInstantUtils.instance;a.getPlayers(function(s){if(s&&null!==a.currentContextPlayers){null===n._challengeImage&&(n._challengeImage=new t.ChallengeImage(n.game)),n._challengeImage.createResultImage(n._fbPlayer,e,n._fbOpponent,i);var o=JSON.parse(n._fbPlayerLeaderboardEntry.getExtraData());FBInstant.updateAsync({action:"CUSTOM",template:"results",image:n._challengeImage.getImage(),text:"",data:o,strategy:"IMMEDIATE"}).then(function(){n.FBShowEndScreen()}).catch(function(t){n.FBShowEndScreen()})}else n.FBShowEndScreen()},n)},n.prototype.FBShowRetryScreen=function(e,i){var n=this;null!==this._opponentProfile&&(this._opponentProfile.visible=!1),this._playerProfile.visible=!1,this._dark.show(),this._playerProfileBig.visible=!0,this._playerProfileBig.scoreVisible=!0,this._playerProfileBig.setScore(this._player.getScore()),this._opponentProfileBig.visible=!0;var a=null!==this._fbOpponentLeaderboardEntry?this._fbOpponentLeaderboardEntry.getScore():this._replayData.score;if(this._playerProfileBig.crown=this._player.getScore()>a,this._opponentProfileBig.crown=a>this._player.getScore(),null===this._retryScreen){var s=new t.RetryScreen(this.game);s.yesButton.onClick.add(function(){s.acceptInput&&(n._playerProfileBig.visible=!1,null!==n._opponentProfileBig&&(n._opponentProfileBig.visible=!1),App.Global.saveData.coins+=this._endScreenCoins,FBInstant.player.setDataAsync({saveData:App.Global.saveData}).then(function(){n._retryScreen.hide(),n.FBChooseBattleOrChallenge(),FBInstant.player.flushDataAsync().then(function(){}).catch(function(t){})}).catch(function(t){}))},this),s.noButton.onClick.add(function(){s.acceptInput&&(n._isChallenge=!1,n._retryScreen.hide(),n.FBChallengeSendResult(e,i))},this),this._retryScreen=s}this.world.remove(this._retryScreen),this.world.addAt(this._retryScreen,this.world.getIndex(this._playerProfileBig)),this._retryScreen.show()},n.prototype.FBGetAdPlacement=function(t){var e=this;FBInstant.getRewardedVideoAsync(t).then(function(t){App.Global.ad=t,e.FBLoadAd(App.Global.ad)}).catch(function(t){})},n.prototype.FBLoadAd=function(t){App.Global.adLoaded=!1,t.loadAsync().then(function(){App.Global.adLoaded=!0}).catch(function(t){})},n.prototype.FBShowShop=function(){var e=this;if(null===this._shopScreen){var i=new t.ShopScreen(this.game);i.exitButton.onClick.add(function(){i.acceptInput&&(i.acceptInput=!1,i.change?FBInstant.player.setDataAsync({saveData:App.Global.saveData}).then(function(){i.hide(),e.FBShowSelection(),FBInstant.player.flushDataAsync().then(function(){}).catch(function(t){})}).catch(function(t){}):(i.hide(),this.FBShowSelection()))},this),i.buyUseButton.onClick.add(function(){i.acceptInput&&i.onBuyUseButton()},this),this._shopScreen=i}this.world.remove(this._shopScreen),this.world.addAt(this._shopScreen,this.world.getIndex(this._dark)+1),this._shopScreen.show(null!=this._fbPlayerLeaderboardEntry?this._fbPlayerLeaderboardEntry.getScore():0,App.Global.saveData.coins)},n.prototype.onGameeShop=function(){if(App.Global.GAMEE&&(Gamee.Gamee.instance.isWeb||Gamee.Gamee.instance.isBattle))this._playState=e.FORCE_RESET;else{if(this._player.stopAnim(),this._ghostPlayer.stopAnim(),this.game.physics.arcade.isPaused=!0,this._playState=e.SHOP_WAIT,this._dark.show(.75),null===this._shopScreenGamee){var i=new t.ShopScreenGamee(this.game);i.onShopClosed.add(function(t){i.acceptInput=!1,i.change&&(this._player.setSkin(App.Global.saveData.selected),App.Global.GAMEE&&window.gamee.gameSave(JSON.stringify(App.Global.saveData),!1)),i.hide(),this._dark.hide(),this._player.setAnim("run"),this._ghostPlayer.setAnim("run"),this._playState=e.FORCE_RESET},this),this._shopScreenGamee=i}this.world.remove(this._shopScreenGamee),this.world.add(this._shopScreenGamee),this.world.addAt(this._shopScreenGamee,this.world.getIndex(this._dark)+1),this._shopScreenGamee.show(0,App.Global.saveData.coins)}},n.REPLAY_DATA_VERSION=1,n.LEADERBOARD_NAME="global_leaderboard",n.DEBUG=!1,n}(Phaser.State);t.Play=i}(Ninja2||(Ninja2={}));var App;!function(t){var e=function(){function t(){}return t.FBINSTANT=!1,t.GAMEE=!0,t.game=null,t.GAME_WIDTH=640,t.GAME_HEIGHT=1024,t.MAX_GAME_WIDTH=640,t.MAX_GAME_HEIGHT=1024,t.scaleX=1,t.scaleY=1,t.correctOrientation=!1,t.musicOn=!0,t.soundOn=!0,t.showLanguages=!1,t.supportedLanguages=["en"],t.currentLanguage="en",t.adsSupported=!1,t.ad=null,t.adLoaded=!1,t}();t.Global=e}(App||(App={}));var PhaserGlobal={stopFocus:!0};window.onload=function(){if(App.Global.GAMEE)var t=new Gamee.Gamee("OneButton",{},["saveState","replay","ghostMode","playerData","coins"],function(){var e=startGame();t.setGame(e)});else if(App.Global.FBINSTANT){if(null==FBInstant)return App.Global.FBINSTANT=!1,void startGame();FBInstant.initializeAsync().then(function(){startGame()}).catch(function(t){App.Global.FBINSTANT=!1,startGame()})}else startGame()};var Ninja2;!function(t){var e=function(e){function i(){var n=this,a=(window.innerWidth,window.innerHeight,i.getRenderer());return n=e.call(this,{width:1,height:1,renderer:a,parent:"content",transparent:!1,antialias:!0,physicsConfig:null})||this,i.game=n,Utils.PhaserUtils.ChangeAnimationPhaserJSONData(n.additionalFrameProperties),Utils.PhaserUtils.AdjustTweenFunctions(),Utils.PhaserUtils.AddBitmapFontAddMethod(),n.state.add("Boot",t.Boot),n.state.add("Preloader",t.Preloader),n.state.add("Play",t.Play),n.state.start("Boot"),n}return __extends(i,e),i.getRenderer=function(){var t,e,i,n=[/.*Mali.400.*/i,/.*Mali.450.*/i,/.*Mediatek.MT6582.*/i],a=document.createElement("canvas");try{t=a.getContext("webgl")||a.getContext("experimental-webgl")}catch(t){return Phaser.AUTO}if(!t)return Phaser.AUTO;if(!(e=t.getExtension("WEBGL_debug_renderer_info")))return Phaser.AUTO;i=t.getParameter(e.UNMASKED_RENDERER_WEBGL);for(var s=0;s<n.length;s++){if(n[s].test(i))return Phaser.CANVAS}return Phaser.AUTO},i.prototype.onSound=function(t){if(null!=this.sound)if(this.sound.mute=!t,App.Global.soundOn=t,App.Global.musicOn=t,t){if(!this.cache.checkSoundKey("Music"))return;Utils.AudioUtils.playMusic("Music")}else Utils.AudioUtils.stopMusic()},i.prototype.additionalFrameProperties=function(t,e){e.anchor&&(t.anchorX=e.anchor.w,t.anchorY=e.anchor.h),e.nextitem&&(t.nextItemX=e.nextitem.w,t.nextItemY=e.nextitem.h)},i}(Phaser.Game);t.Game=e}(Ninja2||(Ninja2={}));!function(t){var e=function(t){function e(e,i,n,a,s,o,r,h){var l=t.call(this,e,i,n,a,o,r,h)||this;l._changeOnDown=!1,l._checkFramePosition=new Phaser.Point,l._checked=!1;var c=s+"On";l.game.cache.getFrameByName(n,c),l._frameChecked=c;var p=s+"Off";l.game.cache.getFrameByName(n,c)||(p=null),l._frameUnchecked=p;var _=new Phaser.Sprite(e,0,0,n);return _.anchor.set(.5,.5),l.addChild(_),l._checkSprite=_,l.checked=!1,l}return __extends(e,t),Object.defineProperty(e.prototype,"checked",{get:function(){return this._checked},set:function(t){if(this._checked=t,t)this._checkSprite.frameName=this._frameChecked,this._checkSprite.visible=!0;else{var e=null!==this._frameUnchecked;e&&(this._checkSprite.frameName=this._frameUnchecked),this._checkSprite.visible=e}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changeOnDown",{get:function(){return this._changeOnDown},set:function(t){this._changeOnDown=t},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"checkSprite",{get:function(){return this._checkSprite},enumerable:!0,configurable:!0}),e.prototype.setCheckPosition=function(t,e){this._checkSprite.position.set(t,e)},e.prototype.downEvent=function(){this.setButton(this._over,!0),this._changeOnDown&&(this.checked=!this.checked),this.downAction(),this.onDown.dispatch(this,this._checked)},e.prototype.upEvent=function(t,e,i){this.setButton(this._over,!1),this.upAction(),i&&(this._changeOnDown||(this.checked=!this.checked),this.onClick.dispatch(this,this._checked))},e}(t.Button);t.CheckBox=e}(UI||(UI={}));!function(t){var e=function(t){function e(e,i,n,a,s,o){var r=t.call(this,e,i,n,a,o,s)||this;return r._toggled=!1,r._changeOnDown=!0,r._frameToggled=s,r._frameUntoggled=a,r.toggled=r._toggled,r}return __extends(e,t),Object.defineProperty(e.prototype,"toggled",{get:function(){return this._toggled},set:function(t){this._toggled=t,t?(this._button.setFrames(null,this._frameToggled,this._frameToggled,this._frameToggled),this._changeOnDown&&(this._button.frameName=this._frameToggled)):(this._button.setFrames(null,this._frameUntoggled,this._frameUntoggled,this._frameUntoggled),this._changeOnDown&&(this._button.frameName=this._frameUntoggled))},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"changeOnDown",{get:function(){return this._changeOnDown},set:function(t){this._changeOnDown=t},enumerable:!0,configurable:!0}),e.prototype.downEvent=function(){this.setButton(this._over,!0),this._changeOnDown&&(this.toggled=!this.toggled),this.downAction(),this.onDown.dispatch(this,this._toggled)},e.prototype.upEvent=function(t,e,i){this.setButton(this._over,!1),this.upAction(),i&&(this._changeOnDown||(this.toggled=!this.toggled),this.onClick.dispatch(this,this._toggled))},e}(t.Button);t.Toggle=e}(UI||(UI={}));var UI;!function(t){!function(t){t[t.TOP_LEFT=0]="TOP_LEFT",t[t.TOP=1]="TOP",t[t.TOP_RIGHT=2]="TOP_RIGHT",t[t.LEFT=3]="LEFT",t[t.CENTER=4]="CENTER",t[t.RIGHT=5]="RIGHT",t[t.BOTTOM_LEFT=6]="BOTTOM_LEFT",t[t.BOTTOM=7]="BOTTOM",t[t.BOTTOM_RIGHT=8]="BOTTOM_RIGHT"}(t.eGroupPlacement||(t.eGroupPlacement={}));var e=function(t){function e(e,i){void 0===i&&(i=null);var n=t.call(this,e,i)||this;return n._groups=[],n}return __extends(e,t),e.prototype.hasGroupAt=function(t){var e=this._groups[t];return void 0!==e&&null!==e},e.prototype.groupAt=function(t,e){void 0===e&&(e=!0);var i=this._groups[t];return void 0!==i&&null!==i||!e||((i=new Phaser.Group(this.game,this)).fixedToCamera=!0,this._groups[t]=i,this.arrangeGroup(t)),i},e.prototype.arrangeGroups=function(){for(var t=0;t<this._groups.length;t++){var e=this._groups[t];void 0!==e&&null!==e&&this.arrangeGroup(t)}},e.prototype.arrangeGroup=function(t){var e=t%3,i=Math.floor(t/3),n=this._groups[t];if(void 0!==n&&null!==n){var a=this.game.width*e/2,s=this.game.height*i/2;n.cameraOffset.set(a,s)}},e}(Phaser.Group);t.UILayer=e}(UI||(UI={}));!function(t){var e=function(){function t(){}return t.setSounds=function(e,i){void 0===i&&(i=null),t._sfx=e,t._sfxIds=i,t._isAudioSprite=null!==e&&e instanceof Phaser.AudioSprite},t.addSound=function(e,i){t._sfxs[e]=i},t.playSound=function(e){var i=t.getSoundName(e);App.Global.soundOn&&(null!==t._sfx?t._sfx.play(i):void 0!==t._sfxs[i]&&t._sfxs[i].play())},t.stopSound=function(e){var i=t.getSoundName(e);null!==t._sfx?t._isAudioSprite&&t._sfx.stop(i):void 0!==t._sfxs[i]&&t._sfxs[i].stop()},t.getSoundName=function(e){return"number"==typeof e?t._sfxIds[e]:e},Object.defineProperty(t,"currentMusic",{get:function(){return t._currentMusic},enumerable:!0,configurable:!0}),Object.defineProperty(t,"isMusicPlaying",{get:function(){if(null===this._currentMusic||0===this._currentMusic.length)return!1;return t._music[t._currentMusic].isPlaying},enumerable:!0,configurable:!0}),t.addMusic=function(e,i){t._music[e]=i},t.playMusic=function(e,i){if(void 0===i&&(i=!0),t._currentMusic!==e&&(null!==t._currentMusic&&t._currentMusic.length>0&&t.stopMusic(),e in t._music&&App.Global.musicOn)){t._currentMusic=e;var n=t._music[e];n.loop=i,n.play(),i||n.onStop.addOnce(function(){t.onFinished.dispatch(e)},this)}},t.stopMusic=function(){if(null!==t._currentMusic&&t._currentMusic.length>0){var e=t._music[t._currentMusic];e.isPlaying&&e.stop(),t._currentMusic=""}},t.pauseMusic=function(){if(null!==t._currentMusic&&t._currentMusic.length>0){var e=t._music[t._currentMusic];e.isPlaying&&e.pause()}},t.resumeMusic=function(){if(null!==t._currentMusic&&t._currentMusic.length>0){var e=t._music[t._currentMusic];e.paused&&e.resume()}},t._sfx=null,t._isAudioSprite=!1,t._sfxs={},t._music={},t._currentMusic="",t.onFinished=new Phaser.Signal,t}();t.AudioUtils=e}(Utils||(Utils={}));!function(t){var e=function(){function t(){}return t.supported=function(){return App.Global.game.scale.compatibility.supportsFullScreen},t.isFullscreen=function(){return App.Global.game.scale.isFullScreen},t.changeFullscreen=function(){var t=App.Global.game;t.scale.isFullScreen?t.scale.stopFullScreen():t.scale.startFullScreen(!1,!1)},t}();t.FullscreenUtils=e}(Utils||(Utils={}));!function(t){var e=function(){function t(){}return t.ChangeAnimationPhaserJSONData=function(t){Phaser.AnimationParser.myCallback=t,Phaser.AnimationParser.JSONData=function(t,e){if(e.frames){for(var i=new Phaser.FrameData,n=e.frames,a=0;a<n.length;a++){var s=i.addFrame(new Phaser.Frame(a,n[a].frame.x,n[a].frame.y,n[a].frame.w,n[a].frame.h,n[a].filename));n[a].trimmed&&s.setTrim(n[a].trimmed,n[a].sourceSize.w,n[a].sourceSize.h,n[a].spriteSourceSize.x,n[a].spriteSourceSize.y,n[a].spriteSourceSize.w,n[a].spriteSourceSize.h),Phaser.AnimationParser.myCallback(s,n[a])}return i}}},t.AdjustTweenFunctions=function(){Phaser.TweenManager.prototype.removeFromUpdateQueue=function(t){var e=this._tweens.indexOf(t);-1!==e?this._tweens.splice(e,1):-1!==(e=this._add.indexOf(t))&&this._add.splice(e,1)},Phaser.Tween.prototype.stopAndRemoveFromUpdateQueue=function(t){var e=this.stop(t);return this.manager.removeFromUpdateQueue(this),this.pendingDelete=!1,e}},t.AddBitmapFontAddMethod=function(){Phaser.Cache.prototype.addBitmapFontFromImage=function(t,e,i,n,a,s,o){var r=this.getImage(i,!0),h={url:e,data:r.data,font:null,base:r.base};void 0===s&&(s=0),void 0===o&&(o=0),h.font="json"===a?Phaser.LoaderParser.jsonBitmapFont(n,h.base,s,o):Phaser.LoaderParser.xmlBitmapFont(n,h.base,s,o),this._cache.bitmapFont[t]=h,this._resolveURL(e,h)}},t}();t.PhaserUtils=e}(Utils||(Utils={}));!function(t){var e=function(){return function(){}}();t.ScreenMetrics=e;var i;!function(t){t[t.PORTRAIT=0]="PORTRAIT",t[t.LANDSCAPE=1]="LANDSCAPE"}(i=t.eOrientation||(t.eOrientation={}));var n=function(){function t(){}return t.calculateScreenMetrics=function(t,n,a,s,o,r){void 0===a&&(a=i.LANDSCAPE);var h,l;if(h=window.innerWidth,l=window.innerHeight,(h<l&&a===i.LANDSCAPE||l<h&&a===i.PORTRAIT)&&!s){var c=h;h=l,l=c}void 0!==o&&void 0!==r||(a===i.LANDSCAPE?(o=Math.round(1024*t/960),r=Math.round(720*n/600)):(o=Math.round(720*t/600),r=Math.round(1024*n/960)));var p=h/l,_=0,u=0,d=0,m=0;p>t/n?(m=n,d=2*Math.ceil(m*p/2),_=((d=Math.min(d,o))-t)/2,u=0):(d=t,m=2*Math.ceil(d/p/2),_=0,u=((m=Math.min(m,r))-n)/2);var g=(h+.01)/d,f=(l+.01)/m;return s&&a===i.LANDSCAPE&&(g=f),this.screenMetrics=new e,this.screenMetrics.windowWidth=h,this.screenMetrics.windowHeight=l,this.screenMetrics.defaultGameWidth=t,this.screenMetrics.defaultGameHeight=n,this.screenMetrics.maxGameWidth=o,this.screenMetrics.maxGameHeight=r,this.screenMetrics.gameWidth=d,this.screenMetrics.gameHeight=m,this.screenMetrics.scaleX=g,this.screenMetrics.scaleY=f,this.screenMetrics.offsetX=_,this.screenMetrics.offsetY=u,this.screenMetrics},t}();t.ScreenUtils=n}(Utils||(Utils={}));!function(t){var e=function(){return function(){}}(),i=function(){function t(){}return t.save=function(){var i=new e;i.musicOn=App.Global.musicOn,i.soundOn=App.Global.soundOn,i.currentLanguage=App.Global.currentLanguage;var n=t.getLocalStorage();if(null!==n){var a=JSON.stringify(i);n.setItem("ninja2_save",a)}},t.load=function(){var e=null;if(null===e||void 0===e){var i=t.getLocalStorage();if(null===i)return!1;e=JSON.parse(i.getItem("ninja2_save"))}return null!==e&&void 0!==e&&(App.Global.musicOn=e.musicOn,App.Global.soundOn=e.soundOn,App.Global.currentLanguage=e.currentLanguage,!0)},t.getLocalStorage=function(){try{if("localStorage"in window&&null!==window.localStorage)return localStorage}catch(t){return null}return null},t}();t.StorageUtils=i}(Utils||(Utils={}));!function(t){var e=function(){function t(){}return t.padNumber=function(t,e,i){void 0===i&&(i="0");var n=t+"";return n.length>=e?n:new Array(e-n.length+1).join(i)+n},t.addSpacingToNumber=function(t,e){return void 0===e&&(e=" "),(""+t).replace(/\B(?=(\d{3})+(?!\d))/g,e)},t.formatTime=function(e,i,n,a){void 0===n&&(n=-1),void 0===a&&(a=":");var s=!1,o="";if((e=Math.floor(e))>3600||0===i){var r=Math.floor(e/3600);o+=(-1!==n?t.padNumber(r,n):r)+a,e%=3600,s=!0}if(!0===s||e>60||1===i){var h=Math.floor(e/60);o+=(-1!==n?t.padNumber(h,n):h)+a,e%=60,s=!0}var l=e;return o+=-1!==n?t.padNumber(l,n):l},t}();t.StringUtils=e}(Utils||(Utils={}));var Utils;!function(t){var e=function(){function t(){}return t.setTexts=function(e){t._texts=e},t.getText=function(e,i){if(null===t._texts)return"Texts not set";void 0===i&&(i=App.Global.currentLanguage);var n=t._texts[i];if(void 0===n)return"Invalid language "+i;var a=n[e];return void 0===a?"!MISSING TEXT!":a},t._texts=null,t}();t.TextUtils=e}(Utils||(Utils={}));
